We introduce a method for generating realistic pedes-trian trajectories and full-body animations that can be con-trolled to meet user-defined goals. We draw on recent ad-vances in guided diffusion modeling to achieve test-time controllability of trajectories, which is normally only asso-ciated with rule-based systems. Our guided diffusion model allows users to constrain trajectories through target way-points, speed, and specified social groups while accounting for the surrounding environment context. This trajectory diffusion model is integrated with a novel physics-based hu-manoid controller to form a closed-loop, full-body pedes-trian animation system capable of placing large crowds in a simulated environment with varying terrains. We fur-ther propose utilizing the value function learned during RL training of the animation controller to guide diffusion to produce trajectories better suited for particular scenarios such as collision avoidance and traversing uneven terrain.Video results are available on the project page. 