This paper presents the importance of document layout analysis in understanding documents, such as retrieval and conversion. Existing public datasets mainly consist of PDF documents and lack realistic samples. Models trained on these datasets may not perform well in real-world scenarios. To address this, the paper introduces a new dataset called M6Doc, which is large and diverse. The name M6 represents six properties of the dataset: (1) It includes multi-format documents, such as scanned, photographed, and PDF documents; (2) It covers various document types, including scientific articles, textbooks, books, test papers, magazines, newspapers, and notes; (3) It includes multiple layout types, such as rectangular, Manhattan, non-Manhattan, and multi-column Manhattan layouts; (4) It consists of documents in multiple languages, specifically Chinese and English; (5) It provides annotations for 74 different categories with a total of 237,116 annotation instances across 9,080 manually annotated pages; and (6) It represents modern documents.In addition, the paper proposes a transformer-based method called TransDLANet for document layout analysis. This method uses an adaptive element matching mechanism to improve recall by enabling query embedding to better match the ground truth. It also includes a segmentation branch for more precise document image instance segmentation. The effectiveness of the M6Doc dataset is evaluated using various layout analysis methods, and TransDLANet achieves state-of-the-art performance with a mean Average Precision (mAP) of 64.5% on the M6Doc dataset. The M6Doc dataset will be made available on GitHub.Overall, this paper emphasizes the need for document layout analysis, introduces the M6Doc dataset, and presents the TransDLANet method, which achieves high performance on the dataset. The paper contributes to the field of document understanding and provides a valuable resource for further research in this area.