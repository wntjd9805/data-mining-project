This paper introduces a method called multi-agent automated machine learning (MA2ML) that aims to effectively optimize modules in automated machine learning (AutoML). MA2ML treats each machine learning module (such as data augmentation, neural architecture search, and hyperparameters) as an agent and formulates the problem as a multi-agent reinforcement learning task, with the final performance as the reward. MA2ML assigns credit to each agent based on its contribution to encourage cooperation among the modules. It also incorporates off-policy learning to improve search efficiency. Theoretical analysis shows that MA2ML ensures continuous improvement in joint optimization. Experimental results demonstrate that MA2ML achieves state-of-the-art top-1 accuracy on ImageNet while adhering to computational cost constraints (e.g., 79.7%/80.5% with FLOPs fewer than 600M/800M). Further analysis confirms the benefits of credit assignment and off-policy learning in MA2ML.