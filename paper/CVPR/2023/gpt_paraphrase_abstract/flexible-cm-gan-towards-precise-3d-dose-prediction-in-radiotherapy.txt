Deep learning has been employed in knowledge-based radiotherapy planning to generate three-dimensional dose maps for new patients. However, existing methods are limited to simple scenarios, such as fixed planning types or consistent beam angle configurations, which restricts their usability across a wider range of clinical scenarios. To address this limitation, we propose a new conditional generative model called Flexible-Cm GAN that incorporates additional information about planning types and beam geometries. We introduce a miss-consistency loss to handle the challenge of incomplete training samples. To account for clinical preferences, we introduce a differentiable shift-dose-volume loss that incorporates dose-volume histogram constraints. During inference, users can choose specific planning types and beam angles to meet clinical requirements. We conduct experiments on a face dataset to illustrate the motivation of Flexible-Cm GAN and validate its potential clinical value using two radiotherapy datasets. The results show that our proposed method outperforms existing deep learning-based approaches in a practical radiotherapy planning application.