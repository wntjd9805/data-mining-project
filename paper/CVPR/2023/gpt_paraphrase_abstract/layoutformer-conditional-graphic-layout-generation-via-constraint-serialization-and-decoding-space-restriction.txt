This study addresses the challenge of generating realistic layouts that adhere to user constraints. The existing research on this topic is limited, particularly in terms of handling diverse and flexible user constraints. Additionally, previous approaches have sacrificed generation quality to meet these constraints. To address these issues, this study introduces LayoutFormer++, a solution that offers a more comprehensive approach. To handle diverse constraints, the study proposes a constraint serialization scheme. This scheme represents various user constraints as token sequences in a predefined format. The study then formulates conditional layout generation as a sequence-to-sequence transformation, utilizing an encoder-decoder framework with the Transformer architecture as its foundation. To improve the layout's adherence to user requirements without compromising quality, the study introduces a decoding space restriction strategy. This strategy involves pruning the predicted distribution by disregarding options that clearly violate user constraints and are likely to produce low-quality layouts. The model then samples from the restricted distribution. Experimental results demonstrate that LayoutFormer++ outperforms existing approaches in terms of both generation quality and constraint violation.