Abstract
Vector graphics (VG) are ubiquitous in industrial de-signs.
In this paper, we address semantic segmentation of a typical VG, i.e., roughcast floorplans with bare wall structures, whose output can be directly used for further applications like interior furnishing and room space mod-eling. Previous semantic segmentation works mostly pro-cess well-decorated floorplans in raster images and usu-ally yield aliased boundaries and outlier fragments in seg-mented rooms, due to pixel-level segmentation that ignores the regular elements (e.g. line segments) in vector floor-plans. To overcome these issues, we propose to fully uti-lize the regular elements in vector floorplans for more in-tegral segmentation. Our pipeline predicts room segmen-tation from vector floorplans by dually classifying line seg-ments as room boundaries, and regions partitioned by line segments as room segments. To fully exploit the structural relationships between lines and regions, we use two-stream graph neural networks to process the line segments and par-titioned regions respectively, and devise a novel modulated graph attention layer to fuse the heterogeneous information from one stream to the other. Extensive experiments show that by directly operating on vector floorplans, we outper-form image-based methods in both mIoU and mAcc. In ad-dition, we propose a new metric that captures room integrity and boundary regularity, which confirms that our method produces much more regular segmentations. Source code is available at https://github.com/DrZiji/VecFloorSeg. 1.

Introduction
Vector graphics are widely used in industrial designs, in-cluding graphic designs [26], 2D interfaces [5] and floor-plans [15].
In particular, 2D floorplans consisting of ge-ometric primitives (e.g., lines and curves) are the de-facto
§Haiyong is the Project Lead.
∗Corresponding Author.
Figure 1. Comparing the results of our vector graphics based method (e) and raster image-based method [39] (f). Our result has straight boundaries and consistent region labels, compared with image-based result where red squares highlight semantic confu-sion and the green square underscores missing room prediction. data representation for interior designs, indoor construction and property development. In contrast to raster images with fixed resolutions, vector graphics can be arbitrarily scaled without artifacts such as blurring and aliasing details. On the other hand, due to the irregularly structured data, it is difficult to apply image-based backbone networks directly to vector graphics for various applications.
Semantic segmentation of roughcast floorplans into rooms with labeled types (e.g. bedroom, kitchen, etc.) is a fundamental task for downstream applications. Interior de-signers usually first draw the roughcast floorplan, including basic elements like wall blocks and pipe barrels for property development (Fig. 1(a)) [29, 34]. Afterwards, interior fur-nishing, furniture layout, and 3D room spaces can be con-structed and customized (Fig. 1(b)&(c)) [33]. During this procedure, it is important to obtain semantic segmentation of room spaces to cater to above needs. While recogniz-ing room layouts from wall structures is straightforward for humans, automatic recognition with accurate semantics and clean boundaries is challenging.
Recent works [19, 22, 23, 39] use powerful image-based segmentation networks on rasterized floorplans to predict room segmentation in a pixel-wise manner. Due to the pixel-wise processing that ignores the integrity of structural elements, their results tend to have jigsaw boundaries and fragmented semantic regions as shown in Fig. 1(f). Besides, these methods usually rely on texts and furniture to deter-mine the semantic labels, which are not available in rough-cast floorplans. Another line of prior works processes vec-tor graphics for recognition, e.g., object detection [14, 28] and symbol spotting [9,10,41]. However, to our best knowl-edge, semantic segmentation of vector graphics, roughcast floorplans in particular, has not been investigated before.
In this work, we make a first attempt at semantic seg-mentation of 2D roughcast floorplans directly as vector graphics. On one hand, by working with vector floor-plans directly, the segmentation output is naturally regular and compact vector graphics rather than dense pixels (cf.
Fig. 1(e)&(f)), which greatly facilitates downstream appli-cations. On the other hand, the vector roughcast floorplans pose challenges in the following aspects. First, rooms in vector floorplans seldomly contain complete contour lines formed by the input line segments (see Fig. 1(a)&(d)). Sec-ond, the type of a room is determined not only by its shape but also by the relative relationships with its neighboring rooms and within the overall floorplan.
To address the above challenges, we make two obser-vations. First, room spaces can be subdivided into a set of polygonal regions by input lines together with their ex-tensions (Fig. 2), and their semantic classification as room types defines room segmentation. Second, lines (including extended lines) are potential boundaries of different rooms, and their being classified as boundaries or not should assist room segmentation in a dual direction.
Based on the two observations, we design a two-stream graph attention network (GAT) for the task. As illustrated in Fig. 2, the primal stream takes as input the primal graph that encodes line endpoints as vertices and line segments as edges, and predicts the boundary classification of edges; the dual stream takes as input the dual graph that encodes parti-tioned regions as vertices and their adjacency as edges, and predicts the vertex classification of regions, which effec-tively defines the semantic segmentation of a vector floor-plan. Furthermore, the two streams should enhance each other rather than being separated. To facilitate data ex-change between two streams, we present a novel modulated
GAT layer to fuse information from one stream into the graph network computation of the other stream. We evalu-ate our approach on two large-scale floorplan datasets; both classical metrics and a new metric that we develop to focus on integral segmentation show that our results improve pre-vious image-based results significantly. To summarize, we make the following contributions:
• We approach semantic segmentation of vector rough-cast floorplans through the dual aspects of boundary line classification and region classification.
• We design two-stream graph neural networks to pro-cess dual regions and primal lines respectively, and devise a novel modulated GAT layer to exchange data across streams.
• We propose a new metric to capture both accuracy and integrity of the segmentation results.
• We obtain vector segmentation results on two floorplan datasets, which show much more compact boundaries and better integrity than raster image-based results. 2.