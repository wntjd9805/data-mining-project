Abstract
Recently, many deep stereo matching methods have be-gun to focus on cross-domain performance, achieving im-pressive achievements. However, these methods did not deal with the significant volatility of generalization perfor-mance among different training epochs. Inspired by masked representation learning and multi-task learning, this pa-per designs a simple and effective masked representation for domain generalized stereo matching. First, we feed the masked left and complete right images as input into the models. Then, we add a lightweight and simple decoder following the feature extraction module to recover the orig-inal left image. Finally, we train the models with two tasks (stereo matching and image reconstruction) as a pseudo-multi-task learning framework, promoting models to learn structure information and to improve generalization per-formance. We implement our method on two well-known architectures (CFNet and LacGwcNet) to demonstrate its effectiveness. Experimental results on multi-datasets show that: (1) our method can be easily plugged into the cur-rent various stereo matching models to improve generaliza-tion performance; (2) our method can reduce the signifi-cant volatility of generalization performance among differ-ent training epochs; (3) we find that the current methods prefer to choose the best results among different training epochs as generalization performance, but it is impossible to select the best performance by ground truth in practice. 1.

Introduction
Stereo matching is a challenging research topic of com-puter vision, which aims to obtain the corresponding pix-els between two rectified stereo images [3, 30, 37, 39]. It is essential in many applications, including autonomous [11], augmented reality [35], virtual reality [2], etc. 1(cid:66) is the corresponding author. (a) CFNet (b) LacGwcNet
Figure 1. The generalization performance among different epochs on multi-datasets. When the models converge on the source do-main (Sceneflow), the results are stable on the source domain.
However, generalization performance has fluctuations on target datasets (KITTI 2012&2015, ETH3D, and Middlebury).
In mainstream deep stereo matching methods, the main steps include four parts: feature extraction, cost volume, feature matching, and disparity regression [10]. To improve the accuracy or speed, researchers proposed many strate-gies to improve the above four parts [3, 25, 36]. For exam-ple, 1) scene awareness modules are applied to the feature extraction to improve accuracy [3, 21]; 2) similarity mea-surements are employed to enhance physical representation in cost volume construction [23, 26, 36]; 3) various feature matching modules are proposed to solve inefficient calcula-tions or improve accuracy [15, 25, 39]; 4) loss functions of classification or other fields are joined to disparity regres-sion to obtain unimodal results [42]. Although the above methods have achieved significant progress in accuracy or efficiency, they failed to obtain good generalization perfor-mance in unseen domains [30, 40].
Therefore, many approaches learn domain-invariant rep-resentation features to achieve better generalization capabil-ity [40]. There are three solutions to accomplish this objec-tive: the unsupervised matching method [24,32,33], domain
adaptation techniques [12, 13, 17, 31], and domain general-ization approaches [16, 30, 41]. The above solutions reveal that feature presentation is crucial for improving general-ization capability [40, 41]. However, all domain general-ized matching methods did not mention that the generaliza-tion performance varies significantly among different train-ing epochs, as shown in Fig. 1. Namely, the results were unstable. These methods preferred to choose the best re-sults to represent the generalization performance by testing the models of different training epochs. However, we can not employ ground truth (can not obtain) to select the best model among different training epochs in practice. Thus, it is crucial to keep a stable generalization performance.
On the other hand, many researchers introduced multi-task learning into stereo matching [18, 27]. For instance,
Rao et al. proposed a bidirectional guided attention network to cope with semantic segmentation and stereo matching si-multaneously [27]. Liu et al. employed the task-shared and task-specific manner to obtain a generalizable representa-tion and used the loss weights to balance all tasks [18]. The multi-task learning proved that feature sharing and weight sharing are essential in different tasks, promoting the learn-ing process and obtaining a better feature representation. In-spired by these multi-task learning methods, we use masked left images as input to reconstruct the original left image as another task. By building pseudo-multi-task learning, we obtain better structural information features, urging stereo matching models to perform better generalization.
This paper addresses the domain generalization for stereo matching methods by masked representation learn-ing. Our solution considerably increases generalization ac-curacy while reducing the volatility of generalization per-formance among different training epochs. First, we ran-domly mask (or remove) the part of the left image with a fixed ratio following a uniform distribution. Second, we add a simple decoder to the feature extraction module’s tail to recover the original left image. Finally, we train the model with two tasks (stereo matching and image reconstruction) as a pseudo-multi-task learning framework and test general-ization performance on the multi-datasets. In this task, our strategy helps existing methods to achieve significant gains in generalization performance. Furthermore, we exhibit the generalization performance over different training epochs to demonstrate the superiority of our approach. We hope these observations will help other tasks explore better generaliza-tion results. The main contributions are as follows:
• We combine masked image modeling and stereo matching as a pseudo-multi-task learning framework to increase generalization accuracy in stereo matching.
• Our approach is employed for various stereo matching networks, significantly improving cross-domain accu-racy and reducing the volatility of generalization per-formance among different training epochs.
• We find that the accuracy of the existing stereo match-ing domain generalization methods varies significantly among different training epochs. Thus, we advise that stability should be evaluated in cross-domain methods. 2.