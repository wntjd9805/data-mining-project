Abstract
The paper presents a novel approach for vector-floorplan generation via a diffusion model, which denoises 2D coordinates of room/door corners with two inference ob-jectives: 1) a single-step noise as the continuous quantity to precisely invert the continuous forward process; and 2) the final 2D coordinate as the discrete quantity to establish ge-ometric incident relationships such as parallelism, orthog-onality, and corner-sharing. Our task is graph-conditioned floorplan generation, a common workflow in floorplan de-sign. We represent a floorplan as 1D polygonal loops, each of which corresponds to a room or a door. Our dif-fusion model employs a Transformer architecture at the core, which controls the attention masks based on the in-put graph-constraint and directly generates vector-graphics floorplans via a discrete and continuous denoising pro-cess. We have evaluated our approach on RPLAN dataset.
The proposed approach makes significant improvements in all the metrics against the state-of-the-art with significant margins, while being capable of generating non-Manhattan structures and controlling the exact number of corners per room. A project website with supplementary video and doc-ument is here https://aminshabani.github.io/housediffusion. 1.

Introduction
Automated floorplan generation made tremendous progress in the last few years. While not being fully au-tonomous yet, the state-of-the-art techniques help architects to explore the space of possible designs quickly [33, 34]. 90% of buildings do not have dedicated architects for floor-plan design due to their cost in North America. This tech-nology will make the work of professional architects afford-able to more house buyers.
Despite recent progress, state-of-the-art floorplan gener-ative models produce samples that are incompatible with the input constraint, lack in variations, or do not look like floorplans [34]. The issue is the raster geometry analysis via convolutions, where a room is represented as a binary image. The raster analysis is good at local shape refinement but lacks in global reasoning, and requires non-trivial post-processing for vectorization [7, 34]. On the other hand, di-rect generation of vector floorplans is not trivial either. Dif-ferent from the generation of images or natural languages, structured geometry exhibit precise incident relationships among architectural components (e.g., doors and rooms).
For example, a wall is usually axis-aligned, where the coor-dinate values of adjacent corners are exactly equal. A wall might be shared with adjacent rooms further. Direct regres-sion of 2D coordinates currently faces limitations in achiev-ing these relationships. One could use a discrete represen-tation such as one hot encoding over possible coordinate values with classification, but this causes a label imbalance (i.e., most values are 0 in the encoding) and fails the net-work training.
This paper presents a novel approach for graph-constrained floorplan generation that directly gener-ates a vector-graphics floorplan (i.e., without any post-processing), handles non-Manhattan architectures, and makes significant improvements on all the metrics. Con-cretely, a bubble-diagram is given as a graph, whose nodes are rooms and edges are the door-connections. We represent a floorplan as a set of 1D polygonal loops, each of which corresponds to a room or a door, then generate 2D coordi-nates of room/door corners (See Fig. 1). The key idea is the use of a Diffusion Model (DM) with a careful design in the denoising targets. Our approach infers 1) a single-step noise amount as a continuous quantity to precisely invert the con-tinuous forward process; and 2) the final 2D coordinate as the discrete quantity to establish incident relationships. The discrete representation after the denoising iterations is the final floorplan model.
Qualitative and quantitative evaluations show that the proposed system outperforms the existing state-of-the-art,
House-GAN++ [34], with significant margins, while being end-to-end and capable of generating non-Manhattan floor-plans with exact control on the number of corners per room.
We will share all our code and models. 2.