Abstract
Learning to leverage the relationship among diverse im-age restoration tasks is quite beneficial for unraveling the intrinsic ingredients behind the degradation. Recent years have witnessed the flourish of various All-in-one methods, which handle multiple image degradations within a single model. In practice, however, few attempts have been made to excavate task correlations in that exploring the underly-ing fundamental ingredients of various image degradations, resulting in poor scalability as more tasks are involved. In this paper, we propose a novel perspective to delve into the degradation via an ingredients-oriented rather than pre-vious task-oriented manner for scalable learning. Specif-ically, our method, named Ingredients-oriented Degrada-tion Reformulation framework (IDR), consists of two stages, namely task-oriented knowledge collection and ingredients-oriented knowledge integration. In the first stage, we con-duct ad hoc operations on different degradations according to the underlying physics principles, and establish the cor-responding prior hubs for each type of degradation. While the second stage progressively reformulates the preceding task-oriented hubs into single ingredients-oriented hub via learnable Principal Component Analysis (PCA), and em-ploys a dynamic routing mechanism for probabilistic un-known degradation removal. Extensive experiments on var-ious image restoration tasks demonstrate the effectiveness and scalability of our method. More importantly, our IDR exhibits the favorable generalization ability to unknown downstream tasks. 1.

Introduction
Image restoration aims to recover the high-quality im-ages from their degraded observations, which is a general term of a series of low-level vision tasks.
In addition to achieving satisfactory visual effects in photography, image restoration is also widely used in many other real world scenarios, such as autopilot and surveillance. Complex
*Both authors contributed equally to this research.
†Corresponding author.
Figure 1. An illustration of our proposed ingredients-oriented degradation reformulation principle.
Instead of previous task-oriented paradigm where each tasks are learned exclusively, we perform an ingredients-oriented paradigm to explore the correla-tion among diverse restoration tasks for scaleable degradation re-formulated learning, where the Conv., Add. and Mul. means the convolution, addition and multiplication. environments put forward higher requirements for image restoration algorithms, when considering the variability and unknowability of the corruption types. Since most exist-ing methods have been dedicated into single degradation re-moval, such as denoising [15, 24, 61], deraining [20, 52, 55], debluring [8, 40, 42], dehazing [26, 44, 45], low-light en-hancement [14, 34, 50], etc., which do not satisfy the ap-plications in real world scenarios.
Recently, all-in-one fashion methods have been com-ing to the fore, which handle multiple image degradations within a single model. These methods can be roughly categorized into two families, i.e., corruption-specific and corruption-agnostic. Representative studies of the former
[2, 28] deal with different degradations via separate sub-networks, which demands pre-specification of corruption types, limiting the scope of further application. While the efforts in latter [25, 47] release the model from the prior of the corruption types, improving the flexibility in prac-tice. However, both of them suffer from poor scalability as more tasks are involved, indicating that the diverse degrada-tions are learned exclusively under the potential capability bottleneck, without touching the intrinsic correlation among them, which we referred as task-oriented paradigm.
To solve the above problem, we ask two questions: i)
’whether there are commonalities between different degra-dations?’ During past decades, few of works have been devoted to this field,
[10] presented the interrelationship between image dehazing and low-light image enhancement.
Going a step further, we envision that such association are widespread in various degradations, such as directionality in deblurring and deraining, unnatural image layering in deraining and denoising. Therefore, it is of great interest to consider the correlation among various restoration tasks for learning the intrinsic ingredients behind the degrada-tion, which we referred as ingredient-oriented paradigm. ii)
’Whether an corrupted image definitely ascribed to only one type of degradation?’
In real world scenarios, it is hard to determine as multiple degradations may occur simul-taneously, such as heavy rain typically accumulated with mist, or low-light combined with blur in night-time surveil-lance [63]. Therefore, it is inappropriate to learn each restoration task exclusively.
In this paper, we propose Ingredients-oriented Degrada-tion Reformulation framework (IDR) for all-in-one image restoration, which provides a novel perspective via delving into the degradation and concentrating on the underlying fundamental ingredients. Specifically, the learning proce-dure of IDR consists of two stages, namely task-oriented knowledge collection and ingredients-oriented knowledge integration. We perform the above reformulation in the meta prior learning module (MPL) with the collaboration of both degradation representation and degradation opera-tion, while the backbone network can be any transformer-based architecture.
In the first stage, we conduct ad hoc operations for different degradations depending on the un-derlying physics principles, which pre-embedding the pri-ors of disparate physics characteristics respectively. Mean-while, separate task-oriented prior hubs are established for each type of degradation, responsible for excavating the specific degradation ingredients for compositional represen-tation. While the second stage progressively reformulates the proceeding task-oriented hubs into single ingredients-oriented hub via learnable Principal Component Analysis (PCA), striving for commonalities among multiple degrada-tions in terms of the ingredient-level, while preserving re-spective variance information as much as possible. Besides, a dynamic soft routing mechanism is employed in MPL for probabilistic unknown1 degradation removal, according to the operation priors embedded in the first stage.
The contributions of this work are summarized as below:
• We rethink the current paradigm of all-in-one fashion methods, and propose to delve into the degradation for intrinsic ingredients excavation, in that improving the scalability of the model. 1Namely, the degradation types are not available in the second stage.
• We propose the Ingredients-oriented Degradation Re-formulation framework (IDR) for image restoration, which consists of two stages, i.e., task-oriented knowl-edge collection and ingredients-oriented knowledge integration, collaborating on both degradation repre-sentation and degradation operation.
• Extensive experiments are conducted to verify the ef-fectiveness of our method. As far as we know, IDR is the first work to perform up to five image restoration tasks in an all-in-one fashion. 2.