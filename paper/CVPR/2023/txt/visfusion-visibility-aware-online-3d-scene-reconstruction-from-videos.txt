Abstract
We propose VisFusion, a visibility-aware online 3D scene reconstruction approach from posed monocular videos. In particular, we aim to reconstruct the scene from volumetric features. Unlike previous reconstruction meth-ods which aggregate features for each voxel from input views without considering its visibility, we aim to improve the feature fusion by explicitly inferring its visibility from a similarity matrix, computed from its projected features in each image pair. Following previous works, our model is a coarse-to-fine pipeline including a volume sparsification process. Different from their works which sparsify voxels globally with a fixed occupancy threshold, we perform the sparsification on a local feature volume along each visual ray to preserve at least one voxel per ray for more fine de-tails. The sparse local volume is then fused with a global one for online reconstruction. We further propose to pre-dict TSDF in a coarse-to-fine manner by learning its resid-uals across scales leading to better TSDF predictions. Ex-perimental results on benchmarks show that our method can achieve superior performance with more scene details.
Code is available at: https://github.com/huiyu-gao/VisFusion 1.

Introduction 3D scene reconstruction from RGB videos is a critical task in 3D computer vision, which finds its broad appli-cations in augmented reality (AR), robot navigation and human-robot interaction. These applications require accu-rate, complete and real-time 3D reconstruction of scenes.
While state-of-the-art SLAM systems [3, 31] can track the camera motion accurately by leveraging both visual and in-ertial measurements in an unknown environment, the recon-structed map from a SLAM system only contains sparse point clouds such that dense reconstruction from monocular videos remains as a challenging problem.
Many previous methods [1, 18] assume the observation of the whole video sequence for the reconstruction, which is not practical for online applications like VR games. In this paper, we follow [26] to propose an online 3D reconstruc-tion method. Given input images, most earlier 3D recon-struction methods [23,35] adopt a two-stage pipeline, which first estimates the depth map for each keyframe based on multi-view stereo (MVS) algorithms [11,14,29,32] and then fuses the estimated depth maps into a Truncated Signed Dis-tance Function (TSDF) volume [19]. The Marching Cubes algorithm [16] is then used to extract the 3D mesh. How-ever, those two-stage pipelines struggle to produce glob-ally coherent reconstruction since each depth map is esti-mated separately [26], especially for low texture regions like walls whose depth values are extremely hard to esti-mate with only several local views. To address this, more recent works [2,26,33] propose to fuse image features into a global 3D volume and directly regress TSDF [26, 33] or oc-cupancy [2] given the feature volume. Such strategy allows for an end-to-end global surface reconstruction.
The problem of occlusion naturally arises for global fea-ture fusion. Previous methods [2, 26] either completely ig-nore it by simply averaging the multi-view features [26] for each voxel or implicitly model the visibility via the atten-tion mechanism [2]. However, without explicit supervision, such attention cannot guarantee to encode the correct visi-bility. In this paper, we thus propose to explicitly predict the visibility weights of all views for each voxel with ground truth supervision. In addition, voxels will be considered vis-ible in at least one view in [2] due to the normalization of the attention mechanism, while in our method, empty vox-els and fully occluded voxels are invisible in any view to avoid introducing noises. Specifically, given a fragment of a video sequence observing the same 3D region, we first project each 3D voxel onto different view images to obtain 2D features. We then compute the pair-wise similarities of these features. Since features of the same occupied voxel are often similar across views, such similarity map naturally encodes the information of whether a 3D voxel is visible at a particular camera view or not (see Fig. 4). We thus use this similarity map to predict visibility weights.
For volumetric-based methods, it is common practice to adopt a coarse-to-fine pipeline [2, 18, 25, 26]. One of its key steps is voxel sparsification which eliminates empty voxels at coarse level for better performance and smaller memory consumption. To the best of our knowledge, previous meth-ods [2,18,25,26] propose to globally sparsify the volume by removing voxels whose occupancy probabilities are lower than a predefined threshold. However, such fixed threshold tends to sparsify more voxels than necessary, especially to remove voxels covering thin structures such as chair legs.
At coarse level where the thin structure only occupies a small portion of the voxel, the features of such thin struc-ture are likely ignored leading to low occupancy probability prediction and resulting in the removal of such voxel. How-ever, such voxel should rank highly, based on the occupancy probability, among voxels along the visual ray defined by the pixel observing this thin structure. Inspired by this, we introduce a novel ray-based sparsification process. In par-ticular, for any image, we first cast a ray from every pixel to get the voxels this ray passes. For each ray, we then keep voxels with top occupancy scores to next level. Unlike pre-vious works [2, 18, 25, 26] that sparsify the global volume, our ray-based sparsification is performed on local 3D vol-ume. Our ray-based sparsifying strategy allows us to retain more surface voxels to the next level leading to a more com-plete reconstruction.
Furthermore, previous coarse-to-fine methods [2, 18, 25, 26] directly regress the TSDF at each level discarding the relationships between the TSDF predicted at coarse and that at fine level. In our method, at each fine level, we aim to pre-dict a residual between the TSDF volume upsampled from the coarser level and that of the fine level, which is shown to be more accurate in TSDF estimation.
In summary, our contributions are (i) a visibility-aware feature fusion module which explicitly predicts visibility weights used for feature aggregation for voxels; (ii) a ray-based voxel sparsifying algorithm which leads to the recon-struction of more scene structure details. (iii) an easier way of TSDF regression by learning the residual to the upsam-pled coarse TSDF volume for improved TSDF estimation.
Our model outperforms the existing online feature fusion based methods. 2.