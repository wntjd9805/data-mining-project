Abstract
Indoor 360 panoramas have two essential properties. (1)
The panoramas are continuous and seamless in the hori-zontal direction. (2) Gravity plays an important role in in-door environment design. By leveraging these properties, we present PanelNet, a framework that understands indoor envi-ronments using a novel panel representation of 360 images.
We represent an equirectangular projection (ERP) as consec-utive vertical panels with corresponding 3D panel geometry.
To reduce the negative impact of panoramic distortion, we in-corporate a panel geometry embedding network that encodes both the local and global geometric features of a panel. To capture the geometric context in room design, we introduce
Local2Global Transformer, which aggregates local informa-tion within a panel and panel-wise global context. It greatly improves the model performance with low training overhead.
Our method outperforms existing methods on indoor 360 depth estimation and shows competitive results against state-of-the-art approaches on the task of indoor layout estimation and semantic segmentation. 1.

Introduction
Understanding indoor environments is an important topic in computer vision as it is crucial for multiple practical appli-cations such as room reconstruction, robot navigation, and virtual reality applications. Early methods focus on mod-eling indoor scenes using perspective images [9, 10, 19].
With the development of CNNs and omnidirectional pho-tography, many works turn to understand indoor scenes us-ing panorama images. Compared to the perspective images, panorama images have a larger field-of-view (FoV) [43] and provide the geometric context of the indoor environment in a continuous way [24].
There are several 360 input formats used in indoor scene understanding. One of the most commonly-used formats is the equirectangular projection (ERP). Modeling the holistic scene from an ERP is challenging. The ERP distortion in-creases when pixels are close to the zenith or nadir of the image, which may decrease the power of the convolutional
Figure 1. An overview of the proposed system. We present Panel-Net, a network that learns the indoor environment using a novel panel representation of ERP. We formulate the panel representation as consecutive ERP panels with corresponding global and local geometry. By slightly modifying the network structure, PanelNet is capable of tackling major 360 indoor understanding tasks such as depth estimation, semantic segmentation and layout prediction. structures designed for distortion-free perspective images.
To eliminate the negative effects of ERP distortion, recent works [8, 21, 28] focus on decomposing the whole panorama into perspective patches, i.e., tangent images. However, par-titioning a panorama into discontinuous patches breaks the local continuity of gravity-aligned scenes and objects which limits the performance of these works. To reduce the im-pact of distortion while preserving the local continuity, we present PanelNet, a novel network to understand the indoor scene from equirectangular projection.
We design our PanelNet based on two essential properties of equirectangular projection. (1) The ERP is continuous and seamless in the horizontal direction. (2) Gravity plays an important role in indoor environment design, which makes the gravity-aligned features crucial for indoor 360 under-standing [24, 31]. Following these two properties, we tackle the challenges above through a novel panel representation of
ERP. We represent an ERP as consecutive panels with cor-responding global and local 3D geometry, which preserves the gravity-aligned features within a panel and maintains the global continuity of the indoor structure across panels.
Inspired by Omnifusion [21], we design a geometry embed-ding network for panel representations that encodes both local and global features of panels to reduce the negative effects of ERP distortion without adding further explicit dis-tortion fixing modules. We further introduce Local2Global
Transformer as a feature processor. Considering the nature of panel representation, we design this Transformer with
Window Blocks for local information aggregation and Panel
Blocks for panel-wise context capturing. The main contribu-tions of our work are:
• We represent the ERP as consecutive vertical panels with corresponding 3D geometry. We introduce Panel-Net, a novel indoor panorama understanding pipeline using the panel representation. Following the essential geometric properties of the indoor equirectangular pro-jection, our framework outperforms existing methods on the task of indoor 360 depth estimation and shows competitive results on other indoor scene understand-ing tasks such as semantic segmentation and layout prediction.
• We propose a panel geometry embedding network that encodes both local and global geometric features of pan-els and reduces the negative impact of ERP distortion implicitly while preserving the geometric continuity.
• We design Local2Global Transformer as a feature pro-cessor, which greatly enhances the continuity of geo-metric features and improves the model performance by successfully aggregating the local information within a panel and capturing panel-wise context accurately. 2.