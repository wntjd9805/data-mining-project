Image dehazing is a crucial task in computational photography and high-level tasks, aiming to recover clean images from their hazy counterparts. Traditional dehazing methods using statistical priors have suboptimal performance due to their inability to cover diverse real-world scenes. Deep learning-based approaches have shown promising results, but they struggle with generalization to real scenes and the uncertainty of the ill-posed dehazing problem. This is mainly due to the lack of large-scale paired training data and robust priors for real hazy images. In this paper, we propose a new paradigm for real image dehazing. We introduce a novel data generation pipeline that considers multiple degradation factors to obtain large-scale and perfectly aligned paired training data. We also leverage a VQGAN to extract robust high-quality priors. We design a Real Image Dehazing network via high-quality Codebook Priors (RIDCP) that utilizes the fixed codebook and decoder of VQGAN. Additionally, we propose a Normalized Feature Alignment (NFA) technique to enhance fusion. To address the domain gap between synthetic and real domains, we introduce a Controllable HQPs Matching (CHM) operation that allows users to adjust the dehazing results. Our experimental results demonstrate that RIDCP outperforms state-of-the-art methods in processing real hazy images captured in the wild and produces adjustable results. Overall, our work pushes the boundaries of deep learning-based image dehazing in real scenes by leveraging high-quality codebook priors and addressing the challenges of data collection and priors guidance.