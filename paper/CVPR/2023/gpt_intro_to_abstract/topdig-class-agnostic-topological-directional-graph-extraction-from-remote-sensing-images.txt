Vector maps represented as topological directional graphs are widely used in remote sensing applications. Manual or semi-automatic generation of these maps is time-consuming and expensive, leading to the development of automated approaches. However, existing methods are often limited to specific categories and struggle to perform well across different classes. This paper introduces a class-agnostic approach called TopDiG that can generate precise topological directional graphs for both polygon-shape and line-shape targets. It incorporates a dynamic graph supervision strategy that generates adjacency matrix labels on-the-fly during training, eliminating the need for ordered ground truth nodes. Additionally, a topology-concentrated node detector is proposed to ensure the appropriate density of predicted nodes. The TopDiG approach outperforms other segmentation-based, contour-based, and previous graph generation methods in terms of accuracy and reliability. It achieves competitive performance scores on various datasets and can construct reliable topological graphs.