Crowd analysis is an important field in computer vision with various applications in public security, resource scheduling, and crowd monitoring. This field can be divided into crowd counting, crowd localization, and crowd detection tasks. While existing methods mostly focus on crowd counting and localization, crowd detection is essential for downstream tasks such as crowd tracking and face recognition. However, detecting dense crowds accurately is challenging. This paper addresses the limitations of existing crowd analysis methods by proposing a comprehensive framework that incorporates all three tasks. It highlights the shortcomings of object detection in crowd analysis and introduces a module called "Crowd Hat" to leverage the underutilized information from detection outputs. The proposed approach includes a mixed 2D-1D compression for refining output features, a NMS decoder for learning region-adaptive thresholds, and a decouple-then-align paradigm for improving counting performance. The effectiveness of the proposed approach is demonstrated through extensive experiments on crowd counting, localization, and detection tasks. The main contributions of this work are considering detection outputs as valuable features, introducing region-adaptive NMS thresholds, and achieving better performance in various detection methods.