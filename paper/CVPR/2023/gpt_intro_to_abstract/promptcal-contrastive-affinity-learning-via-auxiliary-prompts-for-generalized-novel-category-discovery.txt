In this paper, we address the Generalized Novel Category Discovery (GNCD) problem in the context of image recognition. GNCD assumes that unlabeled data can contain both known and novel classes, which is a more realistic and challenging scenario compared to traditional semi-supervised learning (SSL). We propose a two-stage framework called Prompt-based Contrastive Affinity Learning (PromptCAL) to tackle GNCD. PromptCAL leverages semantic prompt learning and contrastive affinity learning to discover semantic clusters in unlabeled data and enhance semantic discriminativeness. We introduce two synergistic learning objectives, contrastive affinity loss and discriminative prompt regularization loss, based on semi-supervised adapted affinity graphs. Our comprehensive experimental evaluation shows that PromptCAL achieves state-of-the-art performance on various benchmark datasets, outperforming previous methods by a significant margin. Additionally, we demonstrate the generalization ability of PromptCAL and its effectiveness in challenging low-labeling and few-class setups. Our contributions include proposing a novel framework for GNCD, introducing new learning objectives, and showcasing the effectiveness of PromptCAL in different scenarios.