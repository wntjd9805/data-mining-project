Image restoration is a well-studied problem in computer vision, with existing methods capable of restoring degraded images in various domains such as blur, haze, and noise. However, there are few attempts to address the problem of restoring JPEG images with bit errors on the encrypted bitstream. This problem is particularly challenging due to the unpredictable color casts and block shifts introduced by the bit errors. In this paper, we propose a robust JPEG decoder followed by a two-stage compensation and alignment framework to tackle this problem. The robust decoder is able to decode the corrupted bitstream completely, compared to the standard decoder that fails to do so. The two-stage framework, consisting of a self-compensation and alignment stage and a guided-compensation and alignment stage, addresses the color cast and block shift issues in the decoded images. The self-compensation stage adaptsively estimates suitable color and block offsets for each segment, while the guided-compensation stage utilizes the low-resolution thumbnail from the JPEG header to guide full-resolution pixel-wise restoration. Experimental results demonstrate the effectiveness of our proposed method, achieving high-fidelity image restoration with improved PSNR compared to baseline methods. Overall, our contributions include being the first work to restore JPEG images with bit errors on the encrypted bitstream and proposing a comprehensive two-stage compensation and alignment scheme for this problem.