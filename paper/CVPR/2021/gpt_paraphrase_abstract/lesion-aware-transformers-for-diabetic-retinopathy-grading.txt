Diabetic retinopathy (DR) is the primary cause of permanent blindness among working-age individuals. Automated DR diagnosis can aid ophthalmologists in developing personalized treatments for patients, including grading the severity of DR and identifying lesions. However, existing methods often treat DR grading and lesion discovery as separate tasks, requiring lesion annotations as guidance and limiting their practical use. To address this issue, we propose a novel approach called lesion-aware transformer (LAT), which combines DR grading and lesion discovery in a single deep model. LAT consists of an encoder-decoder structure, incorporating a pixel relation based encoder and a lesion filter based decoder. Our proposed LAT offers several advantages. Firstly, it is the first work to approach lesion discovery as a weakly supervised lesion localization problem using a transformer decoder. Secondly, to effectively learn lesion filters using only image-level labels, we introduce two mechanisms: lesion region importance and lesion region diversity, which identify diverse lesion regions. Extensive experiments on three challenging benchmarks (Messidor-1, Messidor-2, and EyePACS) demonstrate that our proposed LAT outperforms state-of-the-art methods for both DR grading and lesion discovery.