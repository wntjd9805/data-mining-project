The field of few-shot object detection has made significant progress by using feature representations learned from a set of base class objects to detect novel class objects. However, there is a contradiction between accurately classifying novel classes and representing them effectively. To achieve accurate classification, the distributions of two base classes must be far apart from each other. But to represent novel classes well, the distributions of base classes should be close together to minimize the distance within novel classes. In this study, we propose a solution called class margin equilibrium (CME) that aims to optimize both the partitioning of the feature space and the reconstruction of novel classes. CME converts the few-shot detection problem into a few-shot classification problem by using a fully connected layer to separate localization features. It then introduces a class margin loss during feature learning to reserve sufficient margin space for novel classes. Finally, CME achieves margin equilibrium by perturbing the features of novel class instances in an adversarial min-max manner. Experimental results on the Pascal VOC and MS-COCO datasets demonstrate that CME significantly outperforms two baseline detectors by an average improvement of 3-5%, achieving state-of-the-art performance. The code for CME is available at https://github.com/Bohao-Lee/CME.