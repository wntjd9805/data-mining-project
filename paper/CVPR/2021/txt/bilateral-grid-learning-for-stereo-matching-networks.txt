Abstract
Real-time performance of stereo matching networks is important for many applications, such as automatic driv-ing, robot navigation and augmented reality (AR). Although signiﬁcant progress has been made in stereo matching net-works in recent years, it is still challenging to balance real-time performance and accuracy. In this paper, we present a novel edge-preserving cost volume upsampling module based on the slicing operation in the learned bilateral grid.
The slicing layer is parameter-free, which allows us to ob-tain a high quality cost volume of high resolution from a low-resolution cost volume under the guide of the learned guidance map efﬁciently. The proposed cost volume upsam-pling module can be seamlessly embedded into many ex-isting stereo matching networks, such as GCNet, PSMNet, and GANet. The resulting networks are accelerated sev-eral times while maintaining comparable accuracy. Fur-thermore, we design a real-time network (named BGNet) based on this module, which outperforms existing published real-time deep stereo matching networks, as well as some complex networks on the KITTI stereo datasets. The code is available at https://github.com/YuhuaXu/BGNet. 1.

Introduction
Stereo matching is a key step in 3D reconstruction, which has numerous applications in the ﬁelds of 3D mod-eling, robotics, UAVs, augmented realities (AR), and au-tonomous driving [27, 10, 1]. Given a pair of stereo images, the purpose of stereo matching is to establish dense corre-spondences between the pixels in the left and right images.
Although this problem has been studied for more than 40 years, it has not been completely solved due to some dif-ﬁcult factors, such as sensor noise, foreground-background occlusion, weak or repeated textures, reﬂective regions, and transparent objects.
In recent years, deep learning has shown great potential in this ﬁeld [43, 14, 18, 16, 5, 37]. Some recent work indi-∗Corresponding author cates that 3D convolutions can improve the accuracy of the disparity estimation networks [14, 5, 9]. However, the 3D convolutions are time consuming, which limits their appli-cation in real-time systems.
Bilateral ﬁlter [32] is an edge-preserving ﬁlter, which has wide applications in image de-noising, disparity estima-tion [41], and depth upsampling [40]. However, the orig-inal implementation of bilateral ﬁlter is time-consuming.
Bilateral grid proposed by Chen et al. [7] is a technique
It treats the ﬁlter as a for speeding up bilateral ﬁltering.
“splat/blur/slice” procedure. That is, pixel values are “splat-ted” onto a small set of vertices in a grid, those vertex values are then blurred, and ﬁnally the ﬁltered pixel values are pro-duced via a “slice” (an interpolation) of the blurred vertex values. Recently, Gharbi et al. [11] utilize the idea of the bilateral grid to estimate the local afﬁne color transforms in their real-time image enhancement network.
For StereoNet [16], the 2D disparity map regressed from an aggregated 4D cost volume at a low resolution (e.g., 1/8) is upsampled via bilinear interpolation and reﬁned hierar-chically. Although the speed of the lightweight network is fast, the accuracy is relatively low compared with existing complex networks, as shown in Table 4. On the ranking list of KITTI 2012 [10] and KITTI 2015 [23], the top perform-ing methods usually conduct 3D convolutions at a relatively high resolution, such as 1/3 resolution for GANet [44] and 1/4 resolution for PSMNet [44]. However, their efﬁciency is reduced. For example, it takes 1.8s for GANet to process a pair of images of 1242 × 375, and 0.41s for PSMNet.
The motivation of this paper is to propose a solution that can regress the disparity map at a high resolution to keep the high accuracy, while maintaining high efﬁciency. The main contributions of this work are as follows: (1) We design a novel edge-preserving cost volume up-sampling module based on the learned bilateral grid. It can efﬁciently obtain a high-resolution cost volume for dispar-ity estimation from a low-resolution cost volume via a slic-ing operation. With this module, cost volume aggregations (e.g., 3D convolutions) can be performed at a low resolu-tion. The proposed cost volume upsampling module can be seamlessly embedded into many existing networks such 12497
as GCNet, PSMNet, and GANet. The resulting networks can be accelerated 4∼29 times while maintaining compa-rable accuracy. To the best of our knowledge, it is the ﬁrst time that the differential bilateral grid operation is applied in deep stereo matching networks. (2) Based on the advantages of the proposed cost volume upsampling module, we design a real-time stereo match-ing network, named BGNet, which can process stereo pairs on the KITTI 2012 and KITTI 2015 datasets at 39fps.
Experimental results show that BGNet outperforms exist-ing published real-time deep stereo matching networks, as well as some complex networks, such as GCNet, AANet,
DeepPruner-Fast, and FADNet, on the KITTI 2012 and
KITTI 2015 stereo datasets. 2.