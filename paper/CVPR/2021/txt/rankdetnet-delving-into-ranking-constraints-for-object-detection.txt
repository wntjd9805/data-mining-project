Abstract
Modern object detection approaches cast detecting ob-jects as optimizing two subtasks of classiﬁcation and lo-calization simultaneously. Existing methods often learn the classiﬁcation task by optimizing each proposal sepa-rately and neglect the relationship among different propos-als. Such detection paradigm also encounters the mismatch between classiﬁcation and localization due to the inherent discrepancy of their optimization targets. In this work, we propose a ranking-based optimization algorithm for harmo-niously learning to rank and localize proposals in lieu of the classiﬁcation task. To this end, we comprehensively inves-tigate three types of ranking constraints, i.e., global rank-ing, class-speciﬁc ranking and IoU-guided ranking losses.
The global ranking loss encourages foreground samples to rank higher than background. The class-speciﬁc ranking loss ensures that positive samples rank higher than negative ones for each speciﬁc class. The IoU-guided ranking loss aims to align each pair of conﬁdence scores with the asso-ciated pair of IoU overlap between two positive samples of a speciﬁc class. Our ranking constraints can sufﬁciently ex-plore the relationships between samples from three different perspectives. They are easy-to-implement, compatible with mainstream detection frameworks and computation-free for inference. Experiments demonstrate that our RankDetNet consistently surpasses prior anchor-based and anchor-free baselines, e.g., improving RetinaNet baseline by 2.5% AP on the COCO test-dev set without bells and whistles. We also apply the proposed ranking constraints for 3D object detection and achieve improved performance, which further validates the superiority and generality of our method. 1.

Introduction
Object detection is a fundamental task in computer vi-sion with extensive subsequent research ﬁelds (e.g., in-stance segmentation [32] and pose estimation [40]) and wide practical applications including intelligent surveil-lance, autonomous driving, etc. Owing to the great ad-vancement of convolutional neural networks (CNNs), deep (a) Classiﬁcation (b) Global ranking (c) Class-speciﬁc ranking (d) IoU-guided ranking
Figure 1. Illustration of the conventional classiﬁcation loss and the proposed three types of pair-wise ranking losses. Gray color means background and other colors mean different object classes.
Circles and Triangles indicate the object conﬁdence and IoU over-lap, respectively. Darker colors mean higher values. learning based object detectors have achieved outstand-ing performance compared to the conventional hand-crafted features and classiﬁers. Typical methods include two-stage and one-stage anchor-based detectors. The two-stage meth-ods [13, 36, 9, 16] ﬁrst generate a set of limited candidate region proposals to distinguish foreground and background, and then classify and regress them for ﬁnal detection. Two-stage methods have shown superior performance for object detection but often require large computation overhead and thus limit the applications on the resource-constrained de-vices. One-stage detectors [30, 34, 29] aim to identify ob-jects from dense pre-deﬁned anchors without the extra pro-posal generation step. Despite the efﬁciency, these one-stage detectors often suffer from the issue of foreground-background class imbalance. Recent anchor-free methods 264
[48, 24, 39, 23] attempt to detect objects by predicting points instead of enumerating possible locations, scales and aspect ratios with pre-deﬁned anchor boxes. Most of them also follow the de facto paradigm by formulating object de-tection as multi-task learning of classiﬁcation and localiza-tion [39, 23].
The popular focal loss [29] has been exploited to tackle the class imbalance issue by re-weighting the foreground and background samples. Although focal loss has shown improved performance for one-stage anchor-based and anchor-free detectors, it remains two limitations as follows. (1) Focal loss is designed for a single candidate sample and neglects the relationship among different samples. Treat-ing each sample independently for optimization may lead to hard positives (i.e., positive samples with low object conﬁ-dence) and hard negatives (i.e., negative samples with high object conﬁdence), which hinders the ﬁnal detection per-formance. (2) There exists the mismatch problem between classiﬁcation and localization as the two tasks are optimized differently, which leads to accurately localized object pro-posals being suppressed by less accurate ones in the post-processing procedure. In fact, classiﬁcation aims at distin-guishing the foreground proposals from background regard-less of the location information, while bounding box regres-sion aims at localizing objects by maximizing intersection-over-union (IoU) metrics between foreground proposals and ground-truth bounding boxes. The probability learned by classiﬁcation serves as classiﬁcation conﬁdence but local-ization requires localization conﬁdence to learn optimal ob-ject location. Existing methods [22, 38] often adopt ex-tra dedicated network structures to better learn localization conﬁdence. However, they require careful designs of subnet structure or score fusion strategy and introduce additional computation cost during inference.
To alleviate these problems, we propose a ranking-based optimization algorithm to explicitly model the relationships between different pairs of proposals. In fact, classiﬁcation can be viewed as a point-wise ranking problem where all the foreground samples are encouraged to rank higher than background, as shown in Figure 1 (a). However, we ob-serve that it is difﬁcult to optimize hard proposals by such point-wise ranking constraint. Therefore, we propose to re-place the point-wise ranking task (i.e., classiﬁcation) with optimizing two pair-wise ranking losses, i.e., global rank-ing loss and class-speciﬁc ranking loss. The global rank-ing loss encourages foreground samples to rank higher than background. The efﬁcacy of our global ranking loss is simi-lar with binary cross-entropy loss for classifying foreground and background samples but we realize it in a pair-wise manner (Figure 1 (b)). The global ranking loss treats posi-tive samples from all the classes as foreground and does not incorporate the class information. We further propose the class-speciﬁc ranking loss to encourage that positive pro-posals of a speciﬁc class rank higher than negative ones (Figure 1 (c)). These negative proposals include those from other object classes as well as background. To emphasize hard foreground-background and positive-negative pairs, we design a dynamic re-weighting factor for both global and class-speciﬁc ranking losses. Moreover, to mitigate the mismatch problem between classiﬁcation and localization, we propose an IoU-guided ranking loss to align each pair of object conﬁdence scores with the corresponding pair of IoU overlap between two positive proposals of a certain class (Figure 1 (d)). It helps reduce the gap between these two subtasks and learn more localization-sensitive conﬁdence for accurate object detection.
We evaluate our ranking-based object detection algo-rithm and compare with the state-of-the-art methods on the standard COCO benchmark. Our RankDetNet consistently improves the existing anchor-based and anchor-free object detectors. Especially, our RankDetNet improves RetinaNet (ResNet-50) [29] and FCOS-ATSS (ResNet-50-DCN) [46] by 2.5% and 2.4% AP on the COCO test-dev set, respec-tively. Without bells and whistles, our single best model ob-tains 48.5% AP on the COCO test-dev set under the single-scale inference setting. We also apply the proposed ranking constraints for 3D object detection and achieve performance gains of 2.02% AP over the SA-SSD baseline [15]. The re-sults further validate the superiority and generality of our method.
The main contributions of this paper are summarized as follows. (1) We propose a ranking-based object detection algorithm by replacing the conventional classiﬁcation loss with three types of pair-wise ranking losses. The proposed ranking constraints can be seamlessly integrated into exist-ing mainstream detection framework without changing the network structure or requiring dedicated post-processing procedures. These constraints are only used for training and thus do not introduce extra computation cost for inference. (2) We view classiﬁcation as a point-wise ranking problem.
The global and class-speciﬁc ranking losses can serve as an effective alternative of classiﬁcation in a pair-wise man-ner. Both constraints can reduce the number of reverse pairs during optimization. (3) We propose an IoU-guided ranking loss to address the mismatch problem between classiﬁcation and localization. It helps modulate these two subtasks by aligning the object conﬁdence score and its associated IoU overlap in a pair-wise manner, resulting in more accurate bounding box predictions. (4) Our RankDetNet achieves consistent performance improvements over 2D and 3D ob-ject detection baselines, which validates the superiority and generality of our method. 2.