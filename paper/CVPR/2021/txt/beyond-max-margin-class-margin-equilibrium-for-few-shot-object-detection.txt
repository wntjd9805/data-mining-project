Abstract
Few-shot object detection has made substantial progress by representing novel class objects using the feature repre-sentation learned upon a set of base class objects. However, an implicit contradiction between novel class classiﬁcation and representation is unfortunately ignored. On the one hand, to achieve accurate novel class classiﬁcation, the dis-tributions of either two base classes must be far away from each other (max-margin). On the other hand, to precisely represent novel classes, the distributions of base classes should be close to each other to reduce the intra-class dis-tance of novel classes (min-margin). In this paper, we pro-pose a class margin equilibrium (CME) approach, with the aim to optimize both feature space partition and novel class reconstruction in a systematic way. CME ﬁrst converts the few-shot detection problem to the few-shot classiﬁcation problem by using a fully connected layer to decouple local-ization features. CME then reserves adequate margin space for novel classes by introducing simple-yet-effective class margin loss during feature learning. Finally, CME pur-sues margin equilibrium by disturbing the features of novel class instances in an adversarial min-max fashion. Exper-iments on Pascal VOC and MS-COCO datasets show that
CME signiﬁcantly improves upon two baseline detectors (up to 3 ∼ 5% in average), achieving state-of-the-art per-formance. Code is available at https://github.com/Bohao-Lee/CME. 1.

Introduction
In the past few years, we witnessed the great progress of visual object detection [16, 17, 3, 18]. This is attributed to the availability of large-scale datasets with precise anno-*Equal Contribution.
†Corresponding Author.
Figure 1. The contradiction of representation and classiﬁcation in few-shot object detection. (a) To separate the classes with each other, either two base classes requires to be far away from each other (max-margin), which aggregates the intra-class distance of novel classes. (b) To precisely represent novel classes, the distri-butions of base classes should be close to those of novel classes (min-margin), which improves the difﬁculty of classiﬁcation. tations and convolutional neural networks (CNNs) capable of absorbing the annotation information. However, anno-tating a large amount of objects is expensive and labori-ous [22, 23, 33, 34]. It is also not consistent with cognitive learning, which can build a precise model using few-shot supervisions [20].
Few-shot detection, which simulates the way that human learns, has attracted increasing attention. Given base classes of sufﬁcient training data and novel classes of few supervi-sions, few-shot detection trains a model to simultaneously detect objects from both base and novel classes. To this end, a majority of works divided the training procedure to two stages: base class training (representation learning) and novel class reconstruction (meta training).
In representa-tion learning, the sufﬁcient training data of base classes are used to train a network and constructs a representative fea-In meta training, the network is ﬁnetuned so ture space. that the novel class objects can be represented within the feature space. Among the earliest work, Kang et al. [7] pro-17363
posed applying channel-attended feature re-weighting for semantic enforcement. In the two-stage framework, Wang et al. [27] and Yan et al. [30] contributed early few-shot detection methods. Wang et al. [24] and Wu et al. [28] proposed freezing the backbone network and reconstructing the novel classes using the classiﬁer weights during detector
ﬁnetuning.
Despite the substantial progress, the implicit contradic-tion between representation and classiﬁcation is unfortu-nately ignored. To separate the classes, the distributions of two base classes requires to be far away from each other (max-margin), which however aggregates the diver-sity of novel classes, Fig. 1(a). To precisely represent novel classes, the distributions of base classes should be close to each other (min-margin), which causes the difﬁcult of clas-siﬁcation, Fig. 1(b). How to simultaneously optimize novel class representation and classiﬁcation in the same feature space remains to be elaborated.
In this paper, we propose a class margin equilibrium (CME) approach, with the aim to optimize feature space partition for few-shot object detection with adversarial class margin regularization. For the object detection task, CME
ﬁrst introduces a fully connected layer to decouple local-ization features which could mislead class margins in the feature space. CME then pursues a margin equilibrium to comprise representation learning and feature reconstruc-tion. Speciﬁcally, during base training, CME constructs a feature space where the margins between novel classes are maximized by introducing class margin loss. During network ﬁnetuning, CME introduces a feature disturbance module by truncating gradient maps. With multiple train-ing iterations, class margins are regularized in an adversar-ial min-max fashion towards margin equilibrium, which fa-cilities both feature reconstruction and object classiﬁcation in the same feature space.
The contributions of this study include:
• We unveil the representation-classiﬁcation constriction hidden in few-shot object detection, and propose a fea-sible way to alleviate the constriction from the perspec-tive of class margin equilibrium (CME).
• We design the max-margin loss and feature distur-bance module to implement class margin equilibrium in an adversarial min-max fashion.
• We convert the few-shot detection problem to a few-shot classiﬁcation problem by ﬁltering out localization features, We improve the state-of-the-art with signiﬁ-cant margins upon both one-stage and two-stage base-line detectors. 2.