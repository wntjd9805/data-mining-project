Abstract
Aerial Image Segmentation is a particular semantic seg-mentation problem and has several challenging character-istics that general semantic segmentation does not have.
There are two critical issues: The one is an extremely foreground-background imbalanced distribution, and the other is multiple small objects along with the complex back-ground. Such problems make the recent dense afﬁnity con-text modeling perform poorly even compared with base-lines due to over-introduced background context. To handle these problems, we propose a point-wise afﬁnity propaga-tion module based on the Feature Pyramid Network (FPN) framework, named PointFlow. Rather than dense afﬁn-ity learning, a sparse afﬁnity map is generated upon se-lected points between the adjacent features, which reduces the noise introduced by the background while keeping ef-ﬁciency.
In particular, we design a dual point matcher to select points from the salient area and object bound-aries, respectively. Experimental results on three differ-ent aerial segmentation datasets suggest that the proposed method is more effective and efﬁcient than state-of-the-art general semantic segmentation methods. Especially, our methods achieve the best speed and accuracy trade-off on three aerial benchmarks. Further experiments on three general semantic segmentation datasets prove the general-ity of our method. Code and models are made available (https://github.com/lxtGH/PFSegNets). 1.

Introduction
High spatial resolution (HSR) remote sensing images contain various geospatial objects, including airplanes, ships, vehicles, buildings, etc. Understanding these ob-jects from HSR remote sensing imagery has great practical
∗The ﬁrst two authors contribute equally. Email: lxtpku@pku.edu.cn.
Corresponding to: Yunhai Tong, Guangliang Cheng
Aerial Image
Ground Truth Mask
.
.
.
.
.  .  .  .
.  .  .  . .  .  .  .
.  .  .
Semantics 
Propagation (a) FPN-like structure (b) Dense affinity propagation (c) Our Point-based propagation
Figure 1: Illustration of an aerial image segmentation example and our proposed module. The ﬁrst row presents the input image and ground truth with complex backgrounds and small objects.
The second row indicates the schematic diagram on dense afﬁnity propagation and our proposed point-based propagation module. value for urban monitoring and management. Aerial Image segmentation is an important task in remote sensing under-standing that can provide semantic and localization infor-mation cues for interest targets.
It is a speciﬁc semantic segmentation task that aims to assign a semantic category to each image pixel.
However, besides the large scale variation problems in most semantic segmentation datasets [12, 69, 39, 6], aerial images have their own challenging problems including high background complexity [68], background and foreground imbalance [49], tiny foreground objects in high resolution images. As shown in the ﬁrst row of Fig.1, the red boxes show the tiny objects in the scene while the yellow box and blue box show the complex background context, includ-ing houses and trees, receptively. Current general semantic 4217
segmentation methods mainly focus on scale variation in the natural scene by building multi-scale feature representa-tion [67, 8] or enhancing the object boundaries with speciﬁc designed module [23, 44]. They fail to work well due to the lack of explicit modeling for the foreground objects. For example, several dense afﬁnity-based methods [16, 58] also obtain inferior results mainly because the imbalanced and complex background will fool the afﬁnity learning on small objects. For example, both yellow boxes and blue boxes have the same semantic meaning of background but with a huge appearance change. Dense afﬁnity learning forces pixels on small objects to absorb such noisy context which leads to inferior segmentation results. FarSeg [68] adopts
FPN-like [34] design and solves the background and fore-ground imbalance problems by introducing a foreground-aware relation module. However, for small objects, there still exist some semantic gaps in different features in FPN.
Namely, the gap is between the high-resolution features with low semantic information and low-resolution features with high semantic information. As shown in Fig.1, tiny objects like cars need more semantic information in lower layers with high resolution.
In this paper, we propose a point-based information propagation module to handle the previous problems stated above. We propose PointFlow Module (PFM), a novel and efﬁcient module for speciﬁc semantic points propagation between adjacent features. Our module is based on the
FPN framework [34, 22] to bridge the semantic gap. As shown in the last row of Fig.1, rather than simple fusion or dense afﬁnity propagation on each point as the previous work non-local module [47], PointFlow selects the several representative points between any adjacent feature pyramid levels. In particular, we design Dual Point Matcher by se-lecting matched point features from the salient area and ob-ject boundaries, receptively. The former is obtained from explicit max pooling operation on the learned salient map.
The latter is conditioned on the predicted object boundaries where we adopt a subtraction-based prediction. Then the point-wise afﬁnity is estimated according to the point fea-tures that are sampled from both adjacent features. Finally, the higher layer points are fused into lower layers according to the afﬁnity map. Our PFMs select and propagate points on foreground objects and sampled background areas to si-multaneously handle both the semantic gap and foreground-background imbalance problem.
Then we carry out detailed studies and analysis on
PFM in the experiment part, where it improves the vari-ous methods by a large margin with negligible GFlops in-crease. Based on the FPN framework, by inserting PFMs between feature pyramids, we propose the PFNet. In par-ticular, PFNet surpasses the previous method FarSeg [68] by 3.2% point on iSAID [49]. Moreover, we also bench-mark the recent state-of-the-art general semantic segmen-tation methods [46, 58, 31] on three aerial segmentation datasets including iSAID, Vaihingen and Postdam for the community. Beneﬁted from efﬁcient FPN design [22], our
PFNet also achieves the best speed and accuracy on three benchmarks. Finally, we further verify the effectiveness of PFM on general semantic segmentation benchmarks, in-cluding Cityscapes [12], ADE-20k [69], and BDD [55] and it achieves considerable results with previous work [8, 58] with fewer GFLops. Our main contributions are three-fold: 1) We propose PointFlow Module (PFM), a novel and ef-ﬁcient module for poise-wised afﬁnity learning, and we design a Dual Point Matcher to select the matched sparse points from salient areas and boundaries in a complemen-tary manner. 2) We append PFM into the FPN architecture and build a pyramid propagation network called PFNet. 3)
Extensive experiments and analysis indicate the efﬁcacy of
PFM. We benchmark 15 state-of-the-art general segmen-tation methods on three aerial benchmarks. Our PFNet achieves state-of-the-art results on those benchmarks also with the best speed and accuracy trade-off. We further prove the generality of our method on three general semantic seg-mentation datasets. 2.