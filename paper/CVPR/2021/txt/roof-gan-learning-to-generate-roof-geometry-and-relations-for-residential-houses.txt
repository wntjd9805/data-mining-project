Abstract
This paper presents Roof-GAN, a novel generative ad-versarial network that generates structured geometry of res-idential roof structures as a set of roof primitives and their relationships. Given the number of primitives, the genera-tor produces a structured roof model as a graph, which con-sists of 1) primitive geometry as raster images at each node, encoding facet segmentation and angles; 2) inter-primitive colinear/coplanar relationships at each edge; and 3) prim-itive geometry in a vector format at each node, generated by a novel differentiable vectorizer while enforcing the re-lationships. The discriminator is trained to assess the prim-itive raster geometry, the primitive relationships, and the primitive vector geometry in a fully end-to-end architec-ture. Qualitative and quantitative evaluations demonstrate the effectiveness of our approach in generating diverse and realistic roof models over the competing methods with a novel metric proposed in this paper for the task of struc-tured geometry generation. Code and data are available at https://github.com/yi-ming-qian/roofgan. 1.

Introduction
Residential roof structure exhibits intricate structural de-tails and regularities. An observation reveals that a complex polygonal surface structure emerges from a careful combi-nation of a few primitive shapes under incident geometric relationships such as colinearity or coplanarity. Automated generation of high quality residential house models and any man-made structures beyond would have tremendous im-pact on broader disciplines such as construction, manufac-turing, urban planning, and visual effects.
With the emergence of deep learning, automated gen-eration of CAD-style 3D models has seen a breakthrough.
Early methods focus on generating geometry without their incident relationships as a part assembly [17, 26, 35]. Auto-encoder based methods learn to generate both geometry and relationships in a form of a binary tree [18], a hierarchical
N-ary tree [23], or deformable mesh models [10]. These techniques use fully connected layers with 1D feature vec-tors to produce CAD geometries in a vector format.
The paper takes the CAD-geometry generation research to the next level, while making the following distinctions from the existing methods: 1) Adversarial training is the foundation of our architecture, providing real generative power over auto-encoder based methods; 2) Convolution with raster-geometry representation enables effective spa-tial part arrangements and incident relationship generation; and 3) A novel differentiable vectorization module gener-ates vector-geometry in an end-to-end architecture.
Concretely, we propose a novel generative adversarial 2796
network, dubbed Roof-GAN. Given the number of primi-tives, the generator produces a structured geometry model as a graph. A node contains primitive geometry information as a 4-channel image (i.e., roof facet segmentation and roof angles). An edge contains incident primitive relationships as one-hot vectors (i.e., colinearity of footprint boundaries and parallelism of facets, where colinear and parallel im-plies coplanar). A node also contains geometry information in a vector format from a differentiable vectorizer, which is further capable of enforcing incident relationships. Roof-GAN employs two discriminators, one for assessing holistic geometry composition and the other for examining relation-ship labels together with geometry.
We have evaluated the proposed approach against the current state-of-the-art, while creating a new database of
CAD-style roof geometry with incident relationships, con-sisting of 502 residential houses. Qualitative and quanti-tative evaluations demonstrate the effectiveness of Roof-GAN against competing methods in generating diverse and realistic set of roof models with a novel metric proposed in this paper for the task of structured geometry generation.
Code and data are available at https://github.com/ yi-ming-qian/roofgan. 2.