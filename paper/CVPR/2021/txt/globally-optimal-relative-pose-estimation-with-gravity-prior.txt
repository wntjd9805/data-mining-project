Abstract
Smartphones, tablets and camera systems used, e.g., in cars and UAVs, are typically equipped with IMUs (inertial measurement units) that can measure the gravity vector ac-curately. Using this additional information, the y-axes of the cameras can be aligned, reducing their relative orien-tation to a single degree-of-freedom. With this assumption, we propose a novel globally optimal solver, minimizing the algebraic error in the least squares sense, to estimate the relative pose in the over-determined case. Based on the epipolar constraint, we convert the optimization problem into solving two polynomials with only two unknowns. Also, a fast solver is proposed using the ﬁrst-order approximation of the rotation. The proposed solvers are compared with the state-of-the-art ones on four real-world datasets with ap-prox. 50000 image pairs in total. Moreover, we collected a dataset, by a smartphone, consisting of 10933 image pairs, gravity directions and ground truth 3D reconstructions.
The source code and dataset are available at https:
//github.com/yaqding/opt_pose_gravity 1.

Introduction
Finding the relative pose between two cameras is one of the fundamental geometric vision problems with many ap-plications, for example, in structure-from-motion [42, 40, 39, 2, 52, 44], visual localization [53, 48], and SLAM [34].
The robust relative pose estimation is usually done in a hy-pothesize and test framework, such as RANSAC [12].
Locally optimized (LO) RANSAC [7, 31] and its vari-ants, such as Graph-Cut RANSAC [3], USAC [41], have shown a signiﬁcant improvement in terms of accuracy and convergence compared to the standard RANSAC [12]. The key idea of these RANSAC variants is to apply a local op-timization step to reﬁne each so-far-the-best model using non-minimal samples. The main beneﬁt of using a non-minimal sample is that it allows for averaging out obser-vational noise in the measurements. Besides improving the
X1
X2
X...
Xn
C2 g2
C1 g1
Figure 1: Two cameras C1 and C2 with known gravity di-rections g1, g2 observing n ≥ 4 points X1, ..., Xn. The objective is to ﬁnd the relative pose of the cameras. accuracy, this often speeds up the robust estimation via ﬁnd-ing an accurate model early and, thus, triggering the ter-mination criterion. Both minimal and non-minimal solvers play important roles in the LO-RANSAC framework.
Minimal solutions to the relative pose estimation with different camera conﬁgurations have been well-studied in the literature. For instance, given two calibrated cam-eras, the relative pose can be efﬁciently recovered from ﬁve point correspondences [38, 28, 21]. Recently, point plus direction-based methods have shown beneﬁts. The basic idea of such methods is to align one axis (e.g., y-axis) of the cameras with the common reference direction, e.g., the gravity vector. The relative orientation reduces to 1-DoF, and the relative pose can be estimated from only three point correspondences [13, 37, 49, 43, 10, 9].
While the problem of estimating the absolute camera pose from a non-minimal set of correspondences (the PnP problem) has received a lot of attention and many efﬁcient and globally optimal solutions were published [24, 56, 25, 35, 36, 51, 57, 50], this does not hold for the relative pose estimation problem, also known as the N-point problem.
The main reason is the fact that the N-point problem results in a more complicated optimization than the PnP problem. 394
The most commonly used non-minimal relative pose solver is the well-known direct linear transformation (DLT) method [22]. This method can be used to estimate the es-sential or the fundamental matrix from 8 (the well-known 8-point algorithm [17]) or more point correspondence. The
DLT method assumes that the matrix elements are linearly independent. Therefore, this method does not minimize a properly deﬁned error in the 5D space of essential matrices for calibrated cameras, and a correct essential matrix has to be recovered from the approximate DLT solution [22].
Therefore, several approaches that directly minimize an energy function deﬁned in the 5D space of relative poses have been published recently. However, these approaches either do not guarantee a global optimum [18, 23, 32] or are too slow for practical applications [19, 6, 20].
Kneip et al. [26] presented an eigenvalue-based formu-lation that is minimizing an algebraic error for the relative pose problem, which is after eliminating the relative trans-lation, parameterized in the 3-dimensional space of rela-tive rotations. However, the proposed iterative Levenberg-Marquardt solution does not guarantee optimality and it re-quires a reasonably good initialization. The certiﬁably glob-ally optimal solution to the eigenvalue-based formulation of relative pose estimation problem was proposed in [5].
This solution minimizes the algebraic error in the space of rotations and translations and formulates the problem as a quadratic program (QCQP) that is solved using a Semidef-inite Program (SDP) relaxation. This method does not pro-vide good pose estimates for forward motion. The solution was later extended to globally optimal essential matrix esti-mation for generalized cameras [55]. The globally optimal solution for the N-point problem [5] was recently improved in [54]. The proposed formulation results in QCQP, how-ever, in fewer variables and constraints than the formulation in [5]. The solver is 2-3 orders of magnitude faster than [5].
In this paper, to estimate the relative pose globally opti-mally in real-time, we assume that the views share a com-mon reference direction. This case is relevant since smart-phones, tablets and camera systems used, e.g., in cars and
UAVs, are typically equipped with IMUs (inertial measure-ment units) that can measure the gravity vector accurately.
With this assumption, the relative rotation is reduced to 1-DoF and the N-point relative pose problem is signiﬁcantly simpliﬁed. The main contributions of this paper are:
• We propose a novel real-time globally optimal solver that minimizes the algebraic error in the least squares sense and estimates the relative pose of calibrated cam-eras with known gravity direction from N-point corre-spondences (N ≥ 4). Based on the epipolar constraint, we convert the optimization problem into solving two polynomials with only two unknowns and we propose two different efﬁcient solutions to such a system.
• In addition, we consider that for mobile robots, au-tonomous driving cars and UAVs, the relative rotation is small and, thus, we propose a solver estimating the linearized rotation efﬁciently.
• In extensive real and synthetic experiments we show an improvement in terms of accuracy and speed over the state-of-the-art non-minimal N-point relative pose solvers. Moreover, we present a novel dataset with 10993 image pairs taken by a smartphone with known gravity direction and ground truth 3D reconstructions. 2.