Abstract
Domain generalization aims to learn a generalizable model from a ‘known’ source domain for various ‘unknown’ target domains. It has been studied widely by domain ran-domization that transfers source images to different styles in spatial space for learning domain-agnostic features. How-ever, most existing randomization methods use GANs that often lack of controls and even alter semantic structures of images undesirably. Inspired by the idea of JPEG that converts spatial images into multiple frequency components (FCs), we propose Frequency Space Domain Randomiza-tion (FSDR) that randomizes images in frequency space by keeping domain-invariant FCs (DIFs) and randomizing domain-variant FCs (DVFs) only. FSDR has two unique features: 1) it decomposes images into DIFs and DVFs which allows explicit access and manipulation of them and more controllable randomization; 2) it has minimal effects on semantic structures of images and domain-invariant fea-tures. We examined domain variance and invariance prop-erty of FCs statistically and designed a network that can identify and fuse DIFs and DVFs dynamically through iter-ative learning. Extensive experiments over multiple domain generalizable segmentation tasks show that FSDR achieves superior segmentation and its performance is even on par with domain adaptation methods that access target data in training. 1.

Introduction
Semantic segmentation has been a longstanding chal-lenge in computer vision research, which aims to assign a class label to each and every pixel of an image. Deep learn-ing based methods [4, 38, 79, 84] have achieved great suc-cesses at the price of large-scale densely-annotated training data [8] that are usually prohibitively expensive and time-consuming to collect. One way of circumventing this con-straint is to employ synthetic images with automatically generated labels [52, 51] in network training. However,
∗Corresponding author.
Figure 1. Our proposed frequency space domain randomiza-tion (FSDR) converts images into multiple frequency components (FCs) with discrete cosine transform (DCT) and identiﬁes domain variant FCs (DVFs) and domain invariant FCs (DIFs). Such ex-plicit isolation allows it to randomize DVFs while keeping DIFs unchanged in training which often leads to more generalizable models. Traditional spatial space domain randomization (SSDR) tends to produce sub-optimal segmentation as it randomizes im-ages as a whole without isolating and preserving domain invariant features. Green, blue and red boxes denotes DIFs, DVFs and ran-domized DVFs, respectively (best viewed in color). such models usually undergo a drastic performance drop while applied to real-world images [78] due to the domain bias and shift [55, 41, 67, 71, 56].
Unsupervised domain adaptation (UDA) has been stud-ied widely to tackle the domain mismatch problem by learn-ing domain invariant/aligned features from a labelled source domain and an unlabelled target domain [22, 29, 30, 58, 66, 69, 40, 72, 5, 6]. However, its training requires target-domain data which could be hard to collect during the train-ing stage such as autonomous driving at various cities, robot exploration of various new environments, etc. Addition-ally, it is not scalable as it requires network re-training or
ﬁne-tuning for each new target domain. Domain general-ization has attracted increasing attention as it learns domain 6891
invariant features without requiring target-domain data in training [77, 44, 11, 36, 33, 34]. One widely adopted generalization strategy is domain randomization (DR) that learns domain-agnostic features by randomizing or stylizing source-domain images via adversarial perturbation, gener-ative adversarial networks (GANs), etc. [59, 70, 77, 50].
However, most existing DR methods randomize the whole spectrum of images in the spatial space which tends to mod-ify domain invariant features undesirably.
We propose an innovative frequency space domain randomization (FSDR) technique that transforms images into frequency space and performs domain generalization by identifying and randomizing domain-variant frequency components (DVFs) while keeping domain-invariant fre-quency components (DIFs) unchanged. FSDR thus over-comes the constraints of most existing domain randomiza-tion methods which work over the full spectrum of images in the spatial space and tend to modify domain-invariant features undesirably as illustrated in Fig. 1. We explored two different approaches for domain randomization in the frequency space. The ﬁrst is spectrum analysis based FSDR (FSDR-SA) that identiﬁes DIFs and DVFs through empir-ical studies. The second is spectrum learning based FSDR (FSDR-SL) that identiﬁes DIFs and DVFs through dynamic and iterative learning processes. Extensive experiments show that FSDR improves the model generalization greatly.
Additionally, FSDR is complementary to spatial-space do-main generalization and the combination of the two im-proves model generalization consistently.
The contributions of this work can be summarized in three aspects. First, we propose an innovative frequency space domain randomization technique that transforms im-ages into frequency space and achieves domain random-ization by changing DVFs only while keeping DIFs un-changed. Second, we design two randomization approaches in the frequency space that identify DVFs and DIFs effec-tively through empirical experiments and dynamic learning, respectively. Third, extensive experiments over multiple do-main generalization tasks show that our proposed frequency space domain randomization technique achieves superior semantic segmentation consistently. 2.