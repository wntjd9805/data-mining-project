Abstract
Different from general photo retouching tasks, portrait photo retouching (PPR), which aims to enhance the visual quality of a collection of ﬂat-looking portrait photos, has its special and practical requirements such as human-region priority (HRP) and group-level consistency (GLC). HRP requires that more attention should be paid to human re-gions, while GLC requires that a group of portrait photos should be retouched to a consistent tone. Models trained on existing general photo retouching datasets, however, can hardly meet these requirements of PPR. To facilitate the re-search on this high-frequency task, we construct a large-scale PPR dataset, namely PPR10K, which is the ﬁrst of its kind to our best knowledge. PPR10K contains 1, 681 groups and 11, 161 high-quality raw portrait photos in to-tal. High-resolution segmentation masks of human regions are provided. Each raw photo is retouched by three experts, while they elaborately adjust each group of photos to have consistent tones. We deﬁne a set of objective measures to evaluate the performance of PPR and propose strategies to learn PPR models with good HRP and GLC performance.
The constructed PPR10K dataset provides a good bench-mark for studying automatic PPR methods, and experiments demonstrate that the proposed learning strategies are effec-tive to improve the retouching performance. Datasets and codes are available: https://github.com/csjliang/PPR10K. 1.

Introduction
Portrait photography has a vast range of applications in scenarios such as wedding, birthday, graduation, anniver-saries, advertisements, personal recording or creations. To ensure high quality of the ﬁnalist photos, photographers tend to capture as many raw photos with high dynamic ranges as possible. However, a set of raw photos might be
ﬂat-looking and present inconsistent tone due to the vari-ations of subject view, illumination condition, background
∗Equal contribution.
†Corresponding author. This work is supported by the Hong Kong RGC
RIF grant (R5001-18). contexts and camera settings, as shown in the top row of
Figure 1. A fast retouching on a large set of raw photos is necessary before feeding back to customers for photo selec-tion, followed by ﬁne-grained editing.
While a set of common standards or styles of pre-retouching are widely accepted and followed, most portrait photos are retouched manually, which is very tedious and time-consuming on the large size and highly redundant raw photos. Automatic portrait photo retouching is thus highly desired as it can save a huge amount of tedious human labor and signiﬁcantly improves the efﬁciency of the entire por-trait photography pipeline, bringing better experience for both photographers and customers.
Different from general-purpose photo retouching tasks, portrait photo retouching (PPR) has two special and practi-cal requirements: human-region priority (HRP) and group-level consistency (GLC). HRP means that human-related re-gion in a portrait photo should have higher priority and be paid more attention. The ﬁrst row of Figure 1(a) shows a set of typical examples, where the backgrounds are over-exposed while the human regions are under-exposed. For such cases, retouching should improve the exposure of hu-man regions while preserving as many details as possible in the backgrounds. GLC requires a group of portrait pho-tos, which are usually taken on the same subject at the same scene but have different subject views, lighting conditions and even camera settings, to be adjusted to a consistent tone, as shown in the bottom row of Figure 1.
To the best of our knowledge, existing general-purpose photo retouching or enhancement datasets [1, 2, 9, 13] and models [3, 5, 7, 10, 12, 17, 20, 26, 29, 30, 32] do not touch the above two requirements and thus can hardly satisfy the de-mands of automatic PPR. To facilitate research on this im-portant and high-frequency task, in this paper, we construct the ﬁrst large-scale PPR dataset which contains 11, 161 (in 1, 681 groups) high-quality raw portrait photos, namely
PPR10K dataset hereafter. The raw photos are captured by various DSLR camera devices, covering a wide range of scenes, subjects, lighting conditions and camera settings.
Each raw photo is independently adjusted by 3 expert re-touchers with rich experience in professional photography 1653
(a) (b)
Figure 1: Examples of a group of photos from the PPR10K dataset (better viewed in color). Top: the raw photos; bottom: the retouched results from one expert and the human-region masks. The raw photos exhibit poor visual quality and large variance in subject views, background contexts, lighting conditions and camera settings. The retouched results demonstrate both good visual quality and group-level consistency. studios, resulting in three versions of high-quality retouched targets. Besides the highly informative raw photos and their retouched results, we also provide a high-resolution human-region mask for each photo to make better use of HRP. Each group of photos is elaborately adjusted to ensure GLC. We believe this dataset will provide a valuable benchmark to facilitate the research on automatic PPR.
With the PPR10K dataset, we deﬁne a set of objective measures to evaluate the performance of automatic PPR in terms of both HRP and GLC. We also propose correspond-ing learning strategies to improve the retouching quality of trained PPR models. Speciﬁcally, we deﬁne human-region weighted measures based on the provided mask, which con-tribute to achieving better visual quality on subject areas.
Explicitly deﬁning the GLC on the image space is very chal-lenging because of the large variations of content in a group of photos. We ﬁnd that the GLC can be reliably evaluated based on the statistics in CIELAB color space. We also propose an efﬁcient way to simulate the intra-group vari-ations using individual images, which is proven effective to improve the GLC performance. Considering that previ-ous general-purpose photo retouching models obtain poor performance on the PPR task, we re-implemented repre-sentative state-of-the-art photo retouching and enhancement methods, and report their performance on our dataset for a convenient and fair comparison.
The contributions of this paper are two-fold. First, we construct the ﬁrst large-scale and high-quality PPR dataset with human-region masks and group-level consistent tar-gets, providing a valuable benchmark to facilitate research on this important task. Second, we propose a set of objec-tive measures and learning strategies to evaluate and opti-mize the PPR models. Extensive experiments veriﬁed the effectiveness of the proposed dataset, measures and learn-ing strategies both quantitatively and qualitatively. 2.