Abstract
To segment 4K or 6K ultra high-resolution images needs extra computation consideration in image segmentation.
Common strategies, such as down-sampling, patch crop-ping, and cascade model, cannot address well the balance issue between accuracy and computation cost. Motivated by the fact that humans distinguish among objects continu-ously from coarse to precise levels, we propose the Contin-uous Refinement Model (CRM) for the ultra high-resolution segmentation refinement task. CRM continuously aligns the feature map with the refinement target and aggregates fea-tures to reconstruct these image details. Besides, our CRM shows its significant generalization ability to fill the resolu-tion gap between low-resolution training images and ultra high-resolution testing ones. We present quantitative per-formance evaluation and visualization to show that our pro-posed method is fast and effective on image segmentation refinement. Code is available at https://github.com/dvlab-research/Entity/tree/main/CRM. 1.

Introduction
With the rapid development of camera and display equip-ment, the resolution of images is getting higher and higher, where 4K and 6K resolutions become common.
It gives different chances in portrait photo post-processing, indus-trial defect detection, medical diagnose, etc. However, ul-tra high-resolution images also bring challenges to the clas-sical image segmentation methods. First, the significant number of input pixels is computationally expensive and
GPU memory-hungry. Second, most existing methods up-sample the final prediction for 4 to 8 times through interpo-lation [5,49,52,55,56], without building fine-grained details on output masks.
Previous segmentation refinement methods include those of [18, 22, 27, 53]. They still target at images with 1K∼2K resolutions. Work of [9, 47] handles ultra high-resolution refinement based on low-resolution masks generated from classic segmentation algorithms. They utilize cascade-Figure 1. Coarse mask refinement results. (a) Coarse mask from
PSP [55], (b) refined mask of state-of-the-art [9], and (c) refined mask of our proposed CRM. The image is from BIG (2K∼6K res). scheme in decoder to upsample intermediate refinement re-sults in several resolution stages until reaching the target resolution. They are still time-consuming due to work-ing in discrete style on pre-defined resolution stages of de-coder. We instead consider continuity to make the decod-ing more efficient and more friendly to the learning of up-sampling resolution. We propose the Continuous Refine-ment Model (CRM) to exploit continuity.
The coarse mask is from low-resolution segmentation.
In order to expand it further, the problem is similar to a classical super-resolution (SR) task. Other than classical
SR methods, constructing continuous local representation is proposed [7]. We note that utilizing implicit function [31] to handle high-resolution segmentation refinement is not triv-ial. First, the resolution of the training image in our task is around 500, while the training image for SR is with 2K res-olution. The training strategy to down-sample the input to
SR would make our input mask tiny and meaningless. Sec-ond, more multi-level semantic features are needed com-pared with super-resolution configuration. Third, there ex-ists a resolution gap between training on low-resolution and testing on ultra high-resolution. Therefore, this task needs specific designs.
To realize the continuity in ultra high-resolution segmen-computation cost and yet reconstruct more details.
• CRM with multi-resolution inference is suitable for using low-resolution training images and ultra high-resolution testing images. Due to the simple design, even with refining from low to high-resolution, the to-tal inference time is less than half of CascadePSP [9].
• In experiments, CRM yields the best segmentation re-It also helps sults on ultra high-resolution images. boost the performance of state-of-the-art panoptic seg-mentation models without fine-tuning. 2.