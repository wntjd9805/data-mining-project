Abstract
We study the semi-supervised learning problem, using a few labeled data and a large amount of unlabeled data to train the network, by developing a cross-patch dense con-trastive learning framework, to segment cellular nuclei in histopathologic images. This task is motivated by the ex-pensive burden on collecting labeled data for histopatho-logic image segmentation tasks. The key idea of our method is to align features of teacher and student networks, sam-pled from cross-image in both patch- and pixel-levels, for enforcing the intra-class compactness and inter-class sepa-rability of features that as we shown is helpful for extract-ing valuable knowledge from unlabeled data. We also de-sign a novel optimization framework that combines consis-tency regularization and entropy minimization techniques, showing good property in eviction of gradient vanishing.
We assess the proposed method on two publicly available datasets, and obtain positive results on extensive experi-ments, outperforming the state-of-the-art methods. Codes are available at https://github.com/zzw-szu/CDCL. 1.

Introduction
Deep learning models have achieved remarkable success in cellular nuclei segmentation from histopathologic im-ages [9, 42, 43]. However, for a good learning performance, we often have to collect a large amount of annotated data that tell how the deep model should output. The crux is such annotated data are rather time-consuming to collect or can be even prohibitively expensive, because they need te-dious efforts from domain experts and the annotating pro-cess have to be conducted multiple rounds for reaching a consensus among experts. Therefore, it has been receiv-ing an increasing interest for researchers to study on how to train deep models given only a few annotated data.
Seminal works in this direction include mainly semi-supervised learning [17, 21, 36] and weakly-supervised learning [1, 18, 37]. In this work, we study semi-supervised learning problem that just needs a few pixel-wise annotated data while being able to learn from quite massive unlabeled data. This setting is more suitable for segmenting cellu-lar nuclei in histopathologic images where a lot of objects presented in one image, thus weak supervision signals, say object’s center, often being far more expensive to acquire.
Advanced semi-supervised learning techniques in medi-cal image segmentation often are based on adversarial train-ing, pseudo-labeling, and consistency regularization [10,23, 26]. These existing methods, though have shown being able to leverage knowledge from unlabeled data for learn-ing, suffer from lack of exploiting feature structures across the whole dataset, such as the similarity or disparity exists between different features. Our idea for solving this prob-lem is to tie semi-supervised learning and contrastive learn-ing together. Contrastive learning selects positive and neg-ative pairs of features from unlabeled data, and then exploit knowledge from them by contrasting the similar features against dissimilar features, being able to learn high-level se-mantic structures across different images.
The key to implement our idea is the sampling quality of positive and negative pairs. Existing methods are based on pixel-wise sampling, positive pairs consisting of multi-ple views of perturbations from the same pixel-wise fea-ture while negative pairs are randomly sampled by features with different pixel-wise predictions, under the guidance of pseudo labels [20, 44]. Since nuclei have blur boundaries while obvious distributions, pseudo labels are not accurate as expected in pixel-wise, though they still reflect the class distribution in a fixed region (e.g., patch), suggesting that it is easier to correctly judge inter-patch feature disparity rather than inter-pixel. Therefore, by leveraging the inter-patch feature disparity, deep models are more likely to learn better representations of target distributions.
With the above insight, we develop a cross-patch dense contrastive learning framework to extract structural infor-mation from unlabeled data. Specifically, we sample patch-wise negative pairs between patches with large disparity and densely sample pixel-wise negative pairs between them.
Following with the standard positive sampling strategy, our contrastive learning module enforces the intra-class com-pactness and inter-class separability [38] in both patch-level and pixel-level. With the contrastive learning mod-ule as the core, we further take the advantage of the mean teacher architecture, consistency regularization, and en-tropy minimization to acquire predictions and pseudo la-bels with higher quality, for the semi-supervised segmen-tation of cellular nuclei in histopathologic images. We conduct extensive experiments on two publicly available datasets, with the positive results showing the effectiveness of our method, consistently outperforming the state-of-the-art methods. We summarize the contributions as follows.
• We propose an effective and generic cross-patch dense contrastive learning framework to extract valuable knowledge from unlabeled data, by enforcing the intra-class compactness and inter-class separability in both patch-level and pixel-level.
• We take the advantage of consistency regularization and entropy minimization, develop an efficient semi-supervised nuclei image segmentation algorithm that outperforms the state-of-art methods in two publicly available datasets. 2.