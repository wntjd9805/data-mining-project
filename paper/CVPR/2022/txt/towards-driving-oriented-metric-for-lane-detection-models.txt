Abstract
After the 2017 TuSimple Lane Detection Challenge, its dataset and evaluation based on accuracy and F1 score have become the de facto standard to measure the perfor-mance of lane detection methods. While they have played a major role in improving the performance of lane detection methods, the validity of this evaluation method in down-stream tasks has not been adequately researched. In this study, we design 2 new driving-oriented metrics for lane detection: End-to-End Lateral Deviation metric (E2E-LD) is directly formulated based on the requirements of au-tonomous driving, a core downstream task of lane detec-tion; Per-frame Simulated Lateral Deviation metric (PSLD) is a lightweight surrogate metric of E2E-LD. To evalu-ate the validity of the metrics, we conduct a large-scale empirical study with 4 major types of lane detection ap-proaches on the TuSimple dataset and our newly con-structed dataset Comma2k19-LD. Our results show that the conventional metrics have strongly negative correlations (≤-0.55) with E2E-LD, meaning that some recent improve-ments purely targeting the conventional metrics may not have led to meaningful improvements in autonomous driv-ing, but rather may actually have made it worse by over-fitting to the conventional metrics. As autonomous driving is a security/safety-critical system, the underestimation of robustness hinders the sound development of practical lane detection models. We hope that our study will help the com-munity achieve more downstream task-aware evaluations for lane detection. 1.

Introduction
Lane detection is one of the key technologies today for realizing autonomous driving. For lane detection, camera is the most frequently used sensor because it is a natural choice as lane lines are visual patterns [26]. Like most other computer vision areas, lane detection has been sig-nificantly benefited from the recent advances of deep neural networks (DNNs). In the 2017 TuSimple Lane Detection
Challenge [8], DNN-based lane detection shows substan-tial performance as all top 3 teams opt for DNN-based lane detection. After this competition, its dataset and evaluation
Figure 1. Examples of lane detection results and the accuracy met-ric in benign and adversarial attack scenarios on TuSimple Chal-lenge dataset [8]. As shown, the conventional accuracy metric does not necessarily indicate drivability if used in autonomous driving, the core downsteam task. For example, SCNN always has higher accuracy than PolyLaneNet, but its detection results are making it much harder to achieve lane centering (detailed in §4.2). method based on accuracy and F1 score became the de facto standard in lane detection evaluation. These metrics are in-herited by the subsequent datasets [13, 37].
However, the validity of this evaluation method in prac-tical contexts, i.e., whether this is representative of practi-cality in real-world downstream applications, has not been adequately researched. Specifically, the main real-world applications of lane detection are for autonomous driving (AD), e.g., online detection for automated lane centering (for lower-level AD such as in Telsa AutoPilot [6]), and offline detection for high-definition map creation (for both low-level [5] and high-level AD [50]). With such an ap-plication domain as its main target, the robustness of lane detection is highly critical as errors from it could be fatal.
Unfortunately, we find that the conventional evaluation met-rics (i.e., accuracy and F1 score) have limitations in cor-rectly reflecting the performance of lane detection models in such main downstream application domain, especially in more challenging scenarios (e.g., when under adversarial attacks). Fig. 1 shows a few such examples that motivate this study. In the adversarial attack settings, the lane lines detected by SCNN [37] are largely disrupted, but their per-formance measured by the conventional accuracy metric is
always higher than the one of PolyLaneNet [48], which are generally aligned with actual lane lines (and indeed lead to less lane center deviation than SCNN when used with driv-ing models as quantified later in §4.2). In the benign set-tings, PolyLaneNet has the lowest accuracy and is under-estimated, despite its seemingly perfect detection for hu-mans. As lane detection has been evaluated using mainly relatively clean and homogeneous driver’s view images, it is not easy to identify such a great discrepancy at the met-ric level. Considering the criticality of robust lane detec-tion to correct and safe AD, it is important to address such a metric-level limitation since (1) the cornerstone of real-world deployment and commercialization of AD today is exactly on the handling of those more challenging driving scenarios [21, 30, 53]; and (2) with increasingly more dis-coveries of physical-world adversarial attack on lane detec-tion in AD context [31, 44], it is desired to have a more downstream task-aware performance metric when judging the model robustness (and its enhancement).
Motivated by such critical needs, we design 2 new driving-oriented metrics, End-to-End Lateral Deviation metric (E2E-LD) and Per-frame Simulated Lateral Devia-tion metric (PSLD), to measure the performance of lane detection models in AD, especially in Automated Lane
Centring (ALC), a Level-2 driving automation that auto-matically steers a vehicle to keep it centered in the traf-fic lane [7]. E2E-LD is designed directly based on the requirements of driving automation by ALC. PSLD is a lightweight surrogate metric of E2E-LD that estimates the impact of lane detection results on driving from a single frame. This per-frame lightweight design allows the metric to be usable during upstream lane detection model train-ing. To evaluate the validity of the metrics, we conduct a large-scale empirical study of the 4 major types of lane de-tection approaches on the TuSimple dataset and our newly constructed dataset, Comma2k19-LD, which contains both lane line annotation and driving information. To simulate corner-case but physically-realizable scenarios as in Fig. 1 for lane detection, we utilize and extend physical-world ad-versarial attacks on ALC [44]. We formulate attack objec-tive functions to fairly generate adversarial attacks against the 4 major types of lane detection approaches. Through-out this study, we find that the conventional metrics have strongly negative correlations (r ≤-0.55) with E2E-LD in the benign scenarios, meaning that some recent improve-ments purely targeting the conventional metrics may not have led to meaningful improvements in AD, but rather may actually have made it worse by overfitting to the conven-tional metrics. In the attack scenarios, while we observe a slight positive correlation (r ≤0.08), it is not statistically significant. Consequently, we find that the conventional metrics tend to overestimate less robust models. On the con-trary, our newly-designed PSLD metric is always strongly positively correlated with E2E-LD (r ≥0.38), and all corre-lations are statistically significant (p ≤ 0.001).
While the TuSimple Challenge dataset and its evaluation metrics have played a substantial role in developing perfor-mant lane detection methods, the recent improvement on the conventional metrics does not lead to the improvement on the core downstream task AD. We thus want to inform the community of such limitations of the conventional eval-uation and facilitate research to conduct more downstream task-aware evaluation for lane detection, as the gap between upstream evaluation metrics and downstream application performance may hinder the sound development of lane de-tection methods for real-world application scenarios.
In summary, our contributions are as follows:
• We design 2 new driving-oriented metrics, E2E-LD and
PSLD, that can more effectively measure the perfor-mance of lane detection models when used for AD, their core downstream task.
• We design a methodology to fairly generate physical-world adversarial attacks against the 4 major types of lane detection models.
• We build a new dataset Comma2k19-LD that contains lane annotations and driving information.
• We are the first to conduct a large-scale empirical study to measure the capability of 4 major types of lane detec-tion models in supporting AD.
• We highlight and discuss the critical limitations of the conventional evaluation and demonstrate the validity of our new downstream task-aware metrics.
Code and data release. All our codes and datasets are available on our project websites 1. 2.