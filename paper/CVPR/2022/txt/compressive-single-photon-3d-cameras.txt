Abstract
Single-photon avalanche diodes (SPADs) are an emerg-ing pixel technology for time-of-flight (ToF) 3D cameras that can capture the time-of-arrival of individual photons at picosecond resolution. To estimate depths, current SPAD-based 3D cameras measure the round-trip time of a laser pulse by building a per-pixel histogram of photon times-tamps. As the spatial and timestamp resolution of SPAD-based cameras increase, their output data rates far ex-ceed the capacity of existing data transfer technologies.
One major reason for SPAD’s bandwidth-intensive oper-ation is the tight coupling that exists between depth reso-lution and histogram resolution. To weaken this coupling, we propose compressive single-photon histograms (CSPH).
CSPHs are a per-pixel compressive representation of the high-resolution histogram, that is built on-the-fly, as each photon is detected. They are based on a family of linear coding schemes that can be expressed as a simple matrix operation. We design different CSPH coding schemes for 3D imaging and evaluate them under different signal and background levels, laser waveforms, and illumination se-tups. Our results show that a well-designed CSPH can con-sistently reduce data rates by 1-2 orders of magnitude with-out compromising depth precision. 1.

Introduction
Single-photon cameras (SPC) are an emerging sensor technology with ultra-high sensitivity down to individual photons [7, 9].
In addition to their extreme sensitivity,
SPCs based on single-photon avalanche diodes (SPADs) can also record photon-arrival timestamps with extremely high (sub-nanosecond) time resolution [43]. Moreover,
SPAD-based SPCs are compatible with the complemen-tary metal-oxide semiconductor (CMOS) photolithography process which can enable fabrication of kilo-to-mega-pixel resolution SPAD arrays [12, 40] at low costs. Due to these capabilities, SPAD-based SPCs are gaining popu-larity in various imaging applications including 3D imag-ing [14, 48, 49, 55], passive low-light imaging [3, 38, 51],
HDR imaging [29, 30], non-line-of-sight (NLOS) imag-ing [5, 36, 58], fluorescence lifetime imaging (FLIM) mi-croscopy [61], and diffuse optical tomography [37, 60].
Unlike a conventional camera pixel that outputs a single
Figure 1. Compressive Single-Photon 3D Imaging. (a) Example depth maps with conventional (full histogram) capture, coarse res-olution capture and our method with compressive capture. In this simulation, our method generates 100× lower data, yet generates depth maps that are visually indistinguishable from the conven-tional method. (b) With conventional acquisition schemes, data bandwidth requirements scale linearly with the desired depth res-olution. Our proposed compressive acquisition does not scale as strongly with depth resolution, keeping the output data rates man-ageable with existing data transfer standards like USB and PCIe. intensity value integrated over micro-to-millisecond time-scales, a SPAD pixel generates an electrical pulse for each photon detection event. A time-to-digital conversion circuit converts each pulse into a timestamp recording the time-of-arrival of each photon. Under normal illumination condi-tions, a SPAD pixel can generate millions of photon times-tamps per second. The photon timestamps are often cap-tured with respect to a periodic synchronization signal gen-erated by a pulsed laser source. To make this large volume of timestamp data more manageable, SPAD-based SPCs build a timing histogram in-sensor instead of transferring the raw photon timestamps to the processing chip. The his-togram records the number of photons as a function of the time delay with respect to the synchronization pulse.
Consider a megapixel SPAD-based 3D camera. For short range indoor applications (up to tens of meters), a millime-ter depth resolution would be desirable. For longer range
outdoor applications (hundreds of meters), centimeter level depth resolution would be desirable. Assuming state-of-the-art sub-bin processing techniques [22], this corresponds to histograms with thousands of bins per pixel. Moreover, the rate at which these histograms are acquired can vary from tens of frames per second (fps) for low speed applications to hundreds of fps for, say, an automotive application where objects may be moving at high speeds. Even a conservative estimate of a 30 fps megapixel camera leads to a large data-rate of 106 pixels/frame × 1000 bins/pixel × 2 bytes/bin × 30 fps = 60 GB/sec. As shown in Fig. 1(b), the amount of data generated by this conventional full histogram cap-ture method varies linearly with the desired depth resolution and exceeds the bandwidth of state-of-the-art data-transfer busses (like USB and PCIe) by orders of magnitude.
In this paper we propose a bandwidth-efficient acquisi-tion strategy called compressive single-photon histograms (CSPH). Instead of capturing the full timing histogram in each pixel, a CSPH is constructed by mapping the time bins of the full histogram onto multiple “compressive bins” through an encoding step. We consider a family of com-pressive encoders that are linear, which means they can be represented as a simple matrix operation. Therefore, they can be implemented efficiently using vector addition oper-ations that can be computed on-the-fly, as each photon ar-rives, without the need to store large arrays of photon times-tamps in-sensor. CSPHs decouple the dependence of out-put data rate on the desired depth resolution. While a full histogram would require more time bins to achieve higher depth resolution, a CSPH can represent them using (almost) the same number of compressive bins. As illustrated in
Fig. 1(a), CSPHs can reduce the required data rate by 1-2 orders of magnitude compared to the full histogram case.
We design and evaluate various CSPH coding schemes for SPAD-based 3D cameras. We propose a general decod-ing algorithm that directly estimates per-pixel scene depths from a CSPH, based on recent work in structured light [39].
Our method also accounts for different laser pulse shapes and pixel response characteristics, i.e., the system’s impulse response function (IRF). We perform extensive simulations over a wide range of background and signal powers, laser waveform shapes and illumination schemes. We also evalu-ate depth reconstruction accuracy of our compressive acqui-sition method with real-world data captured using a single-pixel raster-scanning hardware prototype. 2.