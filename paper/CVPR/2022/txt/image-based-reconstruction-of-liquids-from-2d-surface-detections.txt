Abstract
In this work, we present a solution to the challenging problem of reconstructing liquids from image data. The challenges in reconstructing liquids, which is not faced in previous reconstruction works on rigid and deforming sur-faces, lies in the inability to use depth sensing and color features due the variable index of refraction, opacity, and environmental reﬂections. Therefore, we limit ourselves to only surface detections (i.e. binary mask) of liquids as ob-servations and do not assume any prior knowledge on the liquids properties. A novel optimization problem is posed which reconstructs the liquid as particles by minimizing the error between a rendered surface from the particles and the surface detections while satisfying liquid constraints. Our solvers to this optimization problem are presented and no training data is required to apply them. We also propose a dynamic prediction to seed the reconstruction optimization from the previous time-step. We test our proposed meth-ods in simulation and on two new liquid datasets which we open source1 so the broader research community can con-tinue developing in this under explored area. 1.

Introduction
To successfully navigate in and interact with the 3D world we live in, a 3D geometric understanding is required.
The importance of this requirement can be seen by the numerous advancements in reconstruction methods from cameras, which is the ideal sensor due to its information richness and cheap cost. Solutions for surface based re-construction have been proposed for a variety of scenarios such as rigid, unknown environments [31] with dynamic ob-jects [21]. The rigidness assumption has also been lifted to handle deformable surfaces [17, 30]. Breakthrough devel-opments from the reconstruction community have fed into downstream applications such as robotic manipulation [43] and surgical tissue tracking [23].
Reconstruction of more complex scenes, such as ﬂuids however remains an under explored area. Fluids, unlike 1https://github.com/ucsdarclab/liquid_reconstruction
Figure 1. The top and bottom row ﬁgures shows the output of our proposed method for reconstructing liquid from an endoscopic camera and a human pouring chocolate milk into a cup respec-tively. Our reconstruction approach minimizes the 2D surface detection loss while simultaneously satisfying liquid constraints without the need for any prior training data. The result is an effec-tive reconstruction technique for liquids that has been validated on simulated and real-life data as shown here. rigid and deforming objects, are typically turbulent and can exhibit translating, shearing, and rotation motions [33]. The well established Navier-Stokes equations which describe
ﬂuid motion have been applied to generate effective graphic renderings of ﬂuids [4]. The motions of ﬂuids also differs depending on if it is a gas or liquid. Gasses are compress-ible and reconstruction from images has been explored [9].
Liquids, unlike gasses, are in-compressible and for every-day human interactions, rely on a container and gravity to form their shape (e.g. a mug holding coffee). By fully re-constructing liquids in 3D, automation efforts which repli-cate human tasks interacting with liquids can be signiﬁ-cantly improved such as robot bar tending [44], autonomous blood suction during surgeries [16], and sewage service
[42]. However, the challenge of reconstructing liquids from
images remained unexplored and simplifying heuristics or end-to-end models were used to guide these automation ef-forts.
We propose an approach to reconstruct and track liquids from videos using minimal information. This results in the
ﬁrst technique to reconstruct liquids with only knowledge of the collision environment, gravity direction, and 2D sur-face detections. The observations are limited to 2D surface detections (i.e. binary mask) because a liquids color varies widely based on their refraction index, opacity, and envi-ronment. Furthermore, common depth sensors (e.g. Mi-crosoft’s Kinect or Intel’s RealSense) will behave incon-sistently due to the unknown refraction index. By limiting the observation data to only 2D surface detections, our pro-posed reconstruction method can be directly applied to any detected liquid and does not require any prior information on the liquid (e.g. no training data is required). To this end, our contributions are: 1. a novel optimization problem for reconstructing liq-uids with a particle representation which accounts for liquid constraints, 2. seeding the optimization with a dynamics prediction based on the previous time-step, 2.2. Liquid Detection and Simulation Registration
While direct reconstruction of liquids has not been done before, there has been work in detecting liquids in the im-age frame and registering with a simulation. Pools of water have been detected for unmanned ground vehicles [34, 35], and ﬂowing blood has been detected during surgeries for autonomous, robotic suction [37]. Liquids during a pour-ing task have also been detected using optical ﬂow [45] and Deep Neural Networks [40]. The scope of this paper is on reconstructing liquids, and these detection methods could be utilized to feed into our proposed method by sup-plying the observations of the liquids surface. Mottaghi et al. were able to estimate a liquid’s volume in a container from images directly [27]. Registration of a liquid simula-tion with the real world has also been conducted for robot pouring [14, 39, 41]. However, these techniques require prior information about the liquid being reconstructed, such as knowing the volume of the liquid before hand. Mean-while in this work, we only assume prior knowledge of the gravity direction and collision environment and use a novel branching strategy to dynamically adjust the volume of the reconstructed liquid. Nevertheless, we integrated Schenck and Fox’s most recent simulation registration work [41] to the best of our ability into our reconstruction approach for comparison. 3. and a branching strategy to dynamically adjust the number of particles in the reconstructed liquid. 3. Methods
The complete solution only relies on sequential data and was extended with a source estimation technique to show its adaptability for future applications with liquids. To baseline our proposed method, new liquid datasets are collected and open sourced so future researchers can further develop in this under-explored area. 2.