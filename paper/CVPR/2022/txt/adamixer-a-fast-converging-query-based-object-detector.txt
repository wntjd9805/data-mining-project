Abstract
Traditional object detectors employ the dense paradigm of scanning over locations and scales in an image. The recent query-based object detectors break this convention by decoding image features with a set of learnable queries.
However, this paradigm still suffers from slow convergence, limited performance, and design complexity of extra net-works between backbone and decoder.
In this paper, we find that the key to these issues is the adaptability of de-coders for casting queries to varying objects. Accordingly, we propose a fast-converging query-based detector, named
AdaMixer, by improving the adaptability of query-based de-coding processes in two aspects. First, each query adap-tively samples features over space and scales based on es-timated offsets, which allows AdaMixer to efficiently attend to the coherent regions of objects. Then, we dynamically decode these sampled features with an adaptive MLP-Mixer under the guidance of each query. Thanks to these two criti-cal designs, AdaMixer enjoys architectural simplicity with-out requiring dense attentional encoders or explicit pyra-mid networks. On the challenging MS COCO benchmark,
AdaMixer with ResNet-50 as the backbone, with 12 train-ing epochs, reaches up to 45.0 AP on the validation set along with 27.9 APs in detecting small objects. With the longer training scheme, AdaMixer with ResNeXt-101-DCN and Swin-S reaches 49.5 and 51.3 AP. Our work sheds light on a simple, accurate, and fast converging architecture for query-based object detectors. The code is made available at https://github.com/M CG-NJ U/AdaM ixer. 1.

Introduction
Object detection has been a fundamental task in the com-puter vision area for decades, as it aims to locate varying objects in a single image and categorize them. For a long time, researchers have used spatial dense prior on grids in an image to cover potential objects with great variations. (cid:0): Corresponding author (lmwang@nju.edu.cn).
Figure 1. Convergence curves of our AdaMixer, DETR, De-formable DETR and Sparse R-CNN with ResNet-50 as the back-bone on MS COCO minival set.
This dense paradigm dates back from sliding window meth-ods [11, 36, 41] and still remains prevalent in anchor-based or point-based detectors [15, 23, 26, 32, 34, 38, 50] at the age of convolutional neural networks. Although dense pri-ors has been a dominant role in object detection for its re-markable performance to cover potential objects, they are criticized for several shortcomings in various aspects, in-cluding anchor designs [33, 42, 45], training sample selec-tion [13,14,48,49], and post-processing operators on poten-tial redundant detections [2, 18].
Though sorts of remedies on these issues are proposed every year, the underlying detection scheme with dense grid-like prior had remained almost untouched for a long time. Recently, query-based object detectors [4, 37, 53] bring a new perspective on object detection, that is, to use learnable embeddings, also termed queries, to directly represent potential objects by using attention-like opera-tors [40]. This scheme, on the other hand, requires a strong representation power of the network to cast limited queries to potential objects to cope with great variations of objects across images. However, the adaptability of currently em-ployed query decoders to the image content is limited on both how to spatially sample features and how to process
sampled features. For instance, attention-based decoder in
DETR-like detectors [4, 53] are adaptive on which feature to sample but remain static on how to decode it, whereas dynamic interaction head in Sparse R-CNN [37] goes vice versa. The insufficiency in the adaptability to different images leaves the current decoder in a dilemma between limited query representation power and great variations of objects. Also, as compensation for this, query-based ob-ject detectors usually bring extra attentional encoders or explicit pyramid necks after the backbone and before the query decoder, in order to involve more semantic or multi-scale modeling, such as TransformerEncoder [40], Multi-ScaleDeformableTransformerEncoder [53] and FPN [22].
These extra components result in the higher complexity of built detection pipelines in both design and computational aspects.
In addition, detectors with them are hungry for more training time and rich data augmentation due to the introduced modules.
In this paper, we present a fast-converging and accurate query-based object detector with a simplified architecture, named AdaMixer, to mitigate issues above. Specifically, to effectively use queries to represent objects, AdaMixer in-troduces the adaptive 3D feature sampler and the adaptive mixing of channel semantics and spatial structures holisti-cally. First, by regarding multi-scale feature maps from the backbone as a 3D feature space, our proposed decoder can flexibly sample features over space and scales to adaptively handle both of location and scale variations of objects based on queries. Then, the adaptive mixing applies the channel and spatial mixing to the sampled features with dynamic kernels under the guidance of queries. The adaptive location sampling and holistic content decoding notably enhances the adaptability of queries to varying images in detecting varying objects. As a result, AdaMixer is simply made up of a backbone network and our proposed decoder without extra attentional encoders or explicit pyramid networks.
×
Experimental results show that in a standard 12 epochs training (1 training scheme) with the random flipping as the only augmentation, our AdaMixer with ResNet-50 [17] as the backbone achieves 42.7, 44.1, and 45.0 AP on MS
COCO validation set under the settings of 100, 300, and 500 queries, with 24.7, 27.0, and 27.9 APs in small object detection. With longer 3 training time and stronger data augmentation aligned to other query-based detectors, our
AdaMixer with ResNet-101, ResNeXt-101-DCN [44, 52], and Swin-S [27] achieves 48.0, 49.5, and 51.3 AP with the single scale and single model testing, significantly outper-forming the previous state-of-the-art query-based detectors.
We hope AdaMixer, as a simply-designed, fast-converging, relatively efficient, and more accurate object detector, will serve as a strong baseline in the future research for the query-based object detection.
× 2.