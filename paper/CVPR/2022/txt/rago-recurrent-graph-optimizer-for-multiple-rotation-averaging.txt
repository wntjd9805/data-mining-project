Abstract
This paper proposes a deep recurrent Rotation Averag-ing Graph Optimizer (RAGO) for Multiple Rotation Averag-ing (MRA). Conventional optimization-based methods usu-ally fail to produce accurate results due to corrupted and noisy relative measurements. Recent learning-based ap-proaches regard MRA as a regression problem, while these methods are sensitive to initialization due to the gauge free-dom problem. To handle these problems, we propose a learnable iterative graph optimizer minimizing a gauge-invariant cost function with an edge rectification strategy to mitigate the effect of inaccurate measurements. Our graph optimizer iteratively refines the global camera rotations by minimizing each node’s single rotation objective function.
Besides, our approach iteratively rectifies relative rotations to make them more consistent with the current camera ori-entations and observed relative rotations. Furthermore, we employ a gated recurrent unit to improve the result by trac-ing the temporal information of the cost graph. Our frame-work is a real-time learning-to-optimize rotation averaging graph optimizer with a tiny size deployed for real-world applications. RAGO outperforms previous traditional and deep methods on real-world and synthetic datasets. The code is available at github.com/sfu-gruvi-3dv/RAGO. 1.

Introduction
Multiple Rotation Averaging (MRA) [4, 21, 28, 38] is a fundamental problem in 3D computer vision that aims to de-termine the global absolute orientations {R𝑢, 1 ≤ 𝑢 ≤ 𝑁 } of 𝑁 cameras given their relative orientations R𝑢𝑣. It has been widely studied in 3D vision applications, e.g., global
Structure from Motion (SfM) [12, 24], pose graph opti-mization in Visual Simultaneous Localization and Map-ping (SLAM) [14, 27, 35], and other sensor network prob-lems [36, 37].
MRA is usually solved by minimizing the discrepancy between the observed relative orientations R𝑢𝑣 and the one calculated from the estimated global orientations, i.e.
Figure 1. The average mean error of RAGO on the synthetic dataset compared with various MRA methods [5,6,20,30,39]. The optimized results of the previous approaches are visualized as the dash lines. The vertical axis represents the average mean angular error, while the horizontal axis shows the number of iterations.
R𝑢R⊤
𝑣 . It is a difficult classical problem with several chal-lenges [21]. Firstly, it is a highly nonlinear problem since the distance between two rotation matrices is a nonlinear function. Secondly, rotation matrices lie on the 𝑆𝑂 (3) group, which requires careful parameterization and normal-ization during optimization. Thirdly, there are many out-liers and various noises in input relative orientations R𝑢𝑣, which are often computed from noisy visual correspon-dences across images. These problems make the minimiza-tion objective function full of saddle points and local mini-mums in separate basins of attraction. Most of the time, the global optimum cannot be guaranteed. The MRA problem is typically solved by iterative optimization with careful ini-tialization [6, 20, 40]. Robust cost functions with additional outlier filtering and iterative reweighting of the measure-ments are usually adopted, while these still do not tolerate severe corruptions and various noises.
Recently, some learning-based methods [30, 42] formu-late MRA as a regression problem in order to benefit from data-driven prior knowledge. These methods rely on a good initialization, since they do not enforce any geometric con-straint during inference, which may lead to an inferior re-sult. Furthermore, there is a gauge freedom in MRA that prevents learning-based methods from direct end-to-end training, where {R𝑢} and {R𝑢R0} are essentially the same solution for an arbitrary rotation matrix R0. These learning-based methods [30,42] have to choose a root node as a refer-ence to avoid a one-to-many mapping, which makes it hard to learn to solve the MRA problem.
This paper presents a novel learning-based method that has the advantages of both geometrical and learning-based methods. Specifically speaking, we decouple an MRA problem to multiple Single Rotation Averaging (SRA) prob-lems as inspired by the traditional method in [20]. An SRA problem solves the rotation matrix R𝑢 from all pairwise rel-ative rotation {R𝑢𝑣, 𝑣 ∈ N𝑢}, where N𝑢 is the neighbor-hood of 𝑢. We construct a cost graph by computing an SRA cost function for each node independently.We then apply a
Massage Passing Neural Network (MPNN) to iteratively ad-just the global camera rotations of all nodes by minimizing the SRA cost graph, resulting in an iterative optimization of the original MRA problem. Unlike traditional methods that only can consider one-hop neighbors, MPNN has large re-spective fields and achieves better results. Compared to pre-vious learning-based methods, our framework focuses on solving SRA, a much simpler and smaller problem without the gauge ambiguity, making learning easier.
In addition, in order to handle noises and outliers, we also learn to rectify the relative measurements R𝑢𝑣. Our approach avoids time-consuming online refinement or edge reweighting, which makes training unstable.
In order to make it more robust and efficient, we employ a Gated Re-current Unit (GRU) module to utilize the historical infor-mation of the previous cost graph. This module helps our optimizer to converge to a better solution.
Experiments on real and synthetic datasets show that our method could converge to good result, even starting from random initialization, while previous methods usually re-quired more careful initialization. As shown in Figure 1, we compare RAGO with various MRA methods on the synthetic datasets in terms of average mean angular error.
RAGO outperforms these approaches after 2 iterations.
Our contributions can be summarized as follows:
• We present a novel end-to-end learning-to-optimize re-current graph neural network for MRA.
• We decouple an MRA problem to multiple SRA prob-lems, leading to better results and learning without gauge ambiguity.
• We propose to rectify the relative orientations during optimization to handle outliers and noises.
• Our method outperforms state-of-the-art methods on multiple real and synthetic datasets. 2.