Abstract
Spotting graphical symbols from the computer-aided de-sign (CAD) drawings is essential to many industrial appli-cations. Different from raster images, CAD drawings are vector graphics consisting of geometric primitives such as segments, arcs, and circles. By treating each CAD draw-ing as a graph, we propose a novel graph attention net-work GAT-CADNet to solve the panoptic symbol spotting problem: vertex features derived from the GAT branch are mapped to semantic labels, while their attention scores are cascaded and mapped to instance prediction. Our key con-tributions are three-fold: 1) the instance symbol spotting task is formulated as a subgraph detection problem and solved by predicting the adjacency matrix; 2) a relative spatial encoding (RSE) module explicitly encodes the rel-ative positional and geometric relation among vertices to enhance the vertex attention; 3) a cascaded edge encod-ing (CEE) module extracts vertex attentions from multiple stages of GAT and treats them as edge encoding to predict the adjacency matrix. The proposed GAT-CADNet is intu-itive yet effective and manages to solve the panoptic sym-bol spotting problem in one consolidated network. Exten-sive experiments and ablation studies on the public bench-mark show that our graph-based approach surpasses exist-ing state-of-the-art methods by a large margin. (a) CAD drawing (b) Panoptic symbol spotting (c) Reconstructed BIM model
Figure 1. A patch of floor plan (a) and its panoptic symbol spotting results (b), where line semantics are color coded and instances are presented by translucent rectangles. The BIM model (c) with com-plete semantic and accurate geometry can be reconstructed from such annotated floor plan. We only show 3D model of wall, win-dows and doors for the sake of clarity. 1.

Introduction
Computer-aided design (CAD) is the use of computers to generate digital 2D or 3D illustrations of a product, aiding the creation, modification, analysis, or optimization process during designing and manufacturing. This technology has been widely used in modern architecture, engineering and construction (AEC) industries. The CAD drawings usu-*Equal contribution.
†Corresponding author. ally convey accurate geometry, rich semantic, and domain-specific knowledge of a product design, with basic geomet-ric primitives, such as segments, arcs, circles, and ellipses, as illustrated in Figs. 1a and 1b.
Spotting and recognizing symbols from the CAD draw-ings is the first step towards understanding its content, which is crucial to many real-world industrial applications.
For example, building information modeling (BIM) has growing demand in various architecture engineering ar-(a) (b) (c)
Figure 2. Illustration of the panoptic symbol spotting in a bath-room. Symbols of countable things (a), and uncountalbe stuff, e.g., wall (b). The panoptic symbol spotting proposed by [15] considers both types of symbols in a unified scheme (c). eas such as pipe arrangement, construction inspection and equipment maintenance. A floor plan usually contains com-plete details of a storey in an orthogonal top-down view.
Therefore, a BIM model can be precisely reconstructed from a group of 2D floor plans with accurate semantic and instance annotations, as demonstrated in Fig. 1c.
Traditional symbol spotting usually deals with instance symbols representing countable things [32], like table, sofa, and bed. Following the idea in [23], Fan et al. [15] ex-tended the definition with recognizing semantic of uncount-able stuff, and named it panoptic symbol spotting, as shown in Fig. 2. Therefore, all components in a CAD drawing are covered in one task altogether. For example, the wall represented by a group of parallel lines was properly han-dled by [15], which however was treated as background by [27, 28, 33, 35].
Large-scale dataset of high quality annotations is the fundamental ingredient to recent advances in supervised methods with deep learning, e.g., ImageNet [10] for im-age classification, COCO [26] for image detection, and
ShapeNet [2] for 3D shape analysis. Existing datasets for symbol spotting on floor plan, i.e., SESYD [9] and FPLAN-POLY [34], are either synthetic, or inaccurate, both with only a few hundreds of samples. Fan et al. [15] built the first large-scale real-world FloorPlanCAD dataset of over 10, 000 floor plans in the form of vector graphics, and pro-vided line-grained panoptic annotations.
CAD drawings are composed of domain-specific items, which are usually represented by abstract symbols. Human perception of CAD drawings is usually a multi-modal cross-context reference process requiring strong domain related knowledge. Meanwhile, the large intra-class variance and small inter-class dissimilarity of symbols make it a more challenging task for computers, as shown in Fig. 3.
Representing a CAD drawing as a graph of primitives is an intuitive way to retain the property of vector graphics, and has been proven effective for the semantic symbol spot-ting task in [15]. In this work, we present a novel graph attention network GAT-CADNet to solve the panoptic sym-bol spotting problem. The network achieved state-of-the-art (a) Tables. (b) Wall, window, bay window, and curtain wall are high lighted in red.
Figure 3. The inter-class variance (a) and intra-class similarity (b) in the public FloorPlanCAD dataset. performance and our main contributions are:
• We formulate the instance symbol spotting task as a subgraph detection problem, and solve it by predicting the adjacency matrix.
• We explicitly encode the relative relation among ver-tices, using a relative spatial encoding (RSE) module, to enhance the vertex attention.
• We treat the vertex attention as edge encoding for pre-dicting the adjacency matrix, and design a cascaded edge encoding (CEE) module to aggregate vertex at-tentions from multiple GAT stages. 2.