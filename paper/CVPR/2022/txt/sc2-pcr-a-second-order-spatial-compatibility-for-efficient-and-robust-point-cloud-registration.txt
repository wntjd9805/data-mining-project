Abstract
In this paper, we present a second order spatial compat-ibility (SC2) measure based method for efficient and robust point cloud registration (PCR), called SC2-PCR 1. Firstly, we propose a second order spatial compatibility (SC2) mea-sure to compute the similarity between correspondences. It considers the global compatibility instead of local consis-tency, allowing for more distinctive clustering between in-liers and outliers at early stage. Based on this measure, our registration pipeline employs a global spectral technique to find some reliable seeds from the initial correspondences.
Then we design a two-stage strategy to expand each seed to a consensus set based on the SC2 measure matrix. Finally, we feed each consensus set to a weighted SVD algorithm to generate a candidate rigid transformation and select the best model as the final result. Our method can guarantee to find a certain number of outlier-free consensus sets us-ing fewer samplings, making the model estimation more ef-ficient and robust. In addition, the proposed SC2 measure is general and can be easily plugged into deep learning based frameworks. Extensive experiments are carried out to in-vestigate the performance of our method. 1.

Introduction
The alignment of two 3D scans of the same scene, known as Point Cloud Registration(PCR), plays an important role in areas such as Simultaneous Localization and Mapping (SLAM) [7, 24, 40], augmented reality [4, 11] and robotic-s applications [34]. A canonical solution first establishes feature correspondences and then estimates the 3D rotation
∗Corresponding author. 1Code will be available
ZhiChen902/SC2-PCR. at https : / / github . com /
Figure 1. (a): A toy example in which red and green line segments (b): The first order represent outliers and inliers, respectively. compatibility matrix of (a). As highlighted by yellow, the outlier-s have very high compatibility scores with some inliers. (c): A binarized compatibility matrix of (b) after thresholding. (d): The proposed second order compatibility matrix of (a). By contrast, the values in the rows and columns of the outliers are small. and translation that can best align the shared parts. How-ever, due to challenges such as partial overlap or feature ambiguity, model estimation is prone to outliers in the cor-respondences, leading to inaccurate or wrong alignment.
RANSAC [25] pioneers the iterative sampling strategy for model estimation. However, it needs more time to con-verge or sometimes there is no guarantee of an accurate so-lution due to massive outliers. Spatial Compatibility (SC)
[5, 35, 45, 57] is a widely used similarity measure for boost-ing the robustness and efficiency of the rigid transformation estimation. It assumes that two correspondences will have higher score if the difference of spatial distance between 16| in Fig. 1(a), is minor. them, e.g. |d12 − d 12| or |d16 − d
′
′
Thus, sampling from compatible correspondences increas-es the probability of getting inliers. However, such kind of first order metric still suffers from outliers due to locality and ambiguity. Fig. 1(b) is the spatial compatibility matrix of the correspondences in Fig. 1(a). As we can see from the yellow cells, c6 and c7 are outliers but they show high compatibility scores with some inliers by chance. As a re-sult, the outliers would be inevitably involved in the model estimation process, leading to performance deterioration.
In this paper, we propose a new global measure of the similarity between two correspondences. Specifically, we first binarize the spatial compatibility matrix into the hard form, as shown in Fig. 1 (c). Then, for two correspon-dences which are compatible, we compute the number of their commonly compatible correspondences in the global set. That is, we compute the number of correspondences that are simultaneously compatible with both of them as the new similarity between them. The globally common com-patibility is set to 0 for any two incompatible correspon-dences. Therefore, the similarity of two inliers is at least the number of inliers excluding themselves among all the correspondences. However, the outliers do not have such good properties. A toy example is shown in Fig. 1. There are five inliers {c1,c2, c3, c4, c5} and two outliers {c6, c7} in Fig. 1 (a). From Fig. 1 (b) and Fig. 1 (c), we can see that the outliers c6 and c7 are compatible with some inliers, and the inliers are compatible with each other. But from Fig. 1 (d), we can see that the similarities between any two inliers are large while the similarities between the outliers with the other correspondences are small. To be specific, in Fig. 1 (d), the similarities within the inliers {c1, c2, c3, c4, c5} are no less than 3, while the similarities related with the outliers
{c6, c7} are no more than 1. Therefore, the global compati-bility matrix in Fig. 1 (d) can better distinguish inliers from outliers. Since the new measure can be expressed as the ma-trix product of the traditional first order metric (See Eq. 8), we name it as the second order spatial compatibility (SC2).
The proposed second order spatial compatibility mea-sure SC2 has several advantages. 1) The inliers are much easier distinguished from the outliers. Suppose we have m inliers in n correspondences. The scores between any t-wo inliers would be no less than m-2. However, its difficult for an outlier to be simultaneously compatible with multiple correspondences and the score for it will be much smaller. 2) The traditional algorithms such as RANSAC and its vari-ants [21, 25, 42, 53] need a large number of randomly sam-plings to find an outlier-free set for robust model estima-tion. However, based on the proposed SC2 matrix, for each row vector corresponding to an inlier, we can easily find an outlier-free set by selecting the top k correspondences with the highest scores. In this way, the m valid samplings can be obtained by traversing all the n rows of the SC2 matrix.
Therefore, we can ensure m reliable model estimations by only n samplings, which makes the model estimation more efficient and robust. 3) We theoretically prove that the SC2 matrix significantly reduces the probability of wrong sam-pling from a probabilistic view. We define an error event, in which the score between two inliers is smaller than that between an inlier and an outlier. By computing the proba-bility distributions of this event for both the traditional first order metric and our second order metric, the SC2 matrix is much more robust to obtain reliable sampling (see Fig. 3).
Based on the SC2 measure, we design a full pipeline for point cloud registration, called SC2-PCR. Following [5, 14, 50], it first selects several seeds that are likely to be inliers.
Then we select a consensus set for each seed by finding those having the highest SC2 scores with it.
In order to further exclude outliers, a two-stage sampling strategy is carried out in a coarse-to-fine manner. Finally, we use the weighted SVD to estimate a tentative model for each seed
In a nutshell, and select the best one as the final output. this paper distinguishes itself from existing methods in the following aspects.
• A second order spatial compatibility metric called SC2 is proposed. We theoretically prove that SC2 sig-nificantly reduces the probability of an outlier being involved in the consensus set. Since the proposed method encodes richer information beyond the first or-der metric, it enhances the robustness against outliers.
• Compared with state-of-the-art deep learning methods such as [5, 19, 35, 43], our method is a light weighted solution that does not need training. It shows no bias across different datasets and generalizes well on vari-ous scenarios, which is also shown in the experiments.
• The proposed method is general. Although we im-plement it in a handcrafted fashion, it could be easily plugged into other deep learning frameworks such as
PointDSC [5]. We show in the experiment that PointD-SC produces better results when combined with our method. 2.