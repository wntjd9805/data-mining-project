Abstract
Interactive segmentation allows users to extract target masks by making positive/negative clicks. Although ex-plored by many previous works, there is still a gap be-tween academic approaches and industrial needs: first, existing models are not efficient enough to work on low-power devices; second, they perform poorly when used to refine preexisting masks as they could not avoid destroying the correct part. FocalClick solves both issues at once by predicting and updating the mask in localized areas. For higher efficiency, we decompose the slow prediction on the entire image into two fast inferences on small crops: a coarse segmentation on the Target Crop, and a local re-finement on the Focus Crop. To make the model work with preexisting masks, we formulate a sub-task termed Inter-active Mask Correction, and propose Progressive Merge as the solution. Progressive Merge exploits morphologi-cal information to decide where to preserve and where to update, enabling users to refine any preexisting mask ef-fectively. FocalClick achieves competitive results against
SOTA methods with significantly smaller FLOPs.
It also shows significant superiority when making corrections on preexisting masks. Code and data will be released at github.com/XavierCHEN34/ClickSEG 1.

Introduction
In recent years, interactive segmentation has aroused in-It enables users terest from both academia and industry. to annotate masks conveniently using simple interactions like scribbles [1, 11, 21], boxes [20, 34, 40], or clicks [5, 18, 27, 35, 36, 44]. In this work, we focus on the click-based method. Under this setting, the users successively place positive/negative clicks (like the red/green points in Fig. 1) to define the foreground and background, and the model re-turns new predictions after each user click.
The basic paradigm [44] for click-based interactive seg-mentation is using Gaussian maps or disks to represent the clicks, then concatenating the click maps with the image as input, and sending it to a segmentation model to predict
Figure 1. After receiving a new click, FocalClick first selects a
Target Crop (yellow box) based on the previous mask to execute coarse segmentation. Then, we pick a Focus Crop (red box) to make refinement according to the maximum different region be-tween the coarse prediction and the previous mask. At last, Pro-gressive Merge selects part of the new prediction to update. the mask. Based on this paradigm, previous works make improvements from different angles and keep improving
SOTA. However, when applying them to practical scenar-ios, we find them not satisfactory in the following aspects.
Efficiency on low-power devices. A good annotation tool is expected to produce fine masks with quick responses.
Most previous works only focus on accuracy and take ad-vantage of big models and high-resolution inputs. How-ever, they struggle when deployed on personal laptops, edge devices, or web service applications with high volume re-quests. When we attempt to reduce the input size for faster turnover, their accuracy drops significantly.
Working with preexisting mask. In practical applica-tions, there are not many mask annotation tasks that need to start from scratch. Preexisting masks are often provided by offline models or other forms of pre-processing. Mak-ing modifications on them could facilitate the annotation.
Nevertheless, previous methods are not compatible with ex-ternally given masks. Most works [5, 18, 22, 27, 35, 44] do not consider the previous mask as input. Although [10, 36] concatenate the previous mask with the input image and the click maps, they do not perform well. As shown in
Fig. 2, RITM [36] hardly removes the mask of the cabin
(a) Initial Mask (b) After Editing
Figure 2. Difficulties of using RITM [36] to modify an initial mask. The negative clicks are marked in green in (b). with several negative clicks. Moreover, it causes unex-pected changes that are far away from the user clicks.
Facing those issues, we give an in-depth analysis of the existing pipeline. We notice that, during annotation, as the clicks are added successively by observing the current mask, each click has a specific target. For example, the tar-get of the new click in Fig. 1 is adding the racquet into the foreground. In this case, the racquet region requires more attention than the player and the tennis court. However, previous works ignore this intention and make new predic-tions equally for all pixels after each click, which causes the two aforementioned issues: first, the well-predicted re-gion would be computed repeatedly, causing computation redundancy; second, all pixels of the previous mask would be updated, making the model fail to preserve the details given in the initial masks.
With the above analysis in mind, we propose FocalClick to make the model focus on noteworthy patches. To get higher efficiency, FocalClick only makes predictions on the patch that really needs re-calculation. To make localized corrections on preexisting masks, FocalClick only updates the mask in the region that the user intends to modify and retains predictions in other regions.
• Efficient pipeline. As in Fig. 1, given a new click, we first select a Target Crop according to the existing mask. This Target Crop would be resized into low res-olution and execute coarse segmentation. Afterward, we localize a small region that the user intends to mod-ify and send it into Refiner to extract the details. Thus, we decompose the time-consuming full image infer-ence into two fast local predictions.
•
Interactive mask correction. We formulate a new task termed Interactive Mask Correction and construct a benchmark to evaluate the ability to modify preexist-ing masks. We also propose Progressive Merge as the solution. Progressive Merge carries out morphological analysis of the previous masks and the current predic-tions to decide where to update and preserve. Thus, the correct part would not be destroyed.
In general, our contributions could be summarized as fol-lows: 1) FocalClick is the first pipeline that deals with in-teractive segmentation from a completely local view, which reaches SOTA with significantly smaller FLOPs. 2) We introduce the first benchmark and sub-task to evaluate the ability to correct preexisting masks, and propose corre-sponding solutions. 3) This work makes interactive seg-mentation better meet the practical needs, which would be beneficial for both the industrial and academic world. 2.