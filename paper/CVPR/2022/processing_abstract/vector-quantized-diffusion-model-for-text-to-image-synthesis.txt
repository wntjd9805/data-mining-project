We present the vector quantized diffusion (VQ-Diffusion) model for text-to-image generation. This method is based on a vector quantized variational autoencoder (VQ-VAE) whose latent space is modeled by a conditional variant of the recently developed Denoising Diffusion Probabilis-tic Model (DDPM). We find that this latent-space method is well-suited for text-to-image generation tasks because it not only eliminates the unidirectional bias with exist-ing methods but also allows us to incorporate a mask-and-replace diffusion strategy to avoid the accumulation of er-rors, which is a serious problem with existing methods. Our experiments show that the VQ-Diffusion produces signif-icantly better text-to-image generation results when com-pared with conventional autoregressive (AR) models with similar numbers of parameters. Compared with previousGAN-based text-to-image methods, our VQ-Diffusion can handle more complex scenes and improve the synthesized image quality by a large margin. Finally, we show that the image generation computation in our method can be made highly efficient by reparameterization. With traditional AR methods, the text-to-image generation time increases lin-early with the output image resolution and hence is quite time consuming even for normal size images. The VQ-Diffusion allows us to achieve a better trade-off between quality and speed. Our experiments indicate that the VQ-Diffusion model with the reparameterization is fifteen times faster than traditional AR methods while achieving a bet-ter image quality. The code and models are available at https://github.com/cientgu/VQ-Diffusion. 