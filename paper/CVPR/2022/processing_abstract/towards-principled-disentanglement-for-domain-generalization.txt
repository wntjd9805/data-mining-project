A fundamental challenge for machine learning models is generalizing to out-of-distribution (OOD) data, in part due to spurious correlations. To tackle this challenge, weﬁrst formalize the OOD generalization problem as con-strained optimization, called Disentanglement-constrainedDomain Generalization (DDG). We relax this non-trivial constrained optimization problem to a tractable form withﬁnite-dimensional parameterization and empirical approxi-mation. Then a theoretical analysis of the extent to which the above transformations deviates from the original problem is provided. Based on the transformation, we propose a primal-dual algorithm for joint representation disentanglement and domain generalization. In contrast to traditional approaches based on domain adversarial training and domain labels,DDG jointly learns semantic and variation encoders for disentanglement, enabling ﬂexible manipulation and aug-mentation on training data. DDG aims to learn intrinsic representations of semantic concepts that are invariant to nuisance factors and generalizable across domains. Compre-hensive experiments on popular benchmarks show that DDG can achieve competitive OOD performance and uncover interpretable salient structures within data. 