This paper addresses the problem of image restoration by developing an all-in-one method that can recover images from various unknown corruption types and levels. The proposed solution is called AirNet, which consists of two neural modules: Contrastive-Based Degraded Encoder (CBDE) and Degradation-Guided Restoration Network (DGRN). AirNet offers two main advantages. Firstly, it is an all-in-one solution that can recover different degraded images within a single network. Secondly, AirNet does not rely on prior knowledge of corruption types and levels, instead utilizing the observed corrupted image for inference. These advantages make AirNet more flexible and cost-effective in real-world scenarios where corruption priors are unknown and degradation varies over space and time. Extensive experiments demonstrate that AirNet outperforms 17 other image restoration baselines on four challenging datasets. The code for AirNet is available at https://github.com/XLearning-SCU/2022-CVPR-AirNet.