The task of recognizing handwritten mathematical expressions (HMER) is challenging but has many potential applications. Previous methods for HMER have achieved impressive results using an encoder-decoder architecture. However, these methods follow the approach of predicting "from one character to another," which often leads to errors due to the complex structures of math expressions or difficult handwriting. In this study, we propose a simple and efficient method for HMER that incorporates syntax information into an encoder-decoder network. We introduce a set of grammar rules to convert the LaTeX markup sequence of each expression into a parsing tree. Then, we model the prediction of the markup sequence as a tree traversal process using a deep neural network. This approach allows us to effectively capture the syntax context of expressions, reducing errors in structure prediction for HMER. We conducted experiments on three benchmark datasets, which demonstrated that our method outperforms previous approaches in terms of recognition performance. To further validate the effectiveness of our method, we created a large-scale dataset with 100,000 handwritten mathematical expression images from ten thousand writers. We will make the source code, new dataset, and pre-trained models publicly available.