The authenticity of digital images is increasingly questionable due to the abuse of image editing software and the widespread use of online social networks (OSNs) to transmit forged images for fake news and rumors. However, the lossy operations used by OSNs, such as compression and resizing, make it difficult to detect image forgery. To address this issue, this study proposes a novel robust training scheme that analyzes the noise introduced by OSNs and separates it into predictable and unseen noise components. The predictable noise represents the noise introduced by known operations of OSNs, while the unseen noise accounts for both the completion of the predictable noise and the defects of the forgery detector itself. The modelled noise is then incorporated into a robust training framework, significantly improving the forgery detection's robustness. Experimental results demonstrate the superiority of the proposed scheme compared to other state-of-the-art competitors. Additionally, a public dataset of forgeries is created based on existing datasets and popular OSNs, and a forgery detection system developed using the proposed scheme achieved the top ranking in a certificate forgery detection competition. The source code and dataset are available at https://github.com/HighwayWu/ImageForensicsOSN.