Multi-object tracking (MOT) is a fundamental task in computer vision, with applications in visual surveillance and autonomous driving. The "tracking-by-detection" paradigm, which generates detection hypotheses and associates them over time, has become dominant in the field. Among various methods, minimum-cost network-flow based approaches have gained attention due to their fast inference property. However, the success of these methods relies on designing a proper cost function. Previous works have focused on learning robust objective functions using neural networks, but they only consider limited temporal contexts during training. In this paper, we propose a bi-level optimization technique with implicit function theorem to perform end-to-end learning of a global cost function for network-flow based tracking. Our framework incorporates a stronger observation model and achieves competitive results on popular MOT benchmarks. Our contributions include adopting a classical formulation, proposing a bi-level optimization technique, and addressing the non-differentiability problem of the constrained linear program.