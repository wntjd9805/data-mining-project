Video compression systems are crucial for transmitting and storing large amounts of videos. While conventional methods have achieved promising results, they cannot be optimized using large-scale video datasets. Recently, deep video compression works have been proposed, but most of them follow a hybrid coding framework. Thus, there is a need to generate more accurate motion information for better motion compensation and design more effective motion compression and residual compression approaches. This paper proposes a coarse-to-fine deep video compression framework that utilizes a two-stage motion compensation strategy. It introduces two efficient mode prediction methods for motion compression and residual compression, inspired by rate-distortion optimization techniques in traditional codecs. The proposed framework achieves comparable video compression performance with H265(HM) and generally outperforms the latest standard VTM in terms of PSNR and MS-SSIM. Overall, the contributions of this paper include the proposed deep video compression framework, the hyperprior-guided mode prediction methods, and the comprehensive experimental analysis on various datasets.