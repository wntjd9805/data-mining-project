This paper focuses on the generation of stylish fonts using deep learning methods. Building commercial font libraries is expensive and time-consuming, especially for languages with a large number of characters. Automatic font generation with deep learning has become an attractive alternative, aiming to create font libraries using only a few reference characters. Previous works have used Generative Adversarial Networks (GANs) and image-to-image translation schemes for font generation. Some approaches have explored few-shot font generation, where the style representation is learned from a few reference exemplars. These works have achieved significant improvements in generated glyph quality with limited references. However, they mostly focused on component-wise styles and didn't consider finer-grained styles. The content and style entanglement also makes it challenging to ensure consistency in component-wise styles. To address these issues, this paper introduces a novel approach called FSFont for few-shot font generation. The approach uses a cross-attention based style aggregation module to learn the spatial correspondence between references and target glyphs, enabling the extraction and aggregation of fine-grained local styles. The model also includes a self-reconstruction branch to enhance detail capture and improve output quality. Additionally, a strategy for automated reference selection is developed based on compositional rules, allowing for better exploitation of component features. Overall, the proposed approach achieves state-of-the-art font generation results and offers insights into the relationship between characters and references.