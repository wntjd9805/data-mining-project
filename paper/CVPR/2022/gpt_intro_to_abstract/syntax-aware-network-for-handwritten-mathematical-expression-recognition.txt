This paper investigates offline handwritten mathematical expression recognition (HMER), an important OCR task required by many applications like office automation, answer sheet correction, and assistance for visually disabled persons to understand mathematics. Previous deep learning-based methods for text recognition in images-to-sequences manner are good at handling text lines but may fail to deal with complex structures such as mathematical expressions. This paper proposes a syntax-aware network (SAN) that incorporates grammatical constraints and feature learning to effectively parse handwritten mathematical expressions according to syntactic relationships. The SAN model follows a grammar tree traversal process, with each subtree representing a significant component of a mathematical expression, thereby encoding the syntactic relationships of adjacent components during the parsing procedure. Experimental results on popular datasets and a newly collected dataset show that the SAN consistently achieves higher recognition rates compared to state-of-the-art methods, demonstrating the advantage of embedding syntax cues for HMER. The main contributions of this paper are the proposed SAN and the large and diverse dataset HME100K, which includes longer and more complicated handwriting samples, making it useful for promoting robust algorithms for real-world applications.