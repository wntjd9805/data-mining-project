We present a differentiable architecture for simultaneous semantic and instance segmentation, also known as panoptic segmentation. Our architecture consists of a convolutional neural network and a solver for a multiway cut problem. This solver incorporates semantic and boundary predictions to generate a panoptic labeling. By backpropagating the gradient through the optimization problem, we can maximize a smooth surrogate of the panoptic quality metric. Experimental results on Cityscapes and COCO datasets demonstrate the superiority of our approach compared to similar methods. Our method, called COPS (Combinatorial Optimization for Panoptic Segmentation), successfully combines optimization and deep learning in tackling large-scale real-world problems, providing valuable insights and benefits for training such architectures.