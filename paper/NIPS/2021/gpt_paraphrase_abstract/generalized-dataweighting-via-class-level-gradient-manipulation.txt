Label noise and class imbalance are common problems in real-world datasets. Current methods address these issues by reweighting instances using clean and unbiased data. However, these methods overlook the class-level information present in each instance, which can further improve performance. In this paper, we propose Generalized Data Weighting (GDW) to simultaneously address label noise and class imbalance by manipulating gradients at the class level. GDW achieves significant performance improvement on both issues. Additionally, GDW efficiently obtains class-level weights without introducing extra computational cost compared to instance weighting methods. It performs a gradient descent step on class-level weights using intermediate gradients. Extensive experiments demonstrate the effectiveness of GDW, surpassing state-of-the-art methods by 2.56% under the 60% uniform noise setting in CIFAR10. Our code is available at the following GitHub repository: https://github.com/GGchen1997/GDW-NIPS2021.