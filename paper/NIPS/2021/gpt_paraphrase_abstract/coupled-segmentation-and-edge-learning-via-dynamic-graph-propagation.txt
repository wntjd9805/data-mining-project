This study explores the relationship between image segmentation and edge detection in perceptual grouping. The researchers propose an end-to-end framework that combines these two tasks, using edges as similarity cues to guide segmentation. The framework includes a recurrent module called the dynamic graph propagation (DGP) layer, which performs message passing on dynamically constructed graphs. The layer utilizes learned gating to select neighboring pixels for message passing and incorporates an edge signal to refine the segmentation. Experimental results demonstrate that this framework allows both tasks to mutually enhance each other. The best model achieved 83.7% mIoU in semantic segmentation and 78.7% maximum F-score in semantic edge detection on Cityscapes validation. Additionally, the proposed method improves zero-shot robustness on Cityscapes with natural corruptions (Cityscapes-C).