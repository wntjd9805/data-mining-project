Universal Semi-Supervised Learning (UniSSL) aims to address the open-set problem, where both the class distribution and feature distribution differ between labeled and unlabeled datasets. This issue hampers the practical implementation of traditional SSL methods. Existing SSL methods only focus on one scenario of class distribution mismatch and neglect the feature distribution mismatch. However, we consider a more general case where both class and feature distribution mismatches exist. In this regard, we propose the "Class-shAring data detection and Feature Adaptation" (CAFA) framework, which does not require any prior knowledge of the class relationship between the labeled and unlabeled datasets. CAFA employs a novel scoring strategy to identify the data in the shared class set, followed by domain adaptation to fully utilize the value of the detected class-sharing data for improved semi-supervised consistency training. Our method is validated through extensive experiments on various benchmark datasets, demonstrating its effectiveness in tackling open-set problems.