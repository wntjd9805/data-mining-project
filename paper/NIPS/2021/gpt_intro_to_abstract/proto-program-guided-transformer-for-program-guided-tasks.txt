In this paper, we introduce program-guided tasks as a means to facilitate communication between machines and humans. We highlight the benefits of using programs as a guiding mechanism, including their explicitness, cleanliness, and the ability to express complex reasoning processes. However, there is a lack of research on learning to follow program guidance, and existing approaches often rely on ad-hoc program executors for specific functions and tasks, limiting their generalization and scalability. To address this, we propose the Program-guided Transformer (ProTo), which combines the representation ability of transformers with symbolic program control flow. ProTo leverages program semantics and explicit program structure through efficient attention mechanisms, enabling the agent to follow the complex structure of the program, perceive the specification, and ground program semantics. We evaluate ProTo on program-guided visual reasoning and program-guided policy learning tasks, achieving superior performance compared to previous methods. Our contributions include formulating program-guided tasks, proposing ProTo as a solution, and conducting extensive experiments to demonstrate its effectiveness. The code and pre-trained models will be made available upon publication.