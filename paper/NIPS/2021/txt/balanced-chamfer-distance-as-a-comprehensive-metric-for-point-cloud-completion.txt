Abstract
Chamfer Distance (CD) and Earth Mover’s Distance (EMD) are two broadly adopted metrics for measuring the similarity between two point sets. However, CD is usually insensitive to mismatched local density, and EMD is usually dominated by global distribution while overlooks the ﬁdelity of detailed structures. Besides, their unbounded value range induces a heavy inﬂuence from the outliers. These defects prevent them from providing a consistent evaluation. To tackle these problems, we propose a new similarity measure named Density-aware Chamfer Distance (DCD). It is derived from CD and beneﬁts from several desirable properties: 1) it can detect disparity of density distributions and is thus a more intensive measure of similarity compared to CD; 2) it is stricter with detailed structures and signiﬁcantly more computationally efﬁcient than EMD; 3) the bounded value range encourages a more stable and reasonable evaluation over the whole test set. We adopt DCD to evaluate the point cloud completion task, where experimental results show that
DCD pays attention to both the overall structure and local geometric details and provides a more reliable evaluation even when CD and EMD contradict each other. We can also use DCD as the training loss, which outperforms the same model trained with CD loss on all three metrics. In addition, we propose a novel point discriminator module that estimates the priority for another guided down-sampling step, and it achieves noticeable improvements under DCD together with competitive results for both CD and EMD. We hope our work could pave the way for a more comprehensive and practical point cloud similarity evaluation. Our code will be available at https://github.com/wutong16/Density_aware_
Chamfer_Distance. 1

Introduction
Point cloud as one of the fundamental 3D representations is attracting increasing attention due to its efﬁciency, ﬂexibility, and direct connection to real-world objects through 3D scanning devices. It has been employed in a wide range of application scenarios and studied for various tasks [1, 4, 7, 11, 25, 33, 35, 27, 21, 36, 38]. A proper similarity measure between two point clouds is always a crucial aspect for both guiding the training process and providing a fair and reasonable evaluation.
However, this is a challenging design considering the unordered and irregular data form and varying point numbers.
Chamfer Distance (CD) and Earth Mover’s Distance (EMD) are two of the most universally acknowl-edged metrics in various point cloud tasks. CD is a nearest-neighbour-based method and beneﬁts from its efﬁcient computation and ﬂexible applicability for point sets with different point numbers. EMD 35th Conference on Neural Information Processing Systems (NeurIPS 2021).
Figure 1: To generate the examples on the left, a complete yet noisy shape (blue) with n points is combined with a partial yet clean shape (pink) with 2048 points and then down-sampled back to 2048 points via FPS. Four point set distances are calculated between the generated shape and the ground truth. The results are averaged over the whole dataset to get the 3D histograms on the right: CD and HD are not sensitive to the mismatched density while highly inﬂuenced by noise when the intensity achieves a certain level; EMD and DCD share a similar pattern as n changes, but DCD is more sensitive to the noise which also represents detailed structures. relies on solving an optimization problem to ﬁnd the least expensive one-to-one transportation ﬂow between two point sets. Although sometimes considered to be more faithful to visual quality than
CD [1, 13], it is signiﬁcantly more computationally expensive. The desirable properties of a good similarity metric can be different across application scenarios. 1) For perception and registration, it should be robust to sampling strategies and noisy points on detecting the similarity between the continuous surfaces represented by the discrete points. 2) For modelling and generation, it should be stricter with the quality of local point distributions, which is also crucial for visual quality. We mainly focus on the second aspect in this paper.
Take a closer look at the two metrics above. The formulation of CD sometimes suffers from its intrinsic deﬁciencies: being insensitive to different density distributions while signiﬁcantly inﬂuenced by outliers [22]. In particular, we specialize one concept closely related to visual quality, namely a matched density distribution between two point sets. This can also be denoted as ’balance’, assuming the ground truth is uniformly distributed. We visualize the issue in Fig. 1 through the task of point cloud completion: 1) under a low noise level, CD hardly changes with the imbalance ratio; 2) it increases dramatically once the noise intensity rises to some extent; 3) under a high noise level, higher imbalance even results in a lower CD, which leads to a tricky operation to reduce CD for the task: increasing the point density in the seen area with assured accuracy while reducing it in the unseen area to lower down the risk from abnormal points. But severe imbalance also signiﬁcantly affects the global appearance. On the contrary, EMD can steadily detect the change of distribution in Fig. 1.
However, the requirement for one-to-one mapping is usually over harsh. Consequently, the optima of the transportation problem is dominated by the global distribution while ignoring the ﬁne-structured local details [5], as to be described in Sec. 3. Therefore, both CD and EMD are not ideally suitable for evaluating the quality of the generated shapes.
In this work, we mainly focus on CD’s injustice as an evaluation metric and propose a new similarity measure named Density-aware Chamfer Distance (DCD) to tackle the challenges above. Speciﬁcally,
DCD is derived from the original CD, while it beneﬁts from a higher sensitivity to distribution quality through a fraction term of query frequency and a higher tolerance to outliers through an approximation of Taylor Expansion. It shares a similar trend with EMD under a varying point distribution while being more computationally efﬁcient and better at capturing the details. Moreover, due to their different focus, CD and EMD often encounter divergence when evaluating different methods, which makes them less reliable as consistent metrics, as to be demonstrated in Sec. 5. We empirically observe that DCD usually provides a more consistent and reliable evaluation, especially when the 2
Table 1: Comparison of properties among different metrics.
Metrics assignment
CD
EMD
DCD nearest neighbour optimization nearest neighbour efﬁcient (cid:88)
× (cid:88) bounded density-aware
×
× (cid:88)
× (cid:88) (cid:88) detail-aware (cid:88)
× (cid:88) results of CD and EMD contradict each other. Note that the proposed metric is also beneﬁcial at dealing with ground truth with a non-uniform distribution such as curvature-based sampling, as to be discussed in the supplementary material.
Furthermore, we analyze the property of DCD as a loss function and compare it with L1 and
L2 versions of CD. We introduce minor adjustments to it that are critical for a better training process. We then propose to make better use of the information from the query frequency mentioned above and design an MLP-based point discriminator inspired by the recent success of implicit functions [18, 14, 19]. It is further integrated to our balanced design for a two-stage completion framework, where the output of the module can be viewed as the “importance” of each point and serve as priority for a following step of down-sampling. Finally, the guided down-sampling operation beneﬁts from removing outliers and preserving the critical points.
Extensive investigations are provided for the comparison among different metrics and methods for the task of point cloud completion. Experimental results validate that the proposed metric, Density-aware
Chamfer Distance, successfully overcomes the aforementioned issues of CD. DCD can provide a more reliable evaluation when CD and EMD contradict each other, and it is proved to be more faithful to visual quality in Sec. 5 and a user study in the supplementary material. We validate its capacity as a loss function on PCN [35] and VRCNet [17], showing that it not only helps reduce DCD itself but also signiﬁcantly lowers down the EMD metric and surprisingly reduces CD as well compared with the network trained with CD. Our proposed balanced design also gains noticeable improvement under the new metric, competitive results for both CD and EMD, and superior visual quality in the experiments. 2