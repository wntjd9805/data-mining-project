Abstract
Spatial verification is a crucial technique for particular object retrieval. It utilizes spatial information for the accurate detection of true positive images. However, existing query expansion and diffusion methods cannot efficiently propagate the spatial information in an ordinary graph with scalar edge weights, resulting in low recall or precision. To tackle these problems, we propose a novel hypergraph-based framework that efficiently propagates spatial information in query time and retrieves an object in the database accurately. Additionally, we propose using the image graphâ€™s structure information through community selection technique, to measure the accuracy of the initial search result and to provide correct starting points for hypergraph propagation without heavy spatial verification computations.
Experiment results on ROxford and RParis show that our method significantly outperforms the existing query expansion and diffusion methods. 1

Introduction
Image search is a fundamental problem in computer vision with numerous applications such as content-based image browsing [36, 19, 1], visual localization [2, 30], and 3D reconstruction [15, 31].
To retrieve the database images that contain the same object of a query, a search engine represents images using global or local features [5, 21, 33, 26, 3] that describe their similarities, and then performs a nearest neighbor search for the query image.
An object is depicted in various conditions in the real world [25]. Global features of images depicting the same object form a manifold in the feature space [39]. Euclidean-distance-based nearest neighbor search [20, 4] does not work well on this manifold. To improve the retrieval performance, query expansion [9, 13, 27, 3, 14] issues a new query by aggregating useful information of nearest neighbors of the prior query. Unfortunately, this approach only explores the neighborhood of very similar images, resulting in a low recall [16]. Diffusion [16, 39] explores more images on a neighborhood graph of the dataset. It, however, adopts false positive items in practice, leading to a low precision [25].
Spatial verification [23] uses spatial information to detect the true positive images. However, due to its heavy computational overhead, it is impractical to apply spatial verification to all the images during diffusion. This paper aims to pre-compute the spatial matching information of database images offline and quickly propagate them for a given query online. To achieve this goal, we propose a hypergraph propagation model. Our model efficiently builds a hypergraph for a given query and propagates the spatial relationship with the query through hyperedges in a sequence of images.
When the query image is not in the database, diffusion represents it using its top-ranked images in the initial search [16, 37]. However, not all the top-ranked images contain the object of the query [16, 25].
Some works [25, 6] show that applying spatial verification before diffusion improves the retrieval 35th Conference on Neural Information Processing Systems (NeurIPS 2021).
performance, but it requires heavy computational overheads [25, 9]. The second contribution of this paper is the proposal of an initial search technique, community selection, which reduces the overhead of spatial verification while maintaining high accuracy.
Experimental result shows that our hypergraph propagation significantly outperforms the existing query expansion and diffusion methods. On the hard protocol of the ROxford dataset, our hypergraph-propagation-based approach achieves the impressive mAPs of 73.0 and 60.5 with and without R1M distractors, respectively.
In conclusion, our contributions are: 1) we propose a novel hypergraph model to efficiently propagate the spatial information in a sequence of images to improve the search performance; 2) we propose community selection to predict the accuracy of the initial search and to provide correct starting points for hypergraph diffusion; 3) we achieve state-of-the-art performance on the ROxford dataset with and without R1M distractors. 2