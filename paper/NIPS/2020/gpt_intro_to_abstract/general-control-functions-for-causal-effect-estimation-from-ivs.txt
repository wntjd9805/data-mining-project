Observational data is commonly used to estimate causal effects in various disciplines, but it requires careful handling of confounders that influence both treatment and outcome. This paper focuses on causal estimation methods using control functions, such as the two-stage least-squares method and the traditional control function method. However, these methods can break down under certain conditions. The authors propose the general control function method (GCFN), which uses variational decoupling (VDE) to construct a general control function that satisfies ignorability and positivity. By leveraging the strong instrumental variable, GCFN enables causal identification without relying on structural assumptions about the outcome process. The authors also present a semi-supervised version of GCFN for scenarios with partially observed confounders. Experimental results demonstrate the effectiveness of GCFN in accurately estimating causal effects compared to other existing methods.