CTR prediction is an important task for e-commerce search engines, and user behavior modeling plays a crucial role in this process. However, existing attention mechanisms for user behavior modeling have limitations in e-commerce scenarios. They assume that a user's interest must be covered by historical behaviors, which is not always true. Additionally, these mechanisms treat all historical behaviors independently, without considering their hierarchical relationship with queries. To address these limitations, we propose Kalman Filtering Attention (KFAtt), which extends the attention beyond individual user behaviors and incorporates a global prior. We also introduce KFAtt-freq, which captures the homogeneity of behaviors under the same query. We validate our proposed mechanisms through theoretical analysis and experiments and demonstrate their effectiveness and adaptability. Our KFAtt-based behavior modeling module has been successfully deployed in the search engine of JD.com, serving millions of active users.