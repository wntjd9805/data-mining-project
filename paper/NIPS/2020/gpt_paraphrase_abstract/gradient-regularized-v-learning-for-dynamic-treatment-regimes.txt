Deciding on the optimal treatment for a patient is a critical challenge in medicine. Dynamic treatment regimes (DTRs) provide a sequence of treatment rules based on the patient's history and evolving variables. However, evaluating and learning DTRs using offline data is difficult due to biased results caused by time-varying factors. This can lead to suboptimal treatment decisions. To address this issue, we propose Gradient Regularized V-learning (GRV), a new method for estimating the value function of a DTR. GRV regularizes outcome and propensity score models based on semiparametric estimation theory. Our approach produces efficient and stable estimators in finite samples. Through simulation studies and real-world medical data, we demonstrate the superiority of our method in evaluating and learning DTRs, offering improved treatment options for patients over time.