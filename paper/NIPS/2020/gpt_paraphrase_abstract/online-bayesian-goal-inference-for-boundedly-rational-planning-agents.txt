This abstract discusses the ability of humans to infer the goals of others by observing their actions, even when those actions result in failure. The goal is to enable machines to have similar capabilities. The authors present an architecture that can infer an agent's goals in real-time based on both optimal and non-optimal sequences of actions. This architecture models agents as planners with limited rationality, taking into account suboptimal behavior. The models are probabilistic programs, allowing for efficient Bayesian inference over an agent's goals and planning processes. To perform this inference, a Sequential InversePlan Search (SIPS) algorithm is developed, which extends inferred plans incrementally as new actions are observed. Experiments demonstrate that this architecture outperforms other methods in accurately inferring goals from both successful and unsuccessful trajectories, while also generalizing across domains with different structures and sparse rewards.