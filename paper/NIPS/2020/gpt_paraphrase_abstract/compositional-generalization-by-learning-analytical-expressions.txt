Compositional generalization, the ability to combine known parts in new ways, is a fundamental cognitive skill. However, current neural network models struggle with this capability. Drawing inspiration from cognitive research, which suggests that compositionality can be captured by symbolic functions, we propose a novel approach that combines a memory-augmented neural model with analytical expressions. Our model, consisting of two neural modules called Composer and Solver, aligns with cognitive theories and can be trained end-to-end using a hierarchical reinforcement learning algorithm. Experimental results on the widely-used SCAN benchmark show that our model excels in compositional generalization, achieving 100% accuracy in solving all previously challenging tasks.