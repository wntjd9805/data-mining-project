Click-through rate (CTR) prediction is a crucial task for e-commerce search engines. As search becomes more personalized, it is important to capture user interest using behavior data. Current algorithms for modeling user behavior use attention mechanisms to highlight relevant behaviors and suppress irrelevant ones. However, these attentions have two limitations. Firstly, they focus only on a single user's behaviors, which is not suitable for e-commerce where users often have new demands unrelated to their past behaviors. Secondly, these attentions are biased towards frequent behaviors, which is unreasonable as high frequency does not always indicate importance. To address these limitations, we propose a new attention mechanism called Kalman Filtering Attention (KFAtt), which uses weighted pooling as a maximum a posteriori (MAP) estimation. KFAtt incorporates a priori and global statistics when few user behaviors are relevant. Additionally, it includes a frequency capping mechanism to correct the bias towards frequent behaviors. Offline experiments and an Online A/B test demonstrate that KFAtt outperforms existing methods. KFAtt has been implemented in JD.com, a leading B2C e-commerce website in China, serving millions of active users.