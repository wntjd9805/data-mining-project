Abstract
In non-truthful auctions, agents’ utility for a strategy depends on the strategies of the opponents and also the prior distribution over their private types; the set of
Bayes Nash equilibria generally has an intricate dependence on the prior. Using the First Price Auction as our main demonstrating example, we show that ˜O(n/(cid:15)2) samples from the prior with n agents sufﬁce for an algorithm to learn the interim utilities for all monotone bidding strategies. As a consequence, this number of samples sufﬁce for learning all approximate equilibria. We give almost matching (up to polylog factors) lower bound on the sample complexity for learning utilities.
We also consider a setting where agents must pay a search cost to discover their own types. Drawing on a connection between this setting and the ﬁrst price auction, discovered recently by Kleinberg et al. (2016), we show that ˜O(n/(cid:15)2) samples sufﬁce for utilities and equilibria to be estimated in a near welfare-optimal descending auction in this setting. En route, we improve the sample complexity bound, recently obtained by Guo et al. (2019), for the Pandora’s Box problem, which is a classical model for sequential consumer search. 1

Introduction
Mechanism design devises systems in which multiple agents take strategic actions based on their private preferences (designated as types). For example, an auctioneer devises rules that determine an auction’s winner and payments, based on bidders’ actions (the bids); the bidders then, knowing the rule and their types — in this case their own values for the item at sale — strategize over their bids. The following task is central to many aspects of mechanism design: given agents’ strategies, evaluate each agent’s performance, or utility. To start with, agents are most often interested in predicting the performance of their strategies given what the other agents do; nowadays, auctioneers and third-party service providers often give guidance to bidding, and are interested in such evaluations as well. An auctioneer often would like to ﬁnd out if a proﬁle of strategies best respond to each other and are hence at equilibrium; revenue, welfare and surplus analysis at equilibrium is all based on utility estimation. Recent development in online ad auctions (such as the oCPX auctions) sees growing popularity of delegated bidding, where bidders entrust the auctioneer/platform with the task of bidding. Auctioneers in this scenario must estimate the bidders’ utilities given their bidding strategies. As another application of utility estimation, one may be interested in knowing how far a mechanism is from being incentive compatible, i.e., supposing all other agents bid their true values, how much incentive an agent would have to lie about her value (see, e.g., Balcan et al., 2019).
∗Tao Lin is now at Harvard University. This work was done when he was at Peking University and during a visit to the University of British Columbia. 34th Conference on Neural Information Processing Systems (NeurIPS 2020), Vancouver, Canada.
Since a bidder’s individual type is known only to herself but may greatly affect her actions and the payoff of everyone else — a scenario known as an incomplete information game — more is needed for utility prediction. The canonical paradigm assumes that each agent’s type is drawn from a distribution (Harsanyi, 1967). The utility prediction problem becomes, supposing agents other than i use given strategies and their types are drawn from the distributions, what is agent i’s utility in expectation for using a certain strategy? This so-called interim utility is at heart of much modern mechanism design literature from both economics and computer science (e.g. Myerson, 1981; Laffont et al., 1995; Syrgkanis and Tardos, 2013; Hartline and Lucier, 2015).
As is natural for many other settings with distributional prior knowledge, it is important to know how sensitive the problem is to the accuracy of the prior distributions; in particular, given sample access to the distribution, how many samples are needed to estimate the interim utilities of agents, for any proﬁle of strategies? This is the question we study in this work.
As we discuss below, without appealing to the structure of a game, it is hopeless to learn all utilities with a ﬁnite number of samples. In this work we take the First Price Auction (FPA) and the All Pay auction as two examples of non-truthful auction, and show that a small number of samples from the type distributions sufﬁce to learn interim utilities for all monotone bidding strategies.
The ﬁrst price auction is one of the most ubiquitous and fundamental auctions, with a large literature on its various aspects, and is gaining more popularity recently for various practical reasons (see e.g.
Sluis, 2019; Rajan, 2019; Akbarpour and Li, 2018). In the FPA, the item is sold to the bidder with the highest bid, who then pays her own bid; all other bidders pay nothing. Our main result is that, for an FPA with n bidders, ˜O(n/(cid:15)2) samples from the type distribution sufﬁce to learn, with high probability, the interim utilities up to (cid:15) additive error for any proﬁle of monotone bidding strategies.2
As a corollary, this number of samples also sufﬁce to learn the set of all (cid:15)-Bayes equilibria of an FPA, and to compute an (cid:15)-Bayes equilibrium in polynomial time. We also show that our bound is tight up to a logarithmic factor.
Sampling from Type Distributions. The assumption of having sample access to the underlying type distribution is standard in a long line of work on learning in mechanism design (e.g. Cole and Roughgarden, 2014; Morgenstern and Roughgarden, 2015, 2016; Balcan et al., 2016, 2018;
Gonczarowski and Nisan, 2017; Syrgkanis, 2017; Gonczarowski and Weinberg, 2018; Guo et al., 2019b). In particular, type samples have been assumed in the context of learning in non-truthful auctions (Balcan et al., 2019). Just as in classical microeconomics, prior knowledge (in the form of samples here) comes from market research, survey, simulation etc., and is not assumed to be from past bidding history. We distance our approach from the line of work on learning non-truthful auctions where samples are from past bidding history (Chawla et al., 2017; Hartline and Taggart, 2019). This latter approach, with obvious merits, has its limitations. Crucially, it assumes that the observed bidding in a non-truthful mechanism is at equilibrium, which may not be the case in reality; also, to avoid strategic issues between auctions, the bidders need to be short lived or myopic strategically. The two approaches (type samples vs. bid samples) complement each other even in learning non-truthful mechanisms; this work takes the ﬁrst approach, and leaves the direction with bid samples as an enticing open question.
Our Techniques. Let us draw an analogy with classical PAC learning, where one typically has a class of functions on an input space and an unknown distribution over the input; with samples from the input distribution, one is to learn the expectation of the functions on the unknown distribution. In our setting, every proﬁle of strategies, one for each agent, deﬁnes a function which maps a proﬁle of types to a utility for each agent; given the underlying value distribution, the expectation of this function is the agents’ interim utilities. We would like to have a number of samples such that, with high probability, the empirical estimation of utilities for all bidding strategies is approximately correct.
With any ﬁnite number of samples, it is impossible to learn utilities for all arbitrary bidding strategies.
Consider the following example: in an auction with two bidders, the ﬁrst bidder having value 1 and bidding 1 2 , and the second bidder’s value v2 uniformly drawn from [0, 1]; any ﬁnite set of samples of v2 has probability measure 0 in the distribution of v2; therefore on any set of samples, there are bidding strategies of bidder 2 that look the same on the sampled values but give bidder 1 drastically different utilities in expectation on the value distribution. 2The ˜O(·) notation omits polylogarithmic factors. 2
To overcome this, we observe that non-monotone bidding strategies are (weakly) dominated by monotone ones in a ﬁrst price auction — a bidding strategy is monotone if its bid is non-decreasing with the value. For all practical purposes, therefore, learning utilities for monotone bidding strategies sufﬁces. A key technical insight of this work is that the restriction to monotone strategies makes it possible to learn utilities with a small number of samples.
Our sample complexity bound comes from bounding the pseudo-dimension of the class of utility func-tions for monotone bidding strategies. Pseudo-dimension is a generalization of the VC-dimension, and has been applied to learning in mechanism design (Morgenstern and Roughgarden, 2015, 2016;
Balcan et al., 2018, 2019). Another key step is a lemma (Lemma 3.10), highly related to a concentra-tion inequality shown by Devanur et al. (2016), that translates learning on a correlated distribution from samples to learning on a natural empirical product distribution.
We extend our main result to the all pay auction. In the all pay auction, the item is sold to the highest bidder, but all bidders, including the losers, pay their bids. This auction is a good model for crowdsourcing (Chawla et al., 2012).
Lower Bound. We give a nontrivial, information-theoretic lower bound for the utility learning problem, showing that Ω(n/(cid:15)2) samples are needed for learning utilities with monotone bidding strategies. The polynomial dependence on n, the number of bidders, is interesting. In particular, this highlights the difference between learning utilities for a ﬁxed proﬁle of bidding strategies and our task, which is to simultaneously learn the utilities for all strategies. For the ﬁrst task, one may simply estimate, for each bidder, the cumulative density function of the highest bid among the opponents; it takes only Θ(1/(cid:15)2) samples for the estimated CDF to be accurate everywhere.
Auctions with Search Costs. We extend our sample complexity bound to auctions with search costs. In this setting, bidders know their value distributions but need to incur a cost to learn their own values. Real estate and insurance markets exhibit this feature. Kleinberg et al. (2016) showed that the
Dutch auction beats the English auction and is near optimal at equilibrium for welfare in this setting.
If the value distributions are unknown, how many samples are needed for the Dutch auction on the empirical distribution to be near optimal? A real estate market maker may be interested in this: he may collect market information and suggest search and bidding strategies for the participants. We show that ˜O(n/(cid:15)2) samples again sufﬁce.
En route, we improve a sample complexity bound, recently obtained by Guo et al. (2019a), for the
Pandora’s Box problem (Weitzman, 1979), a classical model and algorithm for sequential search.
Additional