We propose a versatile deep image compression network based on Spatial Feature Transform (SFT) [45], which takes a source image and a corresponding quality map as inputs and produce a compressed image with variable rates. Our model covers a wide range of compression rates using a single model, which is controlled by arbitrary pixel-wise quality maps. In addition, the proposed framework allows us to perform task-aware image compressions for various tasks, e.g., classiﬁcation, by efﬁciently estimating optimized quality maps speciﬁc to target tasks for our encoding net-work. This is even possible with a pretrained network with-out learning separate models for individual tasks. Our al-gorithm achieves outstanding rate-distortion trade-off com-pared to the approaches based on multiple models that are optimized separately for several different target rates. At the same level of compression, the proposed approach suc-cessfully improves performance on image classiﬁcation and text region quality preservation via task-aware quality map estimation without additional model training. The code is available at the project website1. 