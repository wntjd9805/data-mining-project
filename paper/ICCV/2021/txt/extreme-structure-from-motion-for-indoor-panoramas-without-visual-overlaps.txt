Abstract
This paper proposes an extreme Structure from Motion (SfM) algorithm for residential indoor panoramas that have little to no visual overlaps. Only a single panorama is present in a room for many cases, making the task infeasible for existing SfM algorithms. Our idea is to learn to evaluate the realism of room/door/window arrangements in the top-down semantic space. After using heuristics to enumerate possible arrangements based on door detections, we eval-uate their realism scores, pick the most realistic arrange-ment, and return the corresponding camera poses. We eval-uate the proposed approach on a dataset of 1029 panorama images with 286 houses. Our qualitative and quantita-tive evaluations show that an existing SfM approach com-pletely fails for most of the houses. The proposed approach achieves the mean positional error of less than 1.0 meter for 47% of the houses and even 78% when considering the top five reconstructions. We will share the code and data in https://github.com/aminshabani/extreme-indoor-sfm. 1.

Introduction
The emergence of consumer-grade panorama cameras is making a revolution in the real-estate industry. With only a few hundred dollars per unit, increasingly more number of real-estate agents and home owners utilize the cameras to snap panoramas, enabling house renters or buyers to browse through full-360 interior views with the flick of a finger. In particular, the THETA series from RICOH is collecting 100 million panoramas for real-estate applications.
This incredible market growth comes from mass-consumer crowd sourcing, whereas the operation must be simple. Given lengthy instructions on how to 1) use a cam-era, 2) set up a mono/tri-pod, and 3) use a smartphone app to verify shootings, create annotations, and moderate con-tents, users are simply asked to take a picture in the mid-dle of each room. Therefore, panorama images have little to no visual overlaps, making the pose estimation infeasi-ble for existing techniques. A robust panorama alignment algorithm will enable a plethora of applications such as au-tomated floorplan generation, accurate price prediction, and verification of building-codes.
This paper proposes an extreme Structure from Motion (SfM) problem for indoor panoramas with little to no visual overlaps and provides a novel compelling solution to the problem. Our key idea is to learn the arrangement of rooms, doors, and windows, and solve for camera parameters that maximize the realism of their arrangement. For example, a rest-room and a shower-room are often adjacent and nearby
the entrance. Bedrooms are connected to a living room, and a balcony is typically on the opposite side from an entrance.
Concretely, given a set of panoramas, we use standard techniques to apply Manhattan-rectification, infer a room layout, detect doors/windows with their types, and classify a room type for each panorama. Inferred semantic infor-mation is re-projected into a Nadir (i.e., top-down) view as a semantic image. We generate arrangement candidates by aligning Nadir semantic images based on the door detec-tions. Finally, a convolutional message passing neural net-work learns to score the generated arrangements, where we output the one with the highest score as the reconstruction.
We use 1029 panoramas for 286 houses from a produc-tion pipeline. A standard SfM approach fails to align even two panoramas for most of the houses [12]. The proposed system reconstructs compelling arrangements, concretely the mean positional error being less than 1.0 meter in the top five reconstructions for 78% of the test houses.
The contribution of the paper is three fold: 1) A new extreme indoor SfM problem with the new dataset for the exploding market; 2) One-of-a-kind SfM algorithm which learns to evaluate the arrangement of semantic information; and 3) State-of-the-art performance where existing tech-niques fail. We will share the code, models, and data. 2.