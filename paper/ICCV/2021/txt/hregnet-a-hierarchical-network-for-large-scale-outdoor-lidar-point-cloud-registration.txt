Abstract
Point cloud registration is a fundamental problem in 3D computer vision. Outdoor LiDAR point clouds are typically large-scale and complexly distributed, which makes the reg-istration challenging. In this paper, we propose an efficient hierarchical network named HRegNet for large-scale out-door LiDAR point cloud registration. Instead of using all points in the point clouds, HRegNet performs registration on hierarchically extracted keypoints and descriptors. The overall framework combines the reliable features in deeper layer and the precise position information in shallower lay-ers to achieve robust and precise registration. We present a correspondence network to generate correct and accurate keypoints correspondences. Moreover, bilateral consensus and neighborhood consensus are introduced for keypoints matching and novel similarity features are designed to in-corporate them into the correspondence network, which sig-nificantly improves the registration performance. Besides, the whole network is also highly efficient since only a small number of keypoints are used for registration. Extensive ex-periments are conducted on two large-scale outdoor LiDAR point cloud datasets to demonstrate the high accuracy and efficiency of the proposed HRegNet. The project website is https://ispc-group.github.io/hregnet. 1.

Introduction
Point cloud registration aims to estimate the optimal rigid transformation between two point clouds, which is a fundamental problem in 3D computer vision and plays an important role in many applications such as robotics [27] and autonomous driving [24].
Iterative Closest Point (ICP) [3] is the best-known method to solve point cloud registration problem. However,
ICP highly relies on the initial guesses of the transformation for iteration and can easily get stuck into local minimum
*Corresponding author: guangchen@tongji.edu.cn
Figure 1. Network architecture of the proposed HRegNet. The point clouds P are hierarchically downsampled to small sets of keypoints X and descriptors D. We perform coarse registration in the bottom layer to leverage the reliable features for keypoints matching and fine registration is followed to refine the transforma-tion by exploiting the precise position information in upper layers. due to the non-convexity of the problem. Several variants of ICP [31, 23, 37] have been proposed to achieve global optimal estimation, however, are typically time-consuming for large-scale point clouds.
Recently, deep learning has achieved great success in nu-merous 3D computer vision tasks such as 3D object detec-tion and semantic segmentation [13]. There also emerge a number of deep learning-based methods for point cloud reg-istration. However, existing methods are mostly designed for object-level point clouds [35, 1, 36, 39, 19] or indoor point clouds [5, 14, 25, 11]. Compared to object-level or indoor point clouds, outdoor LiDAR point clouds typically have higher sparsity, larger spatial range and a more com-plex and variable distribution, which makes the registration
intractable. Consequently, existing learning-based methods are either unreliable or time-consuming to be applied to out-door LiDAR point cloud registration.
In this paper, we aim to provide an accurate, reliable and efficient network for large-scale outdoor LiDAR point cloud registration. Inspired by the success of learning-based 3D features on LiDAR point cloud registration [18, 2, 20, 38, 7], we propose a hierarchical keypoint-based point cloud registration network named HRegNet. The overall structure is displayed in Fig. 1. We hierarchically downsample the point clouds to multiple small sets of keypoints and descrip-tors for registration. Intuitively, as the layer goes deeper, the information of a single keypoint increases, which makes the descriptors more reliable for keypoints matching, however, the increasing sparsity of keypoints may also cause larger position error of corresponding keypoints. Based on the above consideration, the network starts with coarse regis-tration in the bottom layer by globally matching keypoints in descriptor space to leverage the reliable features. Then the coarse transformation is refined by fine registration in upper layers based on local matching in spatial neighbor-hoods, which exploits the precise position information in shallower layers. Besides, since only a small number of keypoints are used for registration, the network has high ef-ficiency and can be applied in applications requiring real-time performance, such as autonomous driving.
Although the keypoints in the bottom layer have reliable features, possible error of descriptors may lead to a con-siderable number of mismatches. To improve the robust-ness and accuracy of registration, we present a learning-based correspondence network to generate corresponding keypoints and reject unreliable correspondences. Here we introduce two important concepts for keypoints matching, namely bilateral consensus and neighborhood consensus.
Bilateral consensus, as illustrated in Fig. 2(a), means that a pair of corresponding keypoints should be the nearest neighbor in descriptor space of each other from both sides.
As shown in Fig. 2(b), neighborhood consensus indicates that the neighboring keypoints of two corresponding key-points should also have high similarity. Notably, bilateral consensus and neighborhood consensus have been success-fully applied in many cases (e.g., estimate image dense cor-respondences [30]). To effectively incorporate them into the learning-based registration pipeline, we design novel similarity features based on bi-directional similarity of de-scriptors and an attention-based neighbor encoding module, which significantly improves the registration performance.
To evaluate the proposed HRegNet, extensive experi-ments are performed on two large-scale outdoor LiDAR point cloud datasets, namely KITTI odometry dataset [10] and NuScenes dataset [4]. The results demonstrate that the proposed method significantly outperforms existing meth-ods in terms of both accuracy and efficiency. (a) Bilateral consensus. (b) Neighborhood consensus.
Figure 2. (a) Bilateral consensus: Two corresponding keypoints should be the nearest neighbor in descriptor space of each other. (b) Neighborhood consensus: Spatial neighborhoods of two corre-sponding keypoints should also be similar.
In summarize, our main contributions are as follows:
• We propose a novel point cloud registration network named HRegNet, which achieves state-of-the-art per-formance with high computational efficiency.
• The hierarchical paradigm well combines the strengths of keypoints and descriptors in shallower and deeper layers to achieve precise and robust registration.
• We design novel similarity features, which effectively incorporate bilateral consensus and neighborhood con-sensus into the registration pipeline and significantly improve the registration performance. 2.