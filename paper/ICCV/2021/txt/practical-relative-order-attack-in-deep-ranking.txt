Abstract
Recent studies unveil the vulnerabilities of deep ranking models, where an imperceptible perturbation can trigger dramatic changes in the ranking result. While previous attempts focus on manipulating absolute ranks of certain candidates, the possibility of adjusting their relative order remains under-explored. In this paper, we formulate a new adversarial attack against deep ranking systems, i.e., the Or-der Attack, which covertly alters the relative order among a selected set of candidates according to an attacker-specified permutation, with limited interference to other unrelated candidates. Specifically, it is formulated as a triplet-style loss imposing an inequality chain reflecting the specified permutation. However, direct optimization of such white-box objective is infeasible in a real-world attack scenario due to various black-box limitations. To cope with them, we propose a Short-range Ranking Correlation metric as a sur-rogate objective for black-box Order Attack to approximate the white-box method. The Order Attack is evaluated on the Fashion-MNIST and Stanford-Online-Products datasets under both white-box and black-box threat models. The black-box attack is also successfully implemented on a major e-commerce platform. Comprehensive experimental evalua-tions demonstrate the effectiveness of the proposed methods, revealing a new type of ranking model vulnerability. 1.

Introduction
Thanks to the widespread applications of deep neural net-works [26, 21] in the learning-to-rank tasks [51, 41], deep ranking algorithms have witnessed significant progress, but unfortunately they have also inherited the long-standing ad-versarial vulnerabilities [46] of neural networks. Consid-ering the “search by image” application for example, an imperceptible adversarial perturbation to the query image is sufficient to intentionally alter the ranking results of can-didate images. Typically, such adversarial examples can be designed to cause the ranking model to “misrank” [32, 29] (i.e., rank items incorrectly), or purposefully raise or lower the ranks of selected candidates [59].
*Corresponding author.
Since “misranking” can be interpreted as deliberately lowering the ranks of well-matching candidates, previous attacks on ranking models unanimously focus on changing the absolute ranks of a set of candidates, while neglecting the manipulation of relative order among them. However, an altered relative order can be disruptive in some applications, such as impacting sales on e-commerce platforms powered by content-based image retrieval [44], where potential cus-tomers attempt to find merchandise via image search.
As shown in Fig. 1, an attacker may want to adversari-ally perturb the query image and thus change the relative order among products A, B, C, D, and E into A ≺ E ≺
D ≺ C ≺ B in the search-by-image result. The sales of a product closely correlates to its Click-Through Rate (CTR), while the CTR can be significantly influenced by its ranking position [10, 38] (which also decides the product pagination on the client side). Hence, subtle changes in the relative order of searches can be sufficient to alter CTR and impact the actual and relative sales among A to E.
Such vulnerability in a commercial platform may be ex-ploited in a malfeasant business competition among the top-ranked products, e.g., via promoting fraudulent web pages containing adversarial example product images generated in advance. Specifically, the attack of changing relative order does not aim to incur significant changes in the absolute ranks of the selected candidates (e.g., moving from list bot-tom to top), but it intentionally changes the relative order of them subtly without introducing conspicuous abnormality.
Whereas such goal cannot be implemented by absolute rank attacks such as [59], the relative order vulnerability may justify and motivate a more robust and fair ranking model.
Specifically, we propose the Order Attack (OA), a new ad-versarial attack problem in deep ranking. Given a query image q ∈ [0, 1]D, a set of selected candidates C =
{c1, c2, . . . , ck}, and a predefined permutation vector p =
[p1, p2, . . . , pk], Order Attack aims to find an imperceptible perturbation r (∥r∥∞ ⩽ ε and ˜q = q + r ∈ [0, 1]D), so that
˜q as the adversarial query can convert the relative order of the selected candidates into cp1 ≺ cp2 ≺ · · · ≺ cpk . For example, a successful OA with p = [1, 5, 4, 3, 2] will result in c1 ≺ c5 ≺ c4 ≺ c3 ≺ c2, as shown in Fig. 1.
Figure 1: Showcase of a practical Order Attack (OA) against “JD SnapShop”, a major online retailing e-commerce platform.
The query image is “Han Chinese clothing”. Numbers atop candidate images are Stock Keep Unit (SKU) IDs.
To implement OA, we first assume the white-box threat model (i.e., the ranking model details, incl. the gradient are accessible to the attacker). Recall that a conventional deep ranking model [51, 58, 41, 25] maps the query and can-didates onto a common embedding space, and determines the ranking list according to the pairwise similarity between the query and these candidates. Thus, OA can be formu-lated as the optimization of a triplet-style loss function based on the inequality chain representing the desired relative or-der, which simultaneously adjusts the similarity scores be-tween the query and the selected candidates. Additionally, a semantics-preserving penalty term [59] is also included to limit conspicuous changes in ranking positions. Finally, the overall loss function can be optimized with gradient methods such as PGD [33] to find the adversarial example.
However, in a real-world black-box attack scenario, prac-tical limitations (e.g., gradient inaccessibility) invalidate the proposed method. To accommodate them and make OA practical, we propose a “Short-range Ranking Correlation” (SRC) metric to measure the alignment between a desired permutation and the actual ranking result returned to clients by counting concordant and discordant pairs, as a practical approximation of the proposed triplet-style white-box loss.
Though non-differentiable, SRC can be used as a surrogate objective for black-box OA and optimized by an appropriate black-box optimizer, to achieve similar effect as the white-box OA. SRC can also be used as a performance metric for the white-box method, as it gracefully degenerates into
Kendall’s ranking correlation [24] in white-box scenario.
To validate the white-box and black-box OA, we con-duct comprehensive experiments on Fashion-MNIST and
Stanford-Online-Product datasets. To illustrate the viability of the black-box OA in practice, we also showcase successful attacks against the “JD SnapShop” [23], a major retailing e-commerce platform based on content-based image retrieval.
Extensive quantitative and qualitative evaluations illustrate the effectiveness of the proposed OA, and reveals a new type of ranking model vulnerability.
To the best of our knowledge, this is the first work that tampers the relative order in deep ranking. We believe our contributions include, (1) the formulation of Order Attack (OA), a new adversarial attack that covertly alters the relative order among selected candidates; (2) a triplet-style loss for ideal-case white-box OA; (3) a Short-range Ranking Corre-lation (SRC) metric as a surrogate objective approximating the triplet-style loss for practical black-box OA; (4) exten-sive evaluations of OA including a successful demonstration on a major online retailing e-commerce platform. 2.