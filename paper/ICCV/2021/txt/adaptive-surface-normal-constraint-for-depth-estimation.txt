Abstract
We present a novel method for single image depth es-timation using surface normal constraints. Existing depth estimation methods either suffer from the lack of geomet-ric constraints, or are limited to the difficulty of reliably capturing geometric context, which leads to a bottleneck of depth estimation quality. We therefore introduce a sim-ple yet effective method, named Adaptive Surface Normal (ASN) constraint, to effectively correlate the depth estima-tion with geometric consistency. Our key idea is to adap-tively determine the reliable local geometry from a set of randomly sampled candidates to derive surface normal con-straint, for which we measure the consistency of the ge-ometric contextual features. As a result, our method can faithfully reconstruct the 3D geometry and is robust to local shape variations, such as boundaries, sharp corners and noises. We conduct extensive evaluations and comparisons using public datasets. The experimental results demonstrate our method outperforms the state-of-the-art methods and has superior efficiency and robustness. Codes are available at: https://github.com/xxlong0/ASNDepth 1.

Introduction
Estimating depth from a single RGB image, one of the most fundamental computer vision tasks, has been exten-sively researched for decades. With the recent advances of deep learning, depth estimation using neural networks has drawn increasing attention. Earlier works [6, 22, 9, 35, 32] in this field directly minimize the pixel-wise depth errors, of which results cannot faithfully capture the 3D geometric features. Therefore, the latest efforts incorporate geometric constraints into the network and show promising results.
Among various geometric attributes, surface normal is predominantly adopted due to the following two reasons.
First, surface normal can be estimated by the 3D points converted from depth. Second, surface normal is deter-mined by a surface tangent plane, which inherently encodes the local geometric context. Consequently, to extract nor-Figure 1. Example results of ground truth, ours and VNL [48].
By enforcing our proposed Adaptive Surface Normal (ASN) con-straint, our reconstructed point cloud preserves both global struc-tural information and local geometric features. The recovered sur-face normal is more accurate and less noisy than that of VNL. mals from depth maps as geometric constraints, previous works propose various strategies, including random sam-pling [48], Sobel-like operator [13, 16] and differentiable least square [29, 27].
Despite the improvements brought about by the existing efforts, a critical issue remains unsolved, i.e., how to de-termine the reliable local geometry to correlate the normal constraint with the depth estimation. For example, at shape boundaries or corners, the neighboring pixels for a point could belong to different geometries, where the local plane assumption is not satisfied. Due to this challenge, these methods either struggle to capture the local features [48], or are sensitive to local geometric variations (noises or bound-aries) [13, 16], or computationally expensive [29, 27].
Given the significance of local context constraints, there is a multitude of works on how to incorporate shape-ware regularization in monocular reconstruction tasks, rang-ing from sophisticated variational approaches for optical flow [34, 43, 33, 1] to edge-aware filtering in stereo [37] and monocular reconstruction [14, 30]. However, these methods
have complex formulations and only focus on 2D feature edges derived from image intensity variation, without con-sidering geometric structures of shapes in 3D space.
In this paper, we introduce a simple yet effective method to correlate depth estimation with surface normal constraint.
Our formulation is much simpler than any of the aforemen-tioned approaches, but significantly improves the depth pre-diction quality, as shown in Fig. 1. Our key idea is to adap-tively determine the faithful local geometry from a set of randomly sampled candidates to support the normal estima-tion. For a target point on the image, first, we randomly sample a set of point triplets in its neighborhood to define the candidates of normals. Then, we determine the confi-dence score of each normal candidate by measuring the con-sistency of the learned latent geometric features between the candidate and the target point. Finally, the normal is adap-tively estimated as a weighted sum of all the candidates.
Our simple strategy has some unique advantages: 1) the random sampling captures sufficient information from the neighborhood of the target point, which is not only highly efficient for computation, but also accommodates various geometric context; 2) the confidence scores adaptively de-termine the reliable candidates, making the normal esti-mation robust to local variations, e.g., noises, boundaries and sharp changes; 3) we measure the confidence using the learned contextual features, of which representational ca-pacity is applicable to complex structures and informative to correlate the normal constraint with the estimated depth.
More importantly, our method achieves superior results on the public datasets and considerably outperforms the state-of-the-art methods.
Our main contributions are summarized as follows:
• We introduce a novel formulation to derive geometric constraint for depth estimation, i.e., adaptive surface normal.
• Our method is simple, fast and effective. It is robust to noises and local variations and able to consistently capture faithful geometry.
• Our method outperforms the state-of-the-art method on the public datasets by a large margin. 2.