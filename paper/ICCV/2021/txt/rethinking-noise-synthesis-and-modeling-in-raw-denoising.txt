Abstract
The lack of large-scale real raw image denoising dataset gives rise to challenges on synthesizing realistic raw im-age noise for training denoising models. However, the real raw image noise is contributed by many noise sources and varies greatly among different sensors. Existing methods are unable to model all noise sources accurately, and build-ing a noise model for each sensor is also laborious.
In this paper, we introduce a new perspective to synthesize noise by directly sampling from the sensor’s real noise. It inherently generates accurate raw image noise for differ-ent camera sensors. Two efficient and generic techniques: pattern-aligned patch sampling and high-bit reconstruc-tion help accurate synthesis of spatial-correlated noise and high-bit noise respectively. We conduct systematic experi-ments on SIDD and ELD datasets. The results show that (1) our method outperforms existing methods and demonstrates wide generalization on different sensors and lighting con-ditions. (2) Recent conclusions derived from DNN-based noise modeling methods are actually based on inaccurate noise parameters. The DNN-based methods still cannot out-perform physics-based statistical methods. The code will be available at https://github.com/zhangyi-3/. 1.

Introduction
Learning-based methods have made great progress on raw image denoising in recent years. However, collect-ing a large-scale real raw image dataset is time and man-power consuming. Therefore, most learning-based methods on raw image denoising are trained with synthetic datasets, which model and apply synthesis noise to clean images to create noisy inputs. As a result, their denoising perfor-mances in real-world scenarios are significantly dependent on the discrepancy between the synthetic noise and actual noise in real raw images.
Existing methods for synthesizing raw image noise gen-erally conducts the following two steps: (1) building a noise model and optimizing the parameters by fitting the real noise distribution, and (2) generating the synthetic noise randomly from the noise model. According to the different types of noise models, they can be divided into two cate-gories: physics-based statistical methods and Deep Neural
Network (DNN)-based methods.
DNN-based methods [30, 1, 7] learn to model noise dis-tribution from real datasets with deep generative networks (e.g., GAN, Flow). Although the deep models have pow-erful representation capability, it is particularly hard for them to generate accurate values for each pixel in dense-prediction tasks. For example, in image generation, how to generate realistic small details with less artifacts is a rel-atively challenging problem. While all DNN-based meth-ods claim superior performances on SIDD dataset compared with the physics-based noise models, we found that those conclusions are built on the uncalibrated noise profiles of the SIDD dataset (noise profiles for the Poisson-Gaussian distribution).
Physics-based statistical methods [29, 14] are more promising compared with the DNN-based methods since they follow the physical process of the specific camera sen-sor and model various noise sources step by step accord-ing to the physical process from photos to digital numbers.
However, there also exist obvious limitations for physics-based methods. First, it is impossible to accurately extract and model all kinds of noise sources in the camera since every electronic component of the camera can be a noise source. Second, in most cases, modeling a noise source is based on inaccurate distributions since the natural dis-tributions for most noise sources are unknown. Third, the real noise distributions vary dramatically in different cam-eras or lighting conditions (e.g., low-light), which makes physics-based methods laborious. All those limitations hin-der physics-based methods to achieve accurate noise mod-eling.
In this paper, we propose a new perspective for synthe-sizing realistic image noise. Specifically, instead of build-ing the noise model first and then generating synthetic noise from the noise model step by step, we synthesize the noise by sampling directly from the real noise distribution.
We first describe the general raw image formation based on the physical process and decompose the raw image noise
into signal-dependent and signal-independent components.
For the signal-dependent noise, we only consider the photon shot noise, which follows the Poisson distribution strictly due to the quantum nature of light. Other signal-dependent noise (e.g., Photo Response Non-Uniformity) only have marginal impact1 due to the advances of sensor design and manufacture. We synthesize the signal-dependent noise by sampling from real Poisson distribution with the cali-brated total gain parameters. For the complicated signal-independent noise, we use the target sensor to capture dark frames with the corresponding exposure and ISO settings in a purely dark room so that all signal-independent noise are preserved and saved into a dark-frame database. We synthe-size the signal-independent noise by directly sampling pixel values from the dark-frame database.
Even though the naive implementation that samples pixel values from 10-bit dark frames is based on the real noise, we empirically find that it cannot work well over all camera sensors and exposure ratios due to the missing of spatial-correlated noise and high-bit information. We therefore propose two techniques to tackle the issues: First, we use pattern-aligned patch sampling for signal-independent noise to keep the spatial-correlated and pattern-correlated noise (e.g., row noise, fixed pattern noise). Second, we re-construct the accurate continuous distribution for the quan-tized dark frames by using a set of bell-shaped distributions and restore the signal-independent noise to higher bits.
To demonstrate the effectiveness and generalization of our method, we systematically compare it with both DNN-based and statistical methods on SIDD [2] and SID [8] datasets. Our method outperforms all existing methods and shows consistent improvements on various camera sensors and lighting conditions.
Moreover, we find that the noise profiles of popular raw image datasets [2, 8] are quite inaccurate, which have been used widely in previous works. After calibrating the noise profile carefully for the statistical methods, we observe that recent DNN-based methods actually underperform statisti-cal methods with a clear gap, which is opposite to recent works.
Our contributions are summarized as follows:
• We propose an efficient and generic perspective to syn-thesize noise for raw image denoising.
• We propose raw pattern-aligned patch and high-bit re-construction to synthesize realistic raw image noise.
• We systematically study the statistical methods and
DNN-based methods for noise modeling.
• The proposed method outperforms existing statistical and DNN-based methods on raw image datasets and 1Several previous papers and experiments show the percentage of the mean signal value of PRNU is mostly less than 3% (e.g. Figure 2 in [15] and Figure 7 in [25].) demonstrates great generalization on different camera sensors and lighting conditions. 2.