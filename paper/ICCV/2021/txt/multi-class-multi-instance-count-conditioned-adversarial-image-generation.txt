Abstract
CityCount Examples
Image generation has rapidly evolved in recent years.
Modern architectures for adversarial training allow to gen-erate even high resolution images with remarkable qual-ity. At the same time, more and more effort is dedicated towards controlling the content of generated images. In this paper, we take one further step in this direction and pro-pose a conditional generative adversarial network (GAN) that generates images with a defined number of objects from given classes. This entails two fundamental abilities (1) being able to generate high-quality images given a com-plex constraint and (2) being able to count object instances per class in a given image. Our proposed model modu-larly extends the successful StyleGAN2 architecture with a count-based conditioning as well as with a regression sub-network to count the number of generated objects per class during training. In experiments on three different datasets, we show that the proposed model learns to generate im-ages according to the given multiple-class count condition even in the presence of complex backgrounds.
In partic-ular, we propose a new dataset, CityCount, which is de-rived from the Cityscapes street scenes dataset, to eval-uate our approach in a challenging and practically rele-vant scenario. An implementation is available at https:
//github.com/boschresearch/MCCGAN . 1.

Introduction
Developmental studies show that the human brain is en-dowed with a natural mechanism for understanding numer-ical quantities [10, 48]. Even young children have an ab-stract understanding of numeracy and can generalize the concept of counting from one category to another (e.g. from objects to sounds) [48]. While counting object instances is relatively easy for humans, it is challenging for deep learn-ing and computer vision algorithms, especially when ob-jects from multiple classes, e.g. persons and cars, are con-In this paper, we take a step towards such ele-sidered. mentary visual reasoning by addressing the generation of images conditioned on the number of object instances per
Generated Images 3 cars 2 persons 2 cars + 1 person
Figure 1: Real and generated CityCount images by our model based on the multiple-class count input. object class. We are particularly interested in the com-plex case where objects from multiple classes are present in the same image (compare Figure 1). This is a funda-mental vision task, which can even be solved by small chil-dren [10], but remains an unsolved problem in computer vi-sion. Apart from that, many practical applications can ben-efit from the capability to generate images respecting nu-merical constraints. Especially, it aids the generation of ad-ditional diverse training data for visual question answering and counting approaches. Further, the generation of techni-cal designs based on the number of different components is of particular interest in the field of topology design, where data-based approaches have recently been explored success-fully in applications ranging from molecular design [2] for chemical applications to product design [38] for aesthetics or engineering performance.
In this paper, we propose to solve multiple-class count (MC2) conditioned image generation (i.e. the generation of images conditioned on the number of objects of differ-ent classes, that are visible in the image) as a modular ex-tension to the state-of-the-art network for adversarial image generation, StyleGAN2 [29]. We further argue that object
counting should be considered as a multi-class regression problem. While this approach is simple, it allows the simi-larity between neighboring numbers to be naturally encoded in the network and to transfer the ability to count from one class to another. This will ideally make our network learn to generalize the concept of counting from one object class to another, meaning that it can for example see images of
”two cars and one person” at training time and deduce the appearance of ”two persons” at inference time. To the best of our knowledge this is the first attempt to evaluate the po-tential of GANs to generate images based on the multiple object class count.
We validate the proposed approach in two lines of ex-periments. First, we evaluate the generative performance of our model on synthetic data generated according to the CLEVR [24] dataset as well as on real data from the
SVHN [36] dataset. We further propose a new, challeng-ing real-world dataset, CityCount, which is derived from the well-known street scenes dataset Cityscapes [9]. The City-Count dataset comprises of various crops from Cityscapes images which contain specific numbers of objects from the important classes, car and person. The dataset includes various challenging scenarios such as diverse and complex backgrounds, object occlusions, varying object scales and scene geometry. Samples from the CityCount dataset and generated samples from our model are shown in Figure 1.
In the second line of experiments, we show that the images generated by MC2-StyleGAN2 can be used to enhance the size and quality of training data for count prediction net-works, trained on images from CLEVR and CityCount. 2.