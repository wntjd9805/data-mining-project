Abstract
The decision-based black-box attack means to craft ad-versarial examples with only the top-1 label of the victim model available. A common practice is to start from a large perturbation and then iteratively reduce it with a determin-istic direction and a random one while keeping it adversar-ial. The limited information obtained from each query and inefﬁcient direction sampling impede attack efﬁciency, mak-ing it hard to obtain a small enough perturbation within a limited number of queries. To tackle this problem, we pro-pose a novel attack method termed Adaptive History-driven
Attack (AHA) which gathers information from all histori-cal queries as the prior for current sampling. Moreover, to balance between the deterministic direction and the random one, we dynamically adjust the coefﬁcient according to the ratio of the actual magnitude reduction to the expected one.
Such a strategy improves the success rate of queries dur-ing optimization, letting adversarial examples move swiftly along the decision boundary. Our method can also integrate with subspace optimization like dimension reduction to fur-ther improve efﬁciency. Extensive experiments on both Im-ageNet and CelebA datasets demonstrate that our method achieves at least 24.3% lower magnitude of perturbation on average with the same number of queries. Finally, we prove the practical potential of our method by evaluating it on popular defense methods and a real-world system pro-vided by MEGVII Face++. 1.

Introduction
With the rapid development and the dominant perfor-mance, deep neural networks (DNNs) have been success-fully deployed to improve productivity in many ﬁelds, e.g., the voice assistant in smart speakers, image recog-nition APIs on the cloud, and automatic pilot in vehi-cles. Though many effort have been put into explaining the
DNNs [1, 18, 19, 43], DNNs are still far from full control-*R. Ji (rrji@xmu.edu.cn) is the corresponding author. lable and have been proven to be vulnerable to carefully crafted imperceptible perturbations, i.e., adversarial pertur-bations [41], which poses threats to the application of DNNs in security scenarios.
Therefore, many methods have been proposed to evalu-ate the robustness of the DNNs under different settings [13, 4, 21]. Among all the settings, the black-box setting is the most practical but challenging one since only the corresponding outputs are available. Some attack meth-ods [29, 38, 37] craft adversarial examples on white-box models and transfer them to the victim model. These transfer-based methods consume fewer resources but can not guarantee a high attack success rate. Some adversaries turn to query the model repeatedly. Depending on the form of the outputs, query-based black-box attack methods can be further divided into the score-based attack and decision-based attack. Outputs of the former one are usually continu-ous and ﬂoating numbers (e.g., class probabilities) respond-ing to the change of input rapidly, which is able to guide the perturbation generation step by step. The decision-based attack setting is more challenging where the adversary can only fetch the result whether the input belongs to the same class as the target sample or not. Such a setting usually is correlated to a target attack whose goal is to craft an adver-sarial example classiﬁed as a target one.
The most classic decision-based attack, Boundary At-tack [2], starts from an adversarial example and search along two directions: the source direction towards the source image directly for reducing perturbation and the spherical direction randomly sampled from the normal dis-tribution for exploring. However, this method mainly de-pends on random sampling without utilizing information from prior queries efﬁciently, resulting in an enormous number of queries. Many methods have been proposed to improve it. Biased Boundary Attack [3] introduces three bi-ases to improve the efﬁciency of direction sampling. Evolu-tionary Attack [10] reduces the solution space and models the local geometry via successful queries with (1+1)-CMA-ES optimization. However, without taking full advantage of all information from all queries, these methods still re-quire a large number of queries to reduce the magnitude of the perturbations. Moreover, the trade-off of the two direc-tions also impacts a lot. We argue that large coefﬁcient for the direction reducing the perturbation brings more queries crossing the boundary and then failing, but large coefﬁ-cient for the exploring direction will increase the number of queries. Existing methods adjust the corresponding co-efﬁcients based on whether the query is adversarial. Such a binary value gives a coarse guide thereby leaving coefﬁcient adjustment inﬂexible.
In this paper, towards obtaining perturbations with smaller magnitude under fewer queries, we propose the
Adaptive History-driven Attack (AHA) which makes use of information from all queries with an adaptive coefﬁcient adjustment strategy. Following the boundary attack, AHA starts from a large perturbation, and then reduces it itera-tively with a determinate direction (i.e., source direction) and a random direction. Instead of randomly sampling from a standard normal distribution for the random direction, we gather information from historical queries and apply it as the prior for current sampling. Such a method is simple yet efﬁcient without extra computation cost added. To bal-ance between the source direction and the direction driven by historical queries, considering that the purpose of coef-ﬁcient adjusting is to reduce the magnitude of the perturba-tions as much as possible, we dynamically adjust the coefﬁ-cient based on the ratio of the actual reduction on perturba-tion’s magnitude to the expected one. This strategy reduces the chance of getting stuck into the decision boundary. Be-sides, the optimization method is orthogonal to the existing subspace method like dimension reduction. These methods can be integrated to further improve performance. We con-duct extensive experiments on various models including a real-world online system to demonstrate the efﬁciency of the proposed AHA. We conclude our contributions as:
• We propose a simple yet efﬁcient decision-based at-tack method, termed Adaptive History-driven Attack (AHA), which utilizes information of both success-ful and failed historical queries as the prior for cur-rent sampling without complex optimization and extra computation cost added.
• To balance between two directions during the opti-mization process, we design a novel strategy to ad-just the coefﬁcient dynamically.
Instead of on how often the optimization successes, the coefﬁcient is ad-justed based on the degree of the actual reduction on the magnitude compared with the expected one, which increases the probability of ﬁnding valid queries.
• Finally, we evaluate AHA on models for natural im-ages and human faces. The perturbations generated by
AHA are smaller than the state-of-the-art method with the same number of queries. Furthermore, the effec-tiveness of AHA on the real-world system, i.e., face veriﬁcation API from MEGVII Face++, is also veri-ﬁed with 24.9% smaller perturbations than baseline. 2.