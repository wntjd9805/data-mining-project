Abstract
Image Signal Processor (ISP) is a crucial component in digital cameras that transforms sensor signals into im-ages for us to perceive and understand. Existing ISP de-signs always adopt a fixed architecture, e.g., several se-quential modules connected in a rigid order. Such a fixed
ISP architecture may be suboptimal for real-world applica-tions, where camera sensors, scenes and tasks are diverse.
In this study, we propose a novel Reconfigurable ISP (Re-configISP) whose architecture and parameters can be au-tomatically tailored to specific data and tasks. In particu-lar, we implement several ISP modules, and enable back-propagation for each module by training a differentiable proxy, hence allowing us to leverage the popular differen-tiable neural architecture search and effectively search for the optimal ISP architecture. A proxy tuning mechanism is adopted to maintain the accuracy of proxy networks in all cases. Extensive experiments conducted on image restora-tion and object detection, with different sensors, light con-ditions and efficiency constraints, validate the effectiveness of ReconfigISP. Only hundreds of parameters need tuning for every task1. 1.

Introduction
A digital camera uses an ISP to transform original
RAW images to high-quality RGB images that can be dis-played on screen. Existing ISP systems typically adopt a human-designed pipeline [16] comprised of specialized modules, each of which addresses a subtask, such as denois-ing [12, 22], demosaicing [11, 17], white balancing [13], etc. Traditional ISP is highly modular and efficient. How-ever, once the pipeline is fixed, it can hardly be adapted to different application scenarios. A costly and manual tuning of parameters is required.
In this study, our goal is to keep the modular design of the traditional ISP, but learn a reconfigurable ISP architec-1Codes and models are available at https://www.mmlab-ntu. com/project/reconfigisp/ ture that can quickly adapt to various tasks (e.g., restoration and object detection), scenes (e.g., daytime and nighttime) and runtime constraints. To this end, we present a novel and versatile reconfigurable ISP framework, named Recon-figISP. The proposed framework allows changes and rerout-ing in the ISP architecture, i.e., what basic modules should be chosen and how they are connected, optimized towards designated objective functions. Given the flexibility, spe-cialized modules can be combined to generate numerous
ISP pipelines to handle various application scenarios, but still preserving the modularity and parameters of each mod-ule. Experimental results show that our framework achieves a significant improvement over traditional camera pipelines (Sec. 4). Examples are shown in Fig. 1.
Searching for an optimal ISP pipeline is a new and in-teresting problem. In this work, we make several techni-cal contributions to address some of the non-trivial chal-lenges: (1) Tunable ISP modules - Most existing ISP mod-ules are non-differentiable. As a result, the parameters of these modules cannot be efficiently optimized with end-to-end training, making the search for optimal pipeline in-tractable. To address this issue, we use a convolutional neu-ral network to imitate each non-differentiable module. The proxy network observes input images and module param-eters, together with global image statistics that the module may need. The network is trained to resemble the output of the original non-differentiable module. With all mod-ules differentiable, the ISP architecture can be efficiently (2) explored with the help of neural architecture search.
Proxy tuning and online pruning - With the aforementioned framework, we still need to resolve the gap in data distri-bution. In particular, the data we use for ISP architecture search depend on the target task, and they might be unseen to a pre-trained proxy network. To mitigate the domain gap, we devise an effective proxy tuning approach â€“ fine-tuning proxy networks with the observed fresh data on the fly dur-ing ISP architecture search. Our approach updates the ISP architecture and proxy networks alternately. And it gradu-ally prunes modules with low performance to accelerate the
Figure 1: While inheriting the modularity of traditional ISP, ReconfigISP can adapt to different tasks, such as image restoration and object detection by learning to reconnect specialized ISP modules. For each task, the left image shows the results of a default camera processing pipeline while the right image presents our output (zoom in for best view). In the task of object detection, ReconfigISP optimizes the ISP for more accurate detections rather than perceptual quality. training process.
We note that there is a surge of interest in deep ISP ap-proaches [5, 7, 27], which converts an ISP pipeline to a sin-gle end-to-end deep network. ReconfigISP offers a com-pelling alternative to the deep ISP paradigm. First, Re-configISP can adjust its pipeline purely driven by objective functions, while existing deep ISP solutions do not offer such flexibility. For instance, to fulfill a specific runtime constraint, a deep ISP solution will need to redesign the network architecture from scratch. Perhaps more notably,
ReconfigISP preserves the modularity of the image forma-tion process stages. It is interpretable as each module plays a clear role in the ISP pipeline. Hence, our method still allows human intervention if needed, and it offers insights to design principles of effective ISP pipelines beyond just a reconfigurable framework. Moreover, to cope with differ-ent processing functionalities, deep ISP methods typically require an extensive network with millions of parameters.
Expensive retraining with a large quantity of data is needed for every new task to prevent overfitting. The data require-ment is unrealistic, especially if one wishes to repurpose the ISP for complex tasks like object objection. In contrast, our framework only needs to tune hundreds of parameters with limited data. We will validate the above advantages of
ReconfigISP in our experiments. 2.