Abstract
We present the novel Efficient Line Segment Detector and
Descriptor (ELSD) to simultaneously detect line segments and extract their descriptors in an image. Unlike the tradi-tional pipelines that conduct detection and description sep-arately, ELSD utilizes a shared feature extractor for both detection and description, to provide the essential line fea-tures to the higher-level tasks like SLAM and image match-ing in real time. First, we design a one-stage compact model, and propose to use the mid-point, angle and length as the minimal representation of line segment, which also guarantees the center-symmetry. The non-centerness sup-pression is proposed to filter out the fragmented line seg-ments caused by lines’ intersections. The fine offset predic-tion is designed to refine the mid-point localization. Sec-ond, the line descriptor branch is integrated with the detec-tor branch, and the two branches are jointly trained in an end-to-end manner. In the experiments, the proposed ELSD achieves the state-of-the-art performance on the Wireframe dataset and YorkUrban dataset, in both accuracy and effi-ciency. The line description ability of ELSD also outper-forms the previous works on the line matching task. 1.

Introduction
Image perception for low-level visual patterns is an es-sential issue for many computer vision tasks such as SLAM,
Structure-from-Motion (SfM), and image matching. Local point features [4, 21, 24] are widely used in these tasks, and recently the researchers have been exploring the usage of structural features for better geometric representation[9, 10, 13, 30, 34]. Line segments are the most widely seen structural features in man-made environments. The reliable extraction of line segments and the matching across frames are important for the aforementioned tasks.
Recently, the convolutional neural networks (CNN)
*Corresponding author. This paper is supported by the National
Key R&D Plan of the Ministry of Science and Technology (Project No. 2020AAA0104400).
Figure 1. Inference speed (FPS) and accuracy (sAP 10) on Wire-frame dataset. based line segment detection models have significantly out-performed the traditional methods. The models[33, 36, 38] consist of two stages. They first detect junctions and then generate line segment proposals and finally feed the em-bedding of each line segment into a classifier. Although these two-stage methods can achieve high performance, their running speed cannot satisfy real-time applications.
TP-LSD[12] first realizes the compact one-stage detection by introducing the Tri-points (a root-point and two end-points) representation of line segment. However, TP-LSD predicts the two end-points separately and does not leverage the center-symmetric characteristics of the line segment.
Thus, the predicted root-point might not be the exact mid-point of the two predicted end-points, and even the three points might be not co-linear. Moreover, the prediction of the root point is ambiguous especially when the lines inter-sect with each other so that many false root-points belong-ing to the fragmented line segments are detected. Besides,
TP-LSD does not differentiate hard and easy examples dur-ing training. Some hard root points of line segments may not be properly detected.
Line segment descriptor is required to represent the line segment in a high-dimensional metric space, and the same line in two adjacent frames should be close in this metric
space. There exist some CNN-based line descriptors[15, 16, 27]. However, these line descriptors are designed indi-vidually, and not yet tightly coupled with the line segment detector. It is also time-consuming to execute detection and description separately.
To this end, we propose ELSD that simultaneously pre-dicts line segments and inferences line descriptors in an end-to-end fashion. 1) We introduce the one-stage architec-ture that utilizes the Center-Angle-Length (CAL) represen-tation to vectorize a line segment. Our line detector consists of two module: (i) localization module and (ii) regression module. 2) Since the mid-points might be ambiguous for detection when lines intersect, as shown in Figure 3b, we introduce the line-centerness to filter the false mid-points belonging to fragmented line segments and adopt modified focal loss[19] to focus more on the mid-points of hard cases. 3) In the regression module, the geometric maps are pre-dicted to provide the rotation angles and lengths. Moreover, we refine the position of the midpoints by predicting the fine offsets to compensate for the localization accuracy. 4)
In the line descriptor branch, we obtain the descriptor of each predicted line segment by line pooling. The descriptor is learned by random homography-based self-supervision.
The pipeline of ELSD is shown in Figure 2.
In summary, the main contributions are as follows:
• We present a pipeline that simultaneously detects line segments and inferences line descriptors in an end-to-end fashion. To the best of our knowledge, this is the first work that unifies line detector and descriptor in a compact neural network. The major computation in the backbone is shared by the two tasks, and the two task branches can be jointly training, with negligible loss on detection performance.
• We utilize the Center-Angle-Length (CAL) representa-tion to encode a line segment that has only four param-eters to predict. To overcome the detection ambiguity when lines intersect, we proposed the non-centerness suppression mechanism to remove the mid-points of fragmented line segments. The midpoint position is further refined by using the offset regression so that the line segment localization is more precise.
• Our ELSD obtains state-of-the-art performance in both accuracy and efficiency on the Wireframe and YorkUr-ban datasets. Moreover, the light version of our model achieves the speed of 107.5 FPS on a single GPU (RTX2080Ti) with comparable performance. 2.