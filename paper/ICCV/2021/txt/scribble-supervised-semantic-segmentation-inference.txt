Abstract
In this paper, we propose a progressive segmentation in-ference (PSI) framework to tackle with scribble-supervised semantic segmentation. In virtue of latent contextual depen-dency, we encapsulate two crucial cues, contextual pattern propagation and semantic label diffusion, to enhance and refine pixel-level segmentation results from partially known seeds. In contextual pattern propagation, different-granular contextual patterns are correlated and leveraged to prop-erly diffuse pattern information based on graphical model, so as to increase the inference confidence of pixel label pre-diction. Further, depending on high-confidence scores of estimated pixels, the initial annotated seeds are progres-sively spread over the image through dynamically learn-ing an adaptive decision strategy. The two cues are finally modularized to form a close-looping update process during pixel-wise label inference. Extensive experiments demon-strate that our proposed progressive segmentation inference can benefit from the combination of spatial and semantic context cues, and meantime achieve the state-of-the-art per-formance on two public scribble segmentation datasets. 1.

Introduction
Semantic segmentation is one fundamental topic in com-puter vision. Numerous deep learning based methods have sprung up to deal with this task [5, 6, 28, 10, 43]. They usu-ally require a vast quantity of fully annotated samples to fa-cilitate the training of deep neural networks. But the annota-tion of image segmentation often suffers massive workload because of fully flexible/irregular polygons of segmentation regions. To bypass the dependency on high-expensive anno-tations, weakly supervised semantic segmentation is much desirable due to more convenient annotations. Broadly speaking, the annotation ways mainly contain four cate-*Authors contributed equally.
†Corresponding authors: zhen.cui@njust.edu.cn, cyx@njust.edu.cn. gories: image-level labels [9, 18, 24, 41], clicks [4], bound-ing boxes [7, 30, 19] and scribbles [26, 34, 35, 38]. The image-level labels and clicks only provide very limited su-pervision information, thus making them hard to train high-accuracy semantic segmentation models. Although bound-ing boxes can provide more supervision information, they tend to overlap with each other and thus result into many disturbances from confusion labels during training. In con-trast, the scribble annotations are more flexible to reflect the distribution of semantic classes, and their operation is easily controllable. Due to its potential advantages, here we focus on the case of scribble-supervised semantic segmentation.
The scribble-supervised semantic segmentation has been studied over the past decade. Early methods [33, 12] may be dated to interactive segmentation which uses graphical models to directly expand semantic labels to unlabeled re-gions. With the popularity of deep neural networks, many recent methods attempted to introduce deep feature learn-ing into traditional graphical models, e.g., CRF [26] and random-walks [37] based on scribbles [26], and gener-ated more confident pseudo labels for those unlabeled re-gions to guide model update. Further, due to the diffi-culty of boundary estimation, some methods [38] employed auxiliary networks to aid segmentation refinement, or in-troduced topology-constrained loss functions [34, 35] to smooth prediction results. Although these methods endeav-ored to utilize more robust features or external information to improve segmentation performance, the crucial problems about what/how to infer from known seeds to unknown re-gions especially in the deep feature pattern space are still under studied.
To address the above problems, we propose a progres-sive segmentation inference (PSI) framework by adaptively diffusing contextual patterns as well as label information for scribble-supervised semantic segmentation. Inspired by the observation [27] that the patterns from low-level visions to high-level semantics are mutually dependent/correlated in spatial domain or semantic domain, we attempt to lever-age the pattern dependency to fulfill segmentation infer-ence. Concretely, the designed segmentation inference con-sists of two components: multi-granular contextual pattern propagation (CPP) and progressive semantic label diffusion (SLD). In CPP, pattern correlations are mined from multi-granular contextual domain, including across different con-volutional layers as well as across different spatial posi-tions. Afterwards, the pixel-level feature patterns to predict pixel labels are enhanced through the information aggrega-tion in the multi-granular contextual domain through graph-ical model. Attributed to the introduction of graph structure, the advantages of CPP are two folds. On the one hand, the contextual information from different-granular layers could be effectively integrated to better estimate pixel labels. On the other hand, during training the backward gradients could be propagated to former image pixels more quickly due to shorted connections in graph, which also makes scarce su-pervision of top layers more effectively imposed on bottom layers. In SLD, motivated by [17, 42], we attempt to extend the annotated scribbles to neighboring confident areas ac-cording to the prediction scores of the segmentation model with CPP. To make sure more confident inference, we in-troduce an adaptive decision strategy to choose those high-confidence regions as pseudo ground truths, which are fur-ther used for the next model update process. Hereby the un-known segmentation labels could be gradually refined with continuous extensions of high-confidence regions. The two components are modularized and further encapsulated into a close-looping inference process to fulfill progressive seg-mentation prediction. The extensive experiments show that our proposed PSI method could mutually evolve segmen-tation model as well as labels, and meantime achieve the state-of-the-art results in the task of scribble-supervised se-mantic segmentation.
In summary, our contributions are three folds:
• We propose a novel progressive segmentation infer-ence framework through context inference as well as annotation inference for scribble-supervised semantic segmentation.
• We develop two crucial components, multi-granular contextual pattern propagation and progressive seman-tic label diffusion, to form a close-looping update progress during pixel-label inference.
• We experimentally validate the effectiveness of the proposed two components, and report the state-of-the-art performance. 2.