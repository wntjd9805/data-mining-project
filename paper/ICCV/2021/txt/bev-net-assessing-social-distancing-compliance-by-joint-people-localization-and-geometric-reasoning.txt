Abstract
Social distancing, an essential public health measure to limit the spread of contagious diseases, has gained signif-icant attention since the outbreak of the COVID-19 pan-demic. In this work, the problem of visual social distanc-ing compliance assessment in busy public areas, with wide field-of-view cameras, is considered. A dataset of crowd scenes with people annotations under a bird’s eye view (BEV) and ground truth for metric distances is introduced, and several measures for the evaluation of social distance detection systems are proposed. A multi-branch network,
BEV-Net, is proposed to localize individuals in world coor-dinates and identify high-risk regions where social distanc-ing is violated. BEV-Net combines detection of head and feet locations, camera pose estimation, a differentiable ho-mography module to map image into BEV coordinates, and geometric reasoning to produce a BEV map of the people locations in the scene. Experiments on complex crowded scenes demonstrate the power of the approach and show superior performance over baselines derived from methods in the literature. Applications of interest for public health decision makers are finally discussed. Datasets, code and pretrained models are publicly available at GitHub1. 1.

Introduction
Social distancing, the strategy of maintaining a safe dis-tance between people in public spaces, has been shown to be an effective measure against the transmission of conta-gious pathogens, including influenza virus and coronavirus
[57, 7, 23]. However, the monitoring of social distancing by human observers is neither practical in many settings nor scalable. This has motivated an interest in methods to detect and count social distancing violations automatically. While
Figure 1: Set of tasks proposed for social distancing compliance assessment. Given an input image, models are expected to jointly predict camera geometry (top left), bird’s eye view heatmap of person locations (bottom left), local risk map highlighting areas with high probability of infection (right), as well as individual and global risk level for the entire scene (annotated over the risk map). non-vision-based methods are available 2, they typically re-quire users to install certain applications on their mobile de-vices, and are limited in precision of distance estimates.
Computer vision offers a viable alternative for the col-lection of social distance measurements.
In particular, it has several advantages for the monitoring of public spaces.
First, it can leverage surveillance cameras that are already available in many public locations. No expensive infrastruc-ture changes are required.
Second, anonymization of visual data is straightforward by removing all facial identities, as the system has no access to other sensitive information of pedestrians. This makes it much more privacy preserving than the monitoring of mo-bile devices, or similar approaches. On the other hand, 2The DP-3T contact tracing protocol [59], for example, estimates dis-1https://github.com/daizhirui/BEVNet tances using Bluetooth signal on smartphones.
it can produce complete statistics of social distancing vi-olations, as there is no prerequisite on the population (e.g. smartphone with Bluetooth enabled). While not suited for contact-tracing, these statistics can be very useful to deci-to enable the implementation of highly sion makers, e.g. localized “lock-downs,” time-varying control of pedestrian access to certain areas, etc.
Computer vision has a long history of sensing humans in images. Object detection [14, 17, 16, 52, 37] and instance segmentation [8, 21, 35] recognize and localize objects by bounding boxes or pixel-wise masks. While effective for close objects and sparsely populated scenes [12, 39], de-tection quality degrades substantially for far cameras and busy spaces, involving significant degrees of occlusion. In fact, on such scenes, it is even impossible to collect accurate bounding box annotations. Social distancing measuring is more closely related to crowd-counting methods [66, 5, 42], which are trained to produce a heatmap that highlights the head location of every person in the scene. However, be-cause these methods don’t explicitly reason about scene ge-ometry, they are unsuitable to estimate distances between individuals. Furthermore, head locations are not ideal for estimating scene distances, since heads do not lie on a shared plane in 3D, due to people height variation. Much more accurate distance estimates can usually be obtained by reconstructing the scene ground plane and measuring feet distances. This, however, presents additional challenges, due to occlusion.
In this work, we consider the problem of social distanc-ing compliance assessment (SDCA), which aims to measure the distances between individuals in a scene and detect vio-lations of social distancing thresholds. Based on the above observations, we argue that SDCA requires a geometry-aware approach, where the relevant extrinsic parameters of the camera are estimated and used to generate a bird’s eye view (BEV) map of people locations, as illustrated in Fig-ure 1. We propose a novel benchmark for SDCA, CityUHK-X-BEV, which repurposes the CityUHK-X dataset [28] to the SDCA problem, by adding ground-plane annotations.
Specifically, for each head location in the dataset, the corre-sponding feet position is annotated, and mapped to the BEV, using the known intrinsic and extrinsic camera parameters.
A novel set of evaluation criteria is introduced, each focus-ing on a different aspect of the task: Localization metric that measures the accuracy in detecting real-world locations of people in the ground plane; local risk metric that evaluates the capability to discover regions with high chance of infec-tion; global risk metric that predicts the overall risk level of captured scene. Figure 1 shows examples of these tasks.
Unlike many vision problems that localize object in the im-age plane, these geometry-aware criteria directly evaluate the capacity of models to make predictions in the 3D ground plane, leading to outputs that are much more informative for real-world applications that require metric information.
A multi-branch convolutional architecture, BEV-Net, is then proposed to solve the SDCA task. BEV-Net follows an encode-decoder structure, using a projective transformation module to convert convolutional feature maps from image view to BEV. The decoder is implemented with a pose re-gression branch that estimates camera parameters and three separate branches to predict feet, head and BEV heatmaps.
These branches are trained with individual losses, in a multi-task manner. To compensate for the height variations in the crowd, a group transformation module with spatial self-attention is used to group people by head height and in-dependently align the feet and head feature maps of the re-sulting groups. Experiments show that the BEV-Net outper-forms all DET and CC baselines under all proposed SDCA evaluation metrics. It is further shown, through ablation ex-periments, that both head and feet annotations are essential to achieve the best prediction quality.
A number of applications of potential interest for pub-lic health decision makers are then illustrated. These range from the characterization of risks for a single image, as il-lustrated in Figure 1, to global measures of scene risk, in-tegrated over image datsets, as shown in Figures 7 and 8.
The latter can be used to identify events of unusually large risk or inform the deployment of risk mitigation measures, such as the introduction of obstacles in the scene to modify walking patterns and other crowd behaviors.
The paper makes four major contributions: First, we in-troduce the idea of using computer vision for joint geomet-ric reasoning and social distancing compliance assessment on public spaces. Second, a novel benchmark for SDCA in crowd scenes, CityUHK-X-BEV, is introduced with person-level annotations in bird’s eye view. Third, a multi-branch convolutional network, BEV-Net, is proposed and shown to achieve best SDCA results by learning to perform both heatmap prediction and geometric reasoning. Finally, we show promising results for several potential applications of the SDCA framework in the public health domain. 2.