Abstract
Unsupervised domain adaption has proven to be an ef-fective approach for alleviating the intensive workload of manual annotation by aligning the synthetic source-domain data and the real-world target-domain samples. Unfor-tunately, mapping the target-domain distribution to the source-domain unconditionally may distort the essential structural information of the target-domain data. To this end, we firstly propose to introduce a novel multi-anchor based active learning strategy to assist domain adaptation regarding the semantic segmentation task. By innovatively adopting multiple anchors instead of a single centroid, the source domain can be better characterized as a multimodal distribution, thus more representative and complimentary samples are selected from the target domain. With little workload to manually annotate these active samples, the distortion of the target-domain distribution can be effec-tively alleviated, resulting in a large performance gain. The multi-anchor strategy is additionally employed to model the target-distribution. By regularizing the latent representa-tion of the target samples compact around multiple anchors through a novel soft alignment loss, more precise segmenta-tion can be achieved. Extensive experiments are conducted on public datasets to demonstrate that the proposed ap-proach outperforms state-of-the-art methods significantly, along with thorough ablation study to verify the effective-ness of each component. The code will be released soon at https://github.com/munanning/MADA. 1.

Introduction
Semantic segmentation has always been a fundamental task in computer vision. Benefiting from the rapid develop-ment of deep learning, many advanced segmentation meth-ods have been proposed and achieved great breakthroughs with high accuracies for various tasks, such as autonomous driving [16], scene parsing [8, 44], object detection [26, 61] and human-computer interaction [43]. However, the re-*Contributed equally.
†Correspondence: donwei@tencent.com quirement of large amount of data with accurate pixel-wise annotation limits their usage in many practical applications, e.g., medical image segmentation [28, 40, 42, 41, 36] and auto-driving tasks [6].
To avoid the intensive workload of manual annotation, a lot of efforts have been made on unsupervised domain adaptation (UDA) [5, 20, 21, 55], which aims at aligning the target-domain distribution towards the source-domain distribution, so that networks trained with the supervision of only the synthetic source data can be applied to the real-world target data. However, forcing the target-domain fea-tures to fit the source-domain distribution may destroy the latent structural pattern of the target domain, resulting in inferior performance. As illustrated by the t-SNE [19] vi-sualization in Fig. 1, the distributions of the source and target domains present both overlap (region ①) and obvi-ous discrepancies (regions ② and ③). When the adapted target-domain features (red dots) obtained with a typical
UDA method based on adversarial training [55]—despite generally aligned with the source domain distributions (blue squares)—show a clear distortion of the target-domain dis-tribution in region ②, the adapted network presents unsatis-factory performance. Worse segmentation can be observed in region ③ when some specific targets are aligned neither with the source domain nor the target domain. A promising strategy to efficiently prevent such distortion of the target-domain distribution with minimal annotation workload is active learning (AL) [49]. By introducing little extra man-ual annotation for a few selected samples from the target do-main, the performance can be significantly boosted regard-ing the classification and the detection tasks [51]. However, the sample selection methods in all previous active learn-ing studies [51] assumed a unimodal source-domain distri-bution and neglected the potential multimodal distribution, resulting in sub-optimal active samples and inferior perfor-mance, as demonstrated in Table 4.
To address the above issues, we firstly propose to adopt the active learning strategy to assist domain adaptation (DA) regarding the semantic segmentation task, so that the es-sential structural pattern of the target domain can be main-tained with minimal manual annotation workload. In ad-Figure 1. Visualization (t-SNE [19]) of the target-domain distribution distortion problem in UDA (left). The blue and yellow squares are the average latent representation of different category samples from the target-domain extracted by two networks trained with the source- and target-domain data, respectively, where we can observe little overlap (region ①) along with large discrepancy (regions ② and ③) between the two distributions. The red dots denote the adapted target-domain features by a typical adversarial (adv.) training based UDA method
[55]. A general alignment to the source-domain distribution can be observed in region ①, while an obvious distortion of the target-domain distribution is displayed in region ② and ③, yielding unsatisfactory performance as presented on the right figures. By adopting active learning for the domain adaptation, such distortion is effectively alleviated, as demonstrated by the correctly distributed green dots. dition, a multi-anchor strategy is proposed to better char-acterize the source-domain features as well as the target-domain features. Specifically, the proposed Multi-anchor
Active Domain Adaptation (MADA) framework consists of two stages. In the first stage, with the network pretrained in an adversarial UDA [55] manner, a multi-anchor based active sample selection strategy is proposed to identify the most complementary and representative samples for man-ual annotation by exploiting the feature distributions across the target and source domains. Then in the second stage, the segmentation network is fine-tuned in a semi-supervised learning manner. The annotations of the source samples and the few selected target samples are used for supervision, while all the available image information is additionally ap-plied for optimization with a pseudo label loss and the pro-posed multi-anchor soft-alignment loss. In summary, our paper makes the following contributions:
• To the best of our knowledge, our work is the first study to adopt active learning to assist the domain adaptation regarding the semantic segmentation tasks.
With little manual annotation workload of few target-domain samples, the distortion of the target-domain feature distribution can be effectively prevented and superior segmentation performance can be achieved.
• Assuming a multimodal distribution in practical situa-tions, we propose to adopt multiple anchors obtained via clustering-based method to characterize the feature distribution of the source-domain, so that the represen-tative target-domain samples which are the most com-plimentary to the source-domain can be selected. multi-anchor soft-alignment loss, we show that explic-itly pushing the features of the target samples towards multiple anchors leads to better latent representation, thus notably improve the segmentation performance.
• We conduct extensive experiments to demonstrate the superiority of the proposed MADA framework, along with thorough ablation studies to evaluate the effec-tiveness of the multi-anchor strategy on modeling the feature distribution. 2.