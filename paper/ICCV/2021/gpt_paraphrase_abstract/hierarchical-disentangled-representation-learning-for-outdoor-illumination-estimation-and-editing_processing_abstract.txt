Recently, data-driven sky models have been widely studied for outdoor illumination prediction and have shown better performance compared to analytical models. However, existing models that compress outdoor panoramas into low-dimensional latent vectors face two major problems. Firstly, there is mutual interference between the high dynamic range (HDR) intensity of the sun and the complex textures of the surrounding sky. Secondly, the entangled representation of these models leads to a lack of fine-grained control over independent lighting factors. To address these issues, we propose a hierarchical disentangled sky model (HDSky) for outdoor illumination prediction. Our model hierarchically disentangles any outdoor panorama into multiple factors using three well-designed autoencoders. The first autoencoder compresses each sunny panorama into a sky vector and a sun vector while imposing certain constraints. The second and third autoencoders further disentangle the sun intensity and sky intensity from the sun vector and the sky vector, respectively, using customized loss functions. Additionally, we have designed a unified framework that can predict all-weather sky information from a single outdoor image. Through extensive experiments, we demonstrate that our proposed model significantly improves the accuracy of outdoor illumination prediction. Furthermore, our model allows users to intuitively edit the predicted panorama, such as changing the position of the sun while preserving other elements, without compromising physical plausibility.