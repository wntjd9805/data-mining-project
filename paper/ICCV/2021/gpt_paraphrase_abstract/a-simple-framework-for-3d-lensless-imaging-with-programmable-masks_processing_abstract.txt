This paper introduces a lensless imaging system that replaces the lens in a traditional camera with a phase or amplitude mask near the sensor. While existing methods for lensless imaging can recover scene depth and intensity, they are computationally expensive and struggle with dense scenes and large depth variations. To address these challenges, this paper proposes a lensless imaging system that captures a small number of measurements using different patterns on a programmable mask. The paper presents a fast recovery algorithm to reconstruct textures on a fixed number of depth planes in the scene. Additionally, it addresses the mask design problem for programmable lensless cameras and provides a design template to optimize mask patterns for improved depth estimation. A refinement network is also employed as a post-processing step to identify and eliminate reconstruction artifacts. The proposed modifications are evaluated through extensive experiments on a lensless camera prototype, demonstrating the superior performance of the optimized masks and recovery algorithms compared to existing methods.