We propose a method that can estimate the de-focus map and recover an all-in-focus image from a single dual-pixel image. Previous methods have addressed these problems separately and relied on labeled datasets for training. In contrast, our approach solves both problems simultaneously by optimizing the optics model of dual-pixel images. We demonstrate the effectiveness of our method using data from a smartphone camera, showing improvements in both defocus map estimation and blur removal without the need for supervision.