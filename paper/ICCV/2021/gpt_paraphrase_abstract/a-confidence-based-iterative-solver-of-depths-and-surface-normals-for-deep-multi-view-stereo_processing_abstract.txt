This paper presents a novel deep multi-view stereo (MVS) system that simultaneously predicts depths, surface normals, and per-view confidence maps. The system utilizes a unique solver that iteratively solves for per-view depth maps and normal maps based on a locally planar assumption. The solver updates the depth map by propagating from neighboring pixels with slanted planes, and updates the normal map using local probabilistic plane fitting. Both steps are guided by a customized confidence map. This solver not only serves as an effective post-processing tool for refining and completing plane-based depth maps, but it is also differentiable, allowing for efficient integration into deep learning pipelines. The proposed MVS system incorporates multiple optimization steps of the solver to improve the initial predictions of depths and surface normals. The entire system can be trained end-to-end, separating the challenge of matching pixels in poorly textured regions from the neural network based on cost-volume. Experimental results on ScanNet and RGB-D Scenes V2 datasets demonstrate the state-of-the-art performance of the proposed deep MVS system in multi-view depth estimation. The proposed solver consistently enhances the quality of depth estimates compared to both conventional and deep learning based MVS pipelines. The code for the system is available at https://github.com/thuzhaowang/idn-solver.