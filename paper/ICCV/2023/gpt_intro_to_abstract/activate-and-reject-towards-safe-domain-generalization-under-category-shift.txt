Deep neural networks have achieved great success in vision tasks, but they struggle with domain shifts in real-world applications. Domain Generalization (DG) aims to generalize models trained on multiple source domains to unseen target distributions. Many DG algorithms have been proposed, but they often assume that the label spaces of source and target domains are identical, which is not always true. This paper presents a framework called Activate and RejecT (ART) for Domain Generalization under Category Shift (DGCS). ART reshapes the model's decision boundary to accommodate unknown classes and adjusts the final prediction to reconcile domain and label shifts. It consists of two components: Unknown-aware Gradient Diffusion (UGD) and Test-time Unknown Rejection (TUR). UGD makes the classifier respond to unknown dimensions and smooths the decision boundary to reduce overconfidence. TUR refines the classifier using unlabeled test data in an online adaptation manner. It determines if the input belongs to known classes or not and makes predictions based on dynamically-updated target prototypes. ART achieves superior performance on image classification, object detection, and semantic segmentation tasks. On four benchmarks, it improves the H-score by 6.1% on average compared to the previous best method.