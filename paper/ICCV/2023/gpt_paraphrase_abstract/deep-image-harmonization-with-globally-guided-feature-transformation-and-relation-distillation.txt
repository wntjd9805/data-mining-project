This study focuses on image harmonization, which involves adjusting the foreground illumination in a composite image to match the background. Previous methods have achieved competitive results by transforming foreground features. However, this work proposes a novel approach that utilizes global information to guide the transformation of foreground features, leading to significant improvement in performance. Furthermore, the study introduces a method to transfer the foreground-background relationship from real images to composite images, providing intermediate supervision for the transformed encoder features. To address the limitations of existing harmonization datasets, the researchers contribute a new dataset called ccHarmony, which simulates natural illumination variation. Extensive experiments conducted on both iHarmony4 and the ccHarmony dataset demonstrate the superiority of the proposed method. The ccHarmony dataset is publicly available at https://github.com/bcmi/Image-Harmonization-Dataset-ccHarmony.