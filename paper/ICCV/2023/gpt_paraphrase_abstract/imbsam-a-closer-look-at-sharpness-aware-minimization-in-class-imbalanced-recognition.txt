Addressing class imbalance is a common challenge in real-world recognition tasks, particularly when the majority of classes have limited samples. The Sharpness-Aware Minimization (SAM) technique, which shows promise in overcoming this challenge, fails to effectively address generalization issues in class-imbalanced settings. Upon investigating this issue further, it becomes evident that the primary bottleneck for generalization lies in severe overfitting of tail classes due to limited training data. To overcome this bottleneck, we propose an approach called Imbalanced-SAM (Imb-SAM) that leverages class priors to restrict the generalization scope of SAM and optimize for smoothness. By incorporating class priors, Imb-SAM specifically improves generalization for tail classes. We validate the effectiveness of Imb-SAM on two class-imbalanced recognition applications: long-tailed classification and semi-supervised anomaly detection. In both cases, Imb-SAM demonstrates significant performance improvements for tail classes and anomalies. The code implementation of Imb-SAM is available at https://github.com/cool-xuan/Imbalanced_SAM.