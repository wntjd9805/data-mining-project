This paper proposes a solution to enhance the performance of lens flare removal by re-evaluating the image signal processing pipeline and redesigning the automatic exposure principle. The existing methods for synthesizing data to train flare removal models do not consider automatic exposure and tone mapping in the image signal processing pipeline, leading to limited generalization capability of deep models. Additionally, these methods struggle to handle multiple light sources with varying sizes, shapes, and illuminance. To address these issues, the proposed solution introduces a more reliable light sources recovery strategy by revisiting the ISP and incorporating automatic exposure in the synthesis pipeline. The new pipeline discriminates between local and global illumination through convex combination, preventing global illumination shifting and local oversaturation. Furthermore, a strategy for recovering multiple light sources is introduced, which convexly averages the input and output of the neural network based on illuminance levels, eliminating the need for a hard threshold in identifying light sources. To evaluate the generalization capability of flare removal methods, a new flare removal testing dataset is contributed, consisting of flare-corrupted images captured by ten types of consumer electronics. Extensive experiments demonstrate that the proposed solution effectively improves the performance of lens flare removal and extends its applicability to more general situations.