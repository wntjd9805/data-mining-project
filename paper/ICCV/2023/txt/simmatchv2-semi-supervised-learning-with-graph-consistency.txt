Abstract
Semi-Supervised image classification is one of the most fundamental problem in computer vision, which signifi-cantly reduces the need for human labor. In this paper, we introduce a new semi-supervised learning algorithm - Sim-MatchV2, which formulates various consistency regulariza-tions between labeled and unlabeled data from the graph perspective. In SimMatchV2, we regard the augmented view of a sample as a node, which consists of a label and its cor-responding representation. Different nodes are connected with the edges, which are measured by the similarity of the node representations. Inspired by the message passing and node classification in graph theory, we propose four types of consistencies, namely 1) node-node consistency, 2) node-edge consistency, 3) edge-edge consistency, and 4) edge-node consistency. We also uncover that a simple feature normalization can reduce the gaps of the feature norm be-tween different augmented views, significantly improving the performance of SimMatchV2. Our SimMatchV2 has been validated on multiple semi-supervised learning bench-marks. Notably, with ResNet-50 as our backbone and 300 epochs of training, SimMatchV2 achieves 71.9% and 76.2%
Top-1 Accuracy with 1% and 10% labeled examples on Im-ageNet, which significantly outperforms the previous meth-ods and achieves state-of-the-art performance. 1.

Introduction
In the past decades, deep learning has demonstrated its superior performance in various tasks [15, 36, 17, 59].
However, its outstanding performance is usually based on the fully-supervised setting, which requires a large amount of data and annotations.
In a real-world scenario, high-quality data annotations are fairly hard to collect since it is generally expensive, time-consuming, and sometimes
*Correspondence to: Shan You <youshan@sensetime.com>.
Figure 1: The Top-1 Accuracy of ResNet-50 on ImagetNet with 1% labeled data. Our proposed SimMatchV2 performs significantly better than previous methods with fewer training epochs. Most importantly, 100 epochs of SimMatchV2 training only takes 14.7 GPU days, but the perfor-mance is much higher than PAWS [1] with 300 epochs (68 GPU days). require expert knowledge ( e.g. medical images). Semi-supervised learning (SSL) has recently drawn much atten-tion to the research community due to its efficiency in deal-ing with few labeled data and leveraging massive unlabeled data, significantly reducing the need for human labor.
For the typical SSL algorithms, one standard paradigm is to train a semantic classifier on the labeled data, then use the classifier to make a prediction on the unlabeled data as the pseudo-label [33]. Besides, a class-level “consistency reg-ularization” will be applied to enforce consistency between the class predictions of a model on different perturbations of the same input, which encourages the model to learn more robust and invariant features that generalize well to unseen data. Thus, the quality of pseudo-labels plays a crucial role in consistency regularization, and many works focus on generating stable and high-quality pseudo-labels. For ex-ample, MixMatch [3], ReMixMatch [2], and FixMatch [43] are three typical “consistency regularization” based meth-ods that significantly improve the performance of the SSL
tasks. However, these methods highly depend on the clas-sifier trained on the labeled data. A limited number of la-bels will result in a poor classifier that generates inaccurate pseudo-labels and leads to bad performance.
With the recent success of unsupervised visual represen-tation learning [9, 24, 10, 11, 22, 7, 12, 27, 28, 23], the pre-training and fine-tuning paradigm has gained popular-ity for the semi-supervised learning. In general, the model will be first trained on a large amount of unlabeled data with a proxy task ( e.g. instance discrimination), which also im-poses the consistency regularization on the instance level (i.e. forcing the model to give similar representation for the different perturbations of the same instance). Then, a classifier will be attached to the pre-trained model, and the whole model will be fine-tuned with the limited labeled data. Many works [29, 35, 26, 67, 68, 13, 50, 47, 30, 54] have been proposed to design a better proxy task to improve the quality of the representation. Apparently, the biggest ad-vantage of this approach is that it does not depend on the su-pervised trained classifier but still yields high-quality repre-sentations for unlabelled data. Nevertheless, the drawback of this approach is also very obvious, since no labels were used during the pre-training, making the model hard to con-verge. Generally, the pre-training requires more than 800 epochs to converge, which is extremely time-consuming.
Although many different types of consistency regulariza-tions have been proposed, including class-level [3, 2, 43], instance-level [9, 24, 22], and those that consider both
[66, 43], how to establish a complete and effective consis-tency regularizations remains unresolved. This paper in-troduces a new SSL algorithm - SimMatchV2, which pro-vides a complete consistency regularization solution for var-ious scenarios. The overall idea is inspired by the mes-sage passing and node classification in the graph theory. In
SimMatchV2, we consider the augmented view of a sam-ple as a node in the graph which consists of a node label and its corresponding representation. Different nodes are connected with the edges, which are measured by the sim-ilarity of the node representations. Thus, the information of different nodes can be efficiently propagated through the graph. To this end, we propose four types of consistency regularization, namely 1) node-node consistency, 2) node-edge consistency, 3) edge-edge consistency, and 4) edge-node consistency. Note that the 1) node-node consistency has been proposed in previous works, but our SimMatchV2 provides a complete and unified solution to design the con-sistencies. Moreover, we also propose a feature normaliza-tion technique to reduce the gaps between the feature norm between different augmented views and greatly improve the performance. Our contributions can be summarized as:
• We propose SimMatchV2 - a novel semi-supervised algorithm that models various consistency regulariza-tions from the graph perspectives and proposes four types of consistencies to provide a complete solution for the regularization in SSL.
• We show that a simple feature normalization reduces the gaps between the feature norm of different aug-mented views and greatly improves the performance.
• SimMatchV2 sets a new state-of-the-art performance on various SSL benchmarks. Notably, with ResNet-50 as our backbone and 300 epochs of training, Sim-MatchV2 achieves 71.9% and 76.2% Top-1 accuracy with 1% and 10% labeled data on ImageNet. This re-sult is +4.7% and +0.7% better than prior arts. 2.