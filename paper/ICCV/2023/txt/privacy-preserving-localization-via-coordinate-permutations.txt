Abstract
Recent methods on privacy-preserving image-based lo-calization use a random line parameterization to protect the privacy of query images and database maps. The lift-ing of points to lines effectively drops one of the two ge-ometric constraints traditionally used with point-to-point correspondences in structure-based localization. This leads to a significant loss of accuracy for the privacy-preserving methods. In this paper, we overcome this limitation by de-vising a coordinate permutation scheme that allows for re-covering the original point positions during pose estima-tion. The recovered points provide the full 2D geomet-ric constraints and enable us to close the gap between privacy-preserving and traditional methods in terms of ac-curacy. Another limitation of random line methods is their vulnerability to density based 3D line cloud inversion at-tacks. Our method not only provides better accuracy than the original random line based approach but also provides stronger privacy guarantees against these recently pro-posed attacks. Extensive experiments on standard bench-mark datasets demonstrate these improvements consistently across both scenarios of protecting the privacy of query im-ages as well as the database map. 1.

Introduction
The interest in commercial solutions for cloud-based lo-calization and mapping in mixed reality and robotics (e.g.,
Google VPS [34], Microsoft Azure Spatial Anchors [21], or
Facebook LiveMaps [1]) has raised a host of privacy con-cerns [24, 31, 35, 51]. Recently, several approaches have been introduced by the research community to address these concerns [14,17–19,25,45–47]. The common theme under-lying these methods is based on the principle of lifting tra-ditional point-based features to randomly oriented lines to conceal the appearance of query images and database maps.
While this family of approaches is successful in enabling privacy preserving image-based localization and mapping, it comes at significant trade-offs in terms of accuracy and recall. These trade-offs are primarily caused by the fact that
Figure 1: Privacy-preserving localization. Top Left: The client extracts keypoints and descriptors from the query im-age. Top Right: The client secretly pairs keypoints and per-mutes their coordinates; hiding their true position from the server. Bottom Left: Server performs localization using the permuted points and recovers the original 2D positions for points that exist in both query and map. Bottom Right: Fea-ture inversion on the set of recovered points only reveals objects that are already present in the map. the privacy preserving line-to-point or point-to-line corre-spondences provide weaker geometric constraints than the traditional point-to-point correspondences [46]. When con-cealing the content of images or maps, the number of con-straints is effectively halved, as each point-to-line or line-to-point reprojection only contributes a 1D geometric con-straint compared to the 2D constraint from a point-to-point reprojection. Especially for the hard to localize images, where only few correspondences can be recovered during feature matching, this limitation makes a significant differ-ence in terms of accuracy and recall.
Furthermore, without careful construction of random line maps, density based attacks have been shown to be ef-fective in uncovering information from the privacy preserv-ing representations, which was already mentioned as a limi-tation by Speciale et al. [46]. The main idea behind density based attacks exploits the fact that pairs of randomly ori-ented lines have a relatively higher chance of intersecting near the true surface as compared to empty or unobserved space. As such, a naive attack could simply gather statis-tics from pairwise intersections of random lines and assume the true surface in dense regions of the intersected space.
More sophisticated attacks based on this idea can yield re-alistic image renderings from 3D line maps when attacking naively constructed line maps [9].
In this work, we revisit the approach of lifting points to lines in order to improve upon these two main limitations.
In contrast to the original approach, we introduce a coor-dinate permutation scheme by which we effectively con-struct axis-aligned lines. During the pose estimation rou-tine, the permutation scheme enables us to recover the orig-inal points for a large fraction of the inlier correspondences.
Therefore, we can use the same 2D geometric constraints as in the traditional setup. This significantly improves the accuracy of the localization results. Moreover, when ap-plying our approach for hiding the 3D map, we drastically increase the combinatorial complexity for density based at-tacks as well as reduce the chance for line intersections due to constructing axis-aligned lines. Counter-intuitively, our proposed method therefore not only leads to better accu-racy but also provides a stronger level of privacy preserva-tion. We experimentally demonstrate these improvements on standard benchmark datasets and by attacking our axis-aligned line maps using the approach by Chelani et al. [9].
In summary, we make the following contributions:
• Propose a new privacy-preserving lifting approach, ap-plicable to protecting the map and query.
• Attacking the lifted representation has a higher combi-natorial complexity compared to random lifting, ren-dering previous density based attacks ineffective.
• In contrast to previous work, we can recover the orig-inal 2D or 3D points, allowing for stronger geometric constraints and more accurate poses.
• Experimentally, we show significant improvements over previous privacy preserving work, closing the gap to traditional point-based non-private methods. 2.