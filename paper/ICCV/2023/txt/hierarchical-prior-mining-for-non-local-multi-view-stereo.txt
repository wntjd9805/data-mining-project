Abstract
As a fundamental problem in computer vision, multi-view stereo (MVS) aims at recovering the 3D geometry of a target from a set of 2D images. Recent advances in MVS have shown that it is important to perceive non-local struc-tured information for recovering geometry in low-textured areas. In this work, we propose a Hierarchical Prior Min-ing for Non-local Multi-View Stereo (HPM-MVS). The key characteristics are the following techniques that exploit non-local information to assist MVS: 1) A Non-local Ex-tensible Sampling Pattern (NESP), which is able to adap-tively change the size of sampled areas without becoming snared in locally optimal solutions. 2) A new approach to leverage non-local reliable points and construct a planar prior model based on K-Nearest Neighbor (KNN), to obtain potential hypotheses for the regions where prior construc-tion is challenging. 3) A Hierarchical Prior Mining (HPM) framework, which is used to mine extensive non-local prior information at different scales to assist 3D model recov-ery, this strategy can achieve a considerable balance be-tween the reconstruction of details and low-textured areas.
Experimental results on the ETH3D and Tanks & Temples have verified the superior performance and strong general-ization capability of our method. Our code will be available at https://github.com/CLinvx/HPM-MVS. 1.

Introduction
Multi-View Stereo (MVS) is one of the key problems in the field of 3D computer vision, which contributes greatly to virtual reality [5], 3D object recognition [14], and au-tonomous driving [23]. The objective of MVS method is to reconstruct the 3D geometry of a target from a series of images along with camera parameters. Over the past few years, the emergence of numerous datasets [15, 26, 45] has tremendously contributed to the continuous advancement of MVS methods [8, 27, 9]. However, influenced by low-1Corresponding author
Figure 1: F1 score (↑) comparisons with SOTA tradi-tional [25, 38, 36] and learning-based [30, 29, 32] MVS methods on ETH3D [26] and Tanks & Temples [17]. textured areas, illumination variation and other factors [1],
MVS is still a challenging problem.
To perform an accurate and robust 3D reconstruction, two different types of methods have been investigated, in-cluding learning-based MVS [43, 44, 37, 22] and traditional
MVS [9, 38, 36]. Learning-based MVS implements deep networks to extract high-level features and make predic-tions. However, it needs a large amount of training and its generalization ability still needs further improvement [16].
Traditional MVS can also be broadly classified into two cat-egories: plane-sweeping-based MVS [7, 3, 10] and Patch-Match MVS [9, 25, 38]. Although plane-sweeping-based
MVS produces good results for sufficiently textured and un-occluded surfaces, it performs poorly for scenes composed of large planar surfaces, while PatchMatch MVS has suc-cessfully overcome this restriction.
PatchMatch MVS usually consists of four steps, includ-ing random initialization, hypothesis propagation, multi-In view matching cost evaluation and refinement [36]. essence, it is a process of sampling and verification. The hy-pothesis propagation samples appropriate hypotheses from neighboring pixels to construct solution space while the multi-view matching cost evaluation defines a criterion to verify the reliability of the sampled hypotheses. There-fore, these two steps play an important role in PatchMatch
MVS. Following this popular four-step pipeline, Patch-Match MVS produces remarkable outcomes.
Even so, geometry recovery still suffers a lot from low-textured areas because the previous PatchMatch MVS methods place too much emphasis on local information.
Therefore, we exploit non-local information to achieve high-quality reconstruction. We propose a Hierarchical
Prior Mining for Non-local Multi-View Stereo (HPM-MVS) method, which defines a novel hypothesis propaga-tion pattern and a novel way for constructing planar prior models to assist multi-view matching cost evaluation.
In terms of hypothesis propagation, sequential propaga-tion [2, 46, 25] and diffusion-like propagation [9, 38] are all popular strategies. The previous one only considers the nearest pixels for updating. In contrast, the diffusion-like propagation can update simultaneously based on the neigh-bor hypotheses around the central point. To further lever-age structured region information, ACMH [38] proposes an adaptive checkerboard sampling scheme. Although these previous approaches have greatly improved the efficiency and performance of hypothesis propagation, they both pro-cess in the local neighborhood; thus misestimates can only be updated when several better hypotheses in the local area are sampled. Based on the above observations, we first pro-pose the basic method with a Non-local Extensible Sam-pling Pattern (NESP). Intuitively, a non-local operation re-moves sampling points around the center point. It allows distant correct pixels to have a greater possibility to con-tribute to the update of the current pixel. Moreover, the extensible architecture maintains the variable sampling size and can efficiently select suitable candidate hypotheses.
In terms of the multi-view matching cost evaluation, since the photometric consistency usually causes ambigu-ities during the depth optimization of low-textured areas, many previous methods [35, 11, 40] introduce planar prior models to help the evaluation. They assume low-textured areas are usually on smooth homogeneous surfaces, and construct a planar prior model at the current scale to as-sist depth estimation. To establish a more robust and more comprehensive planar prior, we employ K-Nearest Neigh-bor (KNN) to search non-local reliable points and obtain po-tential hypotheses for the marginal regions where prior con-struction is difficult. Inspired by the coarse-to-fine strategy, we further design an HPM framework. In a coarse-to-fine manner, the prior knowledge at the early stages is built upon non-local credible sparse correspondences at low-resolution scales, which expands the receptive field and leads to an ef-fective depth estimate for smooth homogeneous surfaces.
Subsequently, the prior knowledge at the later stages is con-structed at the higher-resolution scales by using previously rectified hypotheses, which restores the depth information of details in the image. This way, the depth information can be successfully recovered by our HPM architecture.
Extensive experiments on different competitive datasets verify the effectiveness of our method (Fig. 1). The results demonstrate that HPM-MVS has excellent performance, and also holds strong generalization capability to more complex scenes. In a nutshell, our contributions are three-fold as follows:
• We present an NESP module to adaptively determine the number of potential sampling points while avoid-ing becoming snared in locally optimal solutions.
• To construct a more robust and more comprehensive planar prior model, we propose an approach based on
KNN to search non-local neighbor reliable hypotheses and construct a planar prior model for marginal areas where prior construction is challenging.
• We design an HPM framework to explore prior knowl-edge at multiple scales, which efficiently balances out the reconstruction of details and low-textured areas. 2.