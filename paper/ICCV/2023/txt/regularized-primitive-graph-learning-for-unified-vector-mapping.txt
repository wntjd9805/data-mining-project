Abstract
Large-scale vector mapping is the foundation for trans-portation and urban planning. Most existing mapping meth-ods are tailored to one specific mapping task, due to task-specific requirements on shape regularization and topol-ogy reconstruction. We propose GraphMapper, a unified framework for end-to-end vector map extraction from satel-lite images. Our key idea is using primitive graph as a unified representation of vector maps and formulating shape regularization and topology reconstruction as prim-itive graph reconstruction problems that can be solved in the same framework. Specifically, shape regularization is modeled as the consistency between primitive directions and their pairwise relationship. Based on the primitive graph, we design a learning approach to reconstruct prim-itive graphs in multiple stages. GraphMapper can fully explore primitive-wise and pairwise information for shape regularization and topology reconstruction, resulting im-proved primitive graph learning capabilities. We empiri-cally demonstrate the effectiveness of GraphMapper on two challenging mapping tasks for building footprints and road networks. With the premise of sharing the majority design of the architecture and a few task-specific designs, our model outperforms state-of-the-art methods in both tasks on public benchmarks. Our code will be publicly available. 1.

Introduction
Up-to-date vector maps are essential for navigation and urban planning. Methods to automatically extract vec-tor maps from aerial or satellite images have greatly ad-vanced in recent years. However, state-of-the-art vector mapping methods are tailored for one specific type of tar-get [39, 18, 30, 16]. Consequently, multiple models must be maintained for comprehensive mapping systems, which increases the burden of model development and limits the system extensibility.
Designing a unified method for multiple vector mapping tasks is challenging due to the difficulties in processing mul-tiple types of geometric primitives. The method must gen-erate shapes with precise location, well-regularized geome-try, and correct topology, which are the three fundamental requirements for vector mapping. However, existing end-to-end methods either only focus on refining location ac-curacy [23], or learnable topology reconstruction [39, 34]; end-to-end shape regularization is still under explored.
Shape regularization in vector mapping is essentially re-ducing the variation of relative relationship between prim-itives; for example, the angles between line segments of a building polygon usually share a few distinctive values (i.e, 0°, 90°, etc.). Conventional methods rely on heuristics-based rules [10, 1, 31] to generate regularized shapes, which are not flexible and requires extensive tuning. Recent meth-ods regularize shapes through contour optimization or de-formation [16, 25, 12, 10, 39]. However, these methods are not utilizing global shape structure, which we think is essen-tial for accurate and flexible shape regularization. None of these methods are explicitly enforce low variation of primi-tive relationships.
In this paper, we use primitive graph as a generic repre-sentation to build a unified framework, GraphMapper, for multi-type vector mapping. GraphMapper incrementally learns to refine primitives’ locations and reconstruct their pairwise relationships. Effective shape regularization and topology reconstruction are achieved through the relation-ship classification of pairwise primitives. With our design, most existing mapping tasks can be converted to image-based primitive graph reconstruction tasks. As shown in
Fig. 1, GraphMapper is mainly composed of a convo-lutional visual feature encoder and two primitive learning structures (PLS) using multi-head attention (MHA) net-work. We first extract visual features of input image using a convolutional encoder and sample primitives (i.e., points, line segments) from the segmentation maps and key points.
Then, we refine the primitives’ coordinates and predict their geometric directions, which uses a PLS for local and global shape context modeling. Finally, we use another PLS to classify the relationships of primitive pairs.
We apply GraphMapper to two typical mapping tasks: building and road mapping. For building, we find line seg-ment primitives and their topology from segmentation re-sults, and predict inlineness between line segments; the net-work learns shape regularization by enforcing consistency between the network predicted angle matrix and pairwise relationship matrix of line segments. For road, we predict point primitives and reconstruct road topology by classify-ing their pairwise connectivity relationship.
By sharing most network components with few task-specific designs, GraphMapper outperforms state-of-the-art methods in both tasks in public benchmarks. In summary, our main contributions are the following:
• We propose a unified learning framework based on primitive graph, which can be trained end-to-end and adapt to multi-type vector mapping tasks.
• We propose an adaptive shape regularization module that learns to balance between shape regularity and lo-cation accuracy through enforcing internal consistency of primitive graphs.
• We provide adaptations of our learning framework for building and road vector mapping, and achieved state-of-the-art performance on both tasks. 2.