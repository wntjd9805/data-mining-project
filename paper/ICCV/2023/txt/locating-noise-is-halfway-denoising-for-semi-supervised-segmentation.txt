Abstract
We investigate semi-supervised semantic segmentation with self-training, where a teacher model generates pseudo masks to exploit the benefits of a large amount of unlabeled images. We notice that the noisy label from the generated pseudo masks is the major obstacle to achieving good per-formance. Previous works all treat the noise in pixel level and ignore the contextual information of the noise. This work shows that locating the patch-wise noisy region is a better way to deal with noise. To be specific, our method, named Uncertainty-aware Patch CutMix (UPC), first es-timates the uncertainty of per-pixel prediction for pseudo masks of unlabeled images. Then UPC splits the uncer-tainty map into patches and calculates patch-wise uncer-tainty. UPC selects top-k most uncertain patches to gen-erate the uncertain regions. Finally, uncertain regions are replaced with reliable ones from labeled images. We con-duct extensive experiments using standard semi-supervised settings on Pascal VOC and Cityscapes. Experiment results show that UPC can significantly boost the performance of the state-of-the-art methods. In addition, we further demon-strate that our UPC is robust to out-of-distribution unla-beled images, e.g., MSCOCO. 1.

Introduction
Past decades have witnessed significant progress in se-mantic segmentation thanks to the rapid growth of deep learning [20, 6, 9, 8, 30] and large-scale datasets [29, 10, 13] with accurate pixel-level annotations. However, annotat-ing a massive number of training images is expensive and time-consuming, which limits the ability to scale to vari-ous segmentation tasks or scenarios. To reduce the anno-*Work done during internships at MT Lab, Meitu Inc.
†Work done while at University of Illinois Urbana-Champaign. (cid:0)Corresponding author.
Figure 1. (a) Illustrations of the difference between the Pixel Eras-ing method and our UPC. The Pixel Erasing method directly re-moves highly uncertain pixels in pseudo masks. (b) Comparison with other popular data augmentation methods, based on ST++. tation cost, semi-supervised semantic segmentation algo-rithms [33, 31, 15] emerged by exploiting a small number of labeled data and a large amount of unlabeled data.
State-of-the-art semi-supervised semantic segmentation can be categorized into two groups: consistency regular-ization and entropy minimization. Particularly, consistency regularization-based approaches [15, 33, 7] enforce similar predictions of the same image under different transforma-tions, and a representative work is the Mean-Teacher [38].
However, consistency regularization usually has complex training pipelines to achieve good performance, e.g., con-trastive learning [27] or class-balanced strategies [21, 3, 14].
In contrast, entropy minimization [17] often follows a self-training [14] pipeline by retraining the model with pseudo masks on unlabeled images, which leads to a simpler
pipeline. Nevertheless, models with self-training tend to over-fit noisy pseudo masks, leading to a degradation in performance compared to consistency regularization. Thus, how to reduce the impact of noise becomes the key to im-proving the performance of self-training methods.
Previous works try a variety of ways to moderate the ef-fect of noise in pseudo labels. [15, 23, 33] employ a strict threshold to filter out low-confidence pixels. [21] proposes dynamic re-weighting to increase the contribution of reli-able pixels. [39] stores unreliable pixels into a category-wise memory bank to serve as negative samples. Although these approaches have achieved significant progress, they all ignore a critical point: contextual information of the noisy pixel. As shown in Fig. 1 (a), the contextual infor-mation includes two folds: (1) Noisy pixels do not appear alone. The pixels around the noisy pixel tend to be noise even if they have high confidence. (2) noisy pixels always lie on the object edge, and ignoring them will corrupt the learning of object shape and structure. Thus, we ask the question: Can we locate the uncertain region instead of pix-els?
To address the question, we introduce a straightfor-ward data augmentation technique called Uncertainty-aware Patch CutMix (UPC). UPC leverages uncertainty as a guide and identifies noisy regions in a patch-wise man-ner rather than a pixel-wise approach. Specifically, we first train a segmentation model with labeled images, and then use this model to create pseudo masks and uncertainty maps on unlabeled images. We then feed these uncertainty maps into UPC to pinpoint the uncertain regions. UPC be-gins by dividing the uncertainty map into patches of size
N × N . The uncertainty of each patch is calculated by summing the uncertainty of all pixels within it. UPC then selects the top-k unreliable patches as uncertain regions.
Once identified, UPC replaces these uncertain regions us-ing Patch CutMix with reliable regions from another labeled image. To ensure the denoising function is both robust and stable, UPC employs a redundant augmentation strategy, which generates multiple transferred pairs for each unla-beled image using different values of k and labeled images.
There are several notable advantages to our UPC method.
Firstly, the patch-wise identification of uncertain regions preserves contextual information and facilitates subsequent
CutMix operations. Secondly, UPC is model-structure and training-procedure agnostic, making it easy to combine with other semi-supervised methods. Thirdly, UPC is simple and straightforward to implement, requiring minimal effort to incorporate into existing workflows.
We conduct extensive experiments on Pascal VOC [13] and Cityscapes [10] datasets using standard settings to eval-uate the effectiveness of our UPC method. Our UPC yields outstanding performance on both datasets when combined with previous competitive approaches. Specifically, on Pas-cal VOC and Cityscapes, our UPC improves the competitive method U2PL by 3.33% and 5.01%, respectively. Addition-ally, our UPC outperforms other data augmentation meth-ods on the competitive method ST++, as shown in Fig. 1 (b). Furthermore, the spirit of semi-supervised learning is to fully utilize knowledge from unlabeled images, regard-less of their distribution. However, most previous prac-tices use unlabeled images with similar distributions as la-beled images, which is impractical and contradicts the semi-In this study, we examine the supervised learning spirit. ability of our UPC by taking MSCOCO [29] as out-of-distribution (o.o.d) unlabeled data and Pascal VOC as la-beled data. The results demonstrate excellent generaliza-tion capabilities of our UPC, regardless of the distribution of unlabeled images.
Overall, our contributions can be concluded as below: 1. We propose the Uncertainty-aware Patch CutMix (UPC) method from an accurate denoising perspective.
Through patch-wise locating mechanism, our method effectively reduces the impact of noisy pseudo masks in semi-supervised semantic segmentation. 2. Without introducing any extra hyper-parameters or re-training stages, our method boosts semi-supervised se-mantic segmentation by a large margin. Importantly, our method is a plug-and-play method that can be eas-ily combined with other semi-supervised works. 2.