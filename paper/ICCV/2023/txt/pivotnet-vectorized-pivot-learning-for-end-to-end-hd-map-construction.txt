Abstract
Vectorized high-definition map online construction has garnered considerable attention in the field of autonomous driving research. Most existing approaches model change-able map elements using a fixed number of points, or pre-dict local maps in a two-stage autoregressive manner, which may miss essential details and lead to error accumulation.
Towards precise map element learning, we propose a sim-ple yet effective architecture named PivotNet, which adopts unified pivot-based map representations and is formulated as a direct set prediction paradigm. Concretely, we first propose a novel Point-to-Line Mask module to encode both the subordinate and geometrical point-line priors in the net-work. Then, a well-designed Pivot Dynamic Matching mod-ule is proposed to model the topology in dynamic point se-quences by introducing the concept of sequence matching.
Furthermore, to supervise the position and topology of the vectorized point predictions, we propose a Dynamic Vec-torized Sequence loss. Extensive experiments and ablations show that PivotNet is remarkably superior to other SOTAs by 5.9 mAP at least. The code will be available soon. 1.

Introduction
High-definition map (HD map) is one of the most criti-cal components in many autonomous driving modules, in-cluding simulation, localization, and planning. Typical HD map construction relies on manual annotation on lidar point clouds, which is time-consuming and labor-intensive. Re-cent works explore the map learning problems to reduce the labeling costs [8, 10, 18, 23, 36]. Given data from onboard sensors, map learning aims to construct local map within a predefined bird’s-eye-view (BEV) range.
Most existing works view the map construction as a se-mantic learning problem [8, 18, 23, 36]. They represent
*Equal Contribution
†Corresponding Author
Figure 1: Illustration of our motivation for pivot-based vectoriza-tion. Given an original HD map example from nuScenes, there are two different ways to construct a vectorized map, i.e. evenly-based and pivot-based. Comparison shows that pivot-based vectoriza-tion is more corner-friendly, geometry-robust, and expression-compact. Circles on the lines denote the real vectorization GT. a map within certain range as an evenly spaced field and predict the class label for each grid, generating a rasterized map. However, there are obvious limitations of rasterized representation in map learning. First, rasterized maps are composed of dense semantic pixels that contain redundant information, requiring large amounts of memory and trans-mission bandwidth, especially if the map extent is large.
Second, the rasterized representation assumes the indepen-dence of map grids, which ignores the geometric relation-ship between and within map elements. Third, complex post-processing [10] is required to obtain vectorized maps for downstream tasks, which brings additional computation, time consumption, and accumulated errors.
To address the limitations of current semantic learning methods, there have been proposals for generating vector-ized representations in an end-to-end manner. One such method is MapTR [13], which uses a fixed number of points to represent a map element, regardless of its shape com-plexity. However, this approach has two drawbacks. First, the evenly-based representation contains redundant points that have little effect on the geometry. Second, represent-ing a dynamically shaped line with a fixed number of points
may miss essential details in map elements, resulting in in-formation loss, particularly for rounded corners and right angles (Fig.1). Therefore, to learn an accurate and com-pact representation, we model a map element as an ordered list of pivotal points, which is expression compact, corner friendly, and geometry robust. However, the pivot-based representation brings new challenges due to the dynamic number of the pivot points within different map elements.
Previous work [16] has utilized a coarse-to-fine framework and autoregressive decoding to address these challenges, but the autoregressive nature can lead to long inference time and accumulated errors. Towards these issues, we propose
PivotNet, which accurately models map elements through pivot-based representation in a set prediction framework.
The framework of PivotNet is depicted in Fig. 2, which presents an architecture consisting of four primary mod-the camera feature extractor, BEV feature decoder, ules: line-aware point decoder, and pivotal point predictor. The surrounding multi-view images from onboard cameras are fed into the camera feature extractor, which generates cam-era view features. Next, the image features are aggregated and transformed into a unified BEV feature through the BEV feature decoder. The lane-aware point decoder then extracts line-aware point features. Finally, the pivotal point predic-tor removes collinear points and predicts a flexible yet com-pact pivot-based representation.
To be concrete, we first propose a point-to-line mask module for the line-aware point decoder, which encodes both the subordinate and geometric point-line relation through a line-aware mask. Secondly, we further design a pivot dynamic matching module, which models the con-nection in pivotal point sequences by introducing the con-cept of sequence matching. A custom sequence matching algorithm is further devised to enhance the time efficiency.
Lastly, we propose a novel dynamic vectorized sequence loss to supervise the position and topology of the vectorized point predictions, through both pivot and collinear point su-pervision. By formulating the task as a sparse set prediction problem and leveraging an end-to-end sequence matching based bipartite matching loss, we present a method that gen-erates precise yet compact vectorized representations with-out requiring any post-processing.
The contributions of the paper are threefold:
• We present PivotNet, an end-to-end framework for precise yet compact HD map construction via pivot-based vectorization.
• We innovatively introduce point-to-line mask module, pivot dynamic matching module, and dynamic vector-ized sequence loss for accurate map element modeling.
• PivotNet exhibits remarkable superiority over state of the arts (SOTAs) on existing benchmarks, indicating the effectiveness of our approach. 2.